
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{Mod 2 Final Project - Complete - JMI}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \hypertarget{module-2-final-project-submission}{%
\section{Module 2 Final Project
Submission}\label{module-2-final-project-submission}}

\begin{itemize}
\tightlist
\item
  Student: James M. Irving, Ph.D.
\item
  Github Link:
  https://github.com/jirvingphd/dsc-2-final-project-online-ds-ft-021119
\item
  Reviewer: Jeff Herman
\item
  Review Date: 04/08/19
\item
  Blog Post:
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}1}]:} \PY{c+c1}{\PYZsh{} Note: By default, the notebook will not save figures and csv files}
        \PY{c+c1}{\PYZsh{} Change save\PYZus{}for\PYZus{}user to True in order to save all output outputs. }
        \PY{n}{save\PYZus{}for\PYZus{}user} \PY{o}{=} \PY{k+kc}{True} 
        \PY{n}{fig\PYZus{}filepath} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Figures/}\PY{l+s+s2}{\PYZdq{}}
        \PY{n}{data\PYZus{}filepath} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Exported CSV/}\PY{l+s+s2}{\PYZdq{}}
\end{Verbatim}


    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \hypertarget{importing-of-packages-and-defining-functions}{%
\section{Importing of Packages and Defining
Functions}\label{importing-of-packages-and-defining-functions}}

    \hypertarget{if-running-on-colab-uncomment-the-cell-below}{%
\subsubsection{If running on CoLab, uncomment the cell
below:}\label{if-running-on-colab-uncomment-the-cell-below}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}2}]:} \PY{c+c1}{\PYZsh{} \PYZsh{} If running on googe colab}
        \PY{c+c1}{\PYZsh{} \PYZsh{} \PYZsh{}CELL A : IF ON COLAB.}
        \PY{c+c1}{\PYZsh{} \PYZsh{} \PYZsh{}The northwind.sqlite is located in: content/drive/My Drive/Colab Notebooks/datasets/Northwind\PYZus{}small.sqlite}
        \PY{c+c1}{\PYZsh{} from google.colab import drive}
        \PY{c+c1}{\PYZsh{} drive.mount(\PYZsq{}/content/drive/\PYZsq{}, force\PYZus{}remount=True)}
        
        \PY{c+c1}{\PYZsh{} \PYZsh{} \PYZsh{} If in Google Drive }
        \PY{c+c1}{\PYZsh{} path= \PYZsq{}/content/drive/My Drive/Colab Notebooks/datasets/\PYZsq{}}
        \PY{c+c1}{\PYZsh{} file=\PYZsq{}Northwind\PYZus{}small.sqlite\PYZsq{}}
        \PY{c+c1}{\PYZsh{} filepath = path+file}
        \PY{c+c1}{\PYZsh{} \PYZsh{} filepath = \PYZsq{}/content/drive/My Drive/Colab Notebooks/datasets/Northwind\PYZus{}small.sqlite\PYZsq{}}
        \PY{c+c1}{\PYZsh{} \PYZsh{}NOTE: To save files to drive, just to df.to\PYZus{}csv(path+\PYZsq{}filename.csv\PYZsq{})}
        
        \PY{c+c1}{\PYZsh{} If local:}
        \PY{n}{filepath} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Northwind\PYZus{}small.sqlite}\PY{l+s+s1}{\PYZsq{}}
\end{Verbatim}


    \hypertarget{import-packages}{%
\subsection{Import packages:}\label{import-packages}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}3}]:} \PY{c+c1}{\PYZsh{} Normal packages}
        \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
        \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
        \PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}
        \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
        \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{ticker} \PY{k}{as} \PY{n+nn}{mtick}
        \PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
        
        \PY{c+c1}{\PYZsh{} Statsmodels}
        
        \PY{k+kn}{import} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{api} \PY{k}{as} \PY{n+nn}{sm}
        \PY{k+kn}{import} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{formula}\PY{n+nn}{.}\PY{n+nn}{api} \PY{k}{as} \PY{n+nn}{smf}
        \PY{k+kn}{import} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{stats}\PY{n+nn}{.}\PY{n+nn}{api} \PY{k}{as} \PY{n+nn}{sms}
        
        \PY{k+kn}{import} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{as} \PY{n+nn}{stats}
        
        
        \PY{c+c1}{\PYZsh{} Counter}
        \PY{k+kn}{from} \PY{n+nn}{collections} \PY{k}{import} \PY{n}{Counter}
        
        \PY{c+c1}{\PYZsh{} Sklearn}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{model\PYZus{}selection} \PY{k}{import} \PY{n}{train\PYZus{}test\PYZus{}split}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{feature\PYZus{}selection} \PY{k}{import} \PY{n}{RFE}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{linear\PYZus{}model} \PY{k}{import} \PY{n}{LinearRegression}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{metrics} \PY{k}{import} \PY{n}{mean\PYZus{}squared\PYZus{}error}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{preprocessing} \PY{k}{import} \PY{n}{MinMaxScaler}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{preprocessing} \PY{k}{import} \PY{n}{RobustScaler}
        \PY{k+kn}{import} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{metrics} \PY{k}{as} \PY{n+nn}{metrics}
        
        
        \PY{k+kn}{import} \PY{n+nn}{sqlalchemy}
        \PY{k+kn}{from} \PY{n+nn}{sqlalchemy} \PY{k}{import} \PY{n}{create\PYZus{}engine}
        \PY{k+kn}{from} \PY{n+nn}{sqlalchemy}\PY{n+nn}{.}\PY{n+nn}{orm} \PY{k}{import} \PY{n}{Session}\PY{p}{,} \PY{n}{sessionmaker}
        \PY{k+kn}{from} \PY{n+nn}{sqlalchemy} \PY{k}{import} \PY{n}{inspect}
\end{Verbatim}


    \hypertarget{defining-functions}{%
\subsection{Defining Functions}\label{defining-functions}}

    \hypertarget{def-check_column}{%
\subsubsection{def check\_column}\label{def-check_column}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}4}]:} \PY{c+c1}{\PYZsh{} Check columns returns the datatype, null values and unique values of input series }
        \PY{k}{def} \PY{n+nf}{check\PYZus{}column}\PY{p}{(}\PY{n}{series}\PY{p}{,}\PY{n}{nlargest}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{all}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
            \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Column: df[}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+si}{\PYZob{}series.name\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{]}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
            \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dtype: }\PY{l+s+si}{\PYZob{}series.dtype\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
            \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{isna: }\PY{l+s+s2}{\PYZob{}}\PY{l+s+s2}{series.isna().sum()\PYZcb{} out of }\PY{l+s+s2}{\PYZob{}}\PY{l+s+s2}{len(series)\PYZcb{} \PYZhy{} }\PY{l+s+s2}{\PYZob{}}\PY{l+s+s2}{round(series.isna().sum()/len(series)*100,3)\PYZcb{}}\PY{l+s+s2}{\PYZpc{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
                
            \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{Unique non\PYZhy{}na values:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{c+c1}{\PYZsh{},df[\PYZsq{}waterfront\PYZsq{}].unique())}
            \PY{k}{if} \PY{n}{nlargest} \PY{o}{==}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{all}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
                \PY{n+nb}{print}\PY{p}{(}\PY{n}{series}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}\PY{p}{)}
            \PY{k}{else}\PY{p}{:}
                \PY{n+nb}{print}\PY{p}{(}\PY{n}{series}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{nlargest}\PY{p}{(}\PY{n}{nlargest}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \hypertarget{def-detect_outliers}{%
\subsubsection{def detect\_outliers}\label{def-detect_outliers}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}5}]:} \PY{c+c1}{\PYZsh{} Tukey\PYZsq{}s method using IQR to eliminate }
        \PY{k}{def} \PY{n+nf}{detect\PYZus{}outliers}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{n}\PY{p}{,} \PY{n}{features}\PY{p}{)}\PY{p}{:}
            \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Uses Tukey\PYZsq{}s method to return outer of interquartile ranges to return indices if outliers in a dataframe.}
        \PY{l+s+sd}{    Parameters:}
        \PY{l+s+sd}{    df (DataFrame): DataFrane containing columns of features}
        \PY{l+s+sd}{    n: default is 0, multiple outlier cutoff  }
        \PY{l+s+sd}{    }
        \PY{l+s+sd}{    Returns:}
        \PY{l+s+sd}{    Index of outliers for .loc}
        \PY{l+s+sd}{    }
        \PY{l+s+sd}{    Examples:}
        \PY{l+s+sd}{    Outliers\PYZus{}to\PYZus{}drop = detect\PYZus{}outliers(data,2,[\PYZdq{}col1\PYZdq{},\PYZdq{}col2\PYZdq{}]) Returning value}
        \PY{l+s+sd}{    df.loc[Outliers\PYZus{}to\PYZus{}drop] \PYZsh{} Show the outliers rows}
        \PY{l+s+sd}{    data= data.drop(Outliers\PYZus{}to\PYZus{}drop, axis = 0).reset\PYZus{}index(drop=True)}
        \PY{l+s+sd}{   \PYZdq{}\PYZdq{}\PYZdq{}}
        
        \PY{c+c1}{\PYZsh{} Drop outliers    }
        
            \PY{n}{outlier\PYZus{}indices} \PY{o}{=} \PY{p}{[}\PY{p}{]}
            \PY{c+c1}{\PYZsh{} iterate over features(columns)}
            \PY{k}{for} \PY{n}{col} \PY{o+ow}{in} \PY{n}{features}\PY{p}{:}
                
                \PY{c+c1}{\PYZsh{} 1st quartile (25\PYZpc{})}
                \PY{n}{Q1} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{percentile}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{n}{col}\PY{p}{]}\PY{p}{,} \PY{l+m+mi}{25}\PY{p}{)}
                \PY{c+c1}{\PYZsh{} 3rd quartile (75\PYZpc{})}
                \PY{n}{Q3} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{percentile}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{n}{col}\PY{p}{]}\PY{p}{,}\PY{l+m+mi}{75}\PY{p}{)}
                
                \PY{c+c1}{\PYZsh{} Interquartile range (IQR)}
                \PY{n}{IQR} \PY{o}{=} \PY{n}{Q3} \PY{o}{\PYZhy{}} \PY{n}{Q1}
                \PY{c+c1}{\PYZsh{} outlier step}
                \PY{n}{outlier\PYZus{}step} \PY{o}{=} \PY{l+m+mf}{1.5} \PY{o}{*} \PY{n}{IQR}
                
                \PY{c+c1}{\PYZsh{} Determine a list of indices of outliers for feature col}
                \PY{n}{outlier\PYZus{}list\PYZus{}col} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{n}{col}\PY{p}{]} \PY{o}{\PYZlt{}} \PY{n}{Q1} \PY{o}{\PYZhy{}} \PY{n}{outlier\PYZus{}step}\PY{p}{)} \PY{o}{|} \PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{n}{col}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{n}{Q3} \PY{o}{+} \PY{n}{outlier\PYZus{}step} \PY{p}{)}\PY{p}{]}\PY{o}{.}\PY{n}{index}
                
                \PY{c+c1}{\PYZsh{} append the found outlier indices for col to the list of outlier indices }
                \PY{n}{outlier\PYZus{}indices}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{outlier\PYZus{}list\PYZus{}col}\PY{p}{)}
                
                \PY{c+c1}{\PYZsh{} select observations containing more than 2 outliers}
                \PY{n}{outlier\PYZus{}indices} \PY{o}{=} \PY{n}{Counter}\PY{p}{(}\PY{n}{outlier\PYZus{}indices}\PY{p}{)}        
                \PY{n}{multiple\PYZus{}outliers} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(} \PY{n}{k} \PY{k}{for} \PY{n}{k}\PY{p}{,} \PY{n}{v} \PY{o+ow}{in} \PY{n}{outlier\PYZus{}indices}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)} \PY{k}{if} \PY{n}{v} \PY{o}{\PYZgt{}} \PY{n}{n} \PY{p}{)}
            \PY{k}{return} \PY{n}{multiple\PYZus{}outliers} 
\end{Verbatim}


    \hypertarget{def-plot_hist_scat_sns}{%
\subsubsection{def plot\_hist\_scat\_sns}\label{def-plot_hist_scat_sns}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} \PY{c+c1}{\PYZsh{} Plots histogram and scatter (vs price) side by side}
        \PY{k}{def} \PY{n+nf}{plot\PYZus{}hist\PYZus{}scat\PYZus{}sns}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{target}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
            \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Plots seaborne distplots and regplots for columns im datamframe vs target.}
        
        \PY{l+s+sd}{    Parameters:}
        \PY{l+s+sd}{    df (DataFrame): DataFrame.describe() columns will be used. }
        \PY{l+s+sd}{    target = name of column containing target variable.assume first coluumn. }
        \PY{l+s+sd}{    }
        \PY{l+s+sd}{    Returns:}
        \PY{l+s+sd}{    Figures for each column vs target with 2 subplots.}
        \PY{l+s+sd}{   \PYZdq{}\PYZdq{}\PYZdq{}}
            \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{ticker} \PY{k}{as} \PY{n+nn}{mtick}
            \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
            \PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}
            
            \PY{k}{with} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{context}\PY{p}{(}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dark\PYZus{}background}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                \PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{}  DEFINE AESTHETIC CUSTOMIZATIONS  \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZsh{}\PYZsh{}}
        
        
        \PY{c+c1}{\PYZsh{}         plt.style.use(\PYZsq{}dark\PYZus{}background\PYZsq{})}
                \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{9}\PY{p}{,}\PY{l+m+mi}{7}\PY{p}{)}
        
                \PY{c+c1}{\PYZsh{} Axis Label fonts}
                \PY{n}{fontTitle} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{14}\PY{p}{,}
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontweight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontfamily}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{serif}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
        
                \PY{n}{fontAxis} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{12}\PY{p}{,}
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontweight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontfamily}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{serif}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
        
                \PY{n}{fontTicks} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{8}\PY{p}{,}
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontweight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontfamily}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{serif}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
        
                \PY{c+c1}{\PYZsh{} Formatting dollar sign labels}
                \PY{n}{fmtPrice} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdl{}}\PY{l+s+si}{\PYZob{}x:,.0f\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}
                \PY{n}{tickPrice} \PY{o}{=} \PY{n}{mtick}\PY{o}{.}\PY{n}{StrMethodFormatter}\PY{p}{(}\PY{n}{fmtPrice}\PY{p}{)}
        
        
                \PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{}  PLOTTING \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} \PYZsh{}\PYZsh{}}
        
                \PY{c+c1}{\PYZsh{} Loop through dataframe to plot}
                \PY{k}{for} \PY{n}{column} \PY{o+ow}{in} \PY{n}{df}\PY{o}{.}\PY{n}{describe}\PY{p}{(}\PY{p}{)}\PY{p}{:}
        \PY{c+c1}{\PYZsh{}             print(f\PYZsq{}\PYZbs{}nCurrent column: \PYZob{}column\PYZcb{}\PYZsq{})}
        
                    \PY{c+c1}{\PYZsh{} Create figure with subplots for current column}
                    \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{n}{figsize}\PY{p}{,} \PY{n}{ncols}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{nrows}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}
        
                    \PY{c+c1}{\PYZsh{}\PYZsh{}  SUBPLOT 1 \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZsh{}\PYZsh{}}
                    \PY{n}{i}\PY{p}{,}\PY{n}{j} \PY{o}{=} \PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{0}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{n}{column}\PY{o}{.}\PY{n}{capitalize}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontTitle}\PY{p}{)}
        
                    \PY{c+c1}{\PYZsh{} Define graphing keyword dictionaries for distplot (Subplot 1)}
                    \PY{n}{hist\PYZus{}kws} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{linewidth}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{alpha}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{color}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{blue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{edgecolor}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
                    \PY{n}{kde\PYZus{}kws} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{color}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{white}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{linewidth}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{label}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{KDE}\PY{l+s+s2}{\PYZdq{}}\PY{p}{\PYZcb{}}
        
                    \PY{c+c1}{\PYZsh{} Plot distplot on ax[i,j] using hist\PYZus{}kws and kde\PYZus{}kws}
                    \PY{n}{sns}\PY{o}{.}\PY{n}{distplot}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{n}{column}\PY{p}{]}\PY{p}{,} \PY{n}{norm\PYZus{}hist}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{kde}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}
                                 \PY{n}{hist\PYZus{}kws} \PY{o}{=} \PY{n}{hist\PYZus{}kws}\PY{p}{,} \PY{n}{kde\PYZus{}kws} \PY{o}{=} \PY{n}{kde\PYZus{}kws}\PY{p}{,}
                                 \PY{n}{label}\PY{o}{=}\PY{n}{column}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ histogram}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{p}{)}
        
        
                    \PY{c+c1}{\PYZsh{} Set x axis label}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{n}{column}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
        
                    \PY{c+c1}{\PYZsh{} Get x\PYZhy{}ticks, rotate labels, and return}
                    \PY{n}{xticklab1} \PY{o}{=} \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{get\PYZus{}xticklabels}\PY{p}{(}\PY{n}{which} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{both}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xticklabels}\PY{p}{(}\PY{n}{labels}\PY{o}{=}\PY{n}{xticklab1}\PY{p}{,} \PY{n}{fontdict}\PY{o}{=}\PY{n}{fontTicks}\PY{p}{,} \PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{xaxis}\PY{o}{.}\PY{n}{set\PYZus{}major\PYZus{}formatter}\PY{p}{(}\PY{n}{mtick}\PY{o}{.}\PY{n}{ScalarFormatter}\PY{p}{(}\PY{p}{)}\PY{p}{)}
        
        
                    \PY{c+c1}{\PYZsh{} Set y\PYZhy{}label }
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Density}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
                    \PY{n}{yticklab1}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{get\PYZus{}yticklabels}\PY{p}{(}\PY{n}{which}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{both}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}yticklabels}\PY{p}{(}\PY{n}{labels}\PY{o}{=}\PY{n}{yticklab1}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontTicks}\PY{p}{)}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{yaxis}\PY{o}{.}\PY{n}{set\PYZus{}major\PYZus{}formatter}\PY{p}{(}\PY{n}{mtick}\PY{o}{.}\PY{n}{ScalarFormatter}\PY{p}{(}\PY{p}{)}\PY{p}{)}
        
        
                    \PY{c+c1}{\PYZsh{} Set y\PYZhy{}grid}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}axisbelow}\PY{p}{(}\PY{k+kc}{True}\PY{p}{)}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{ls}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        
        
        
        
                    \PY{c+c1}{\PYZsh{}\PYZsh{}  SUBPLOT 2\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} \PYZsh{}\PYZsh{}}
                    \PY{n}{i}\PY{p}{,}\PY{n}{j} \PY{o}{=} \PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{1}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{n}{column}\PY{o}{.}\PY{n}{capitalize}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontTitle}\PY{p}{)}
        
                    \PY{c+c1}{\PYZsh{} Define the kwd dictionaries for scatter and regression line (subplot 2)}
                    \PY{n}{line\PYZus{}kws}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{color}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{white}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{alpha}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}\PY{l+m+mf}{0.5}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{lw}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}\PY{l+m+mi}{4}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ls}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{\PYZcb{}}
                    \PY{n}{scatter\PYZus{}kws}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{s}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{2}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{alpha}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mf}{0.5}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{marker}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{color}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{blue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
        
                    \PY{c+c1}{\PYZsh{} Plot regplot on ax[i,j] using line\PYZus{}kws and scatter\PYZus{}kws}
                    \PY{n}{sns}\PY{o}{.}\PY{n}{regplot}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{n}{column}\PY{p}{]}\PY{p}{,} \PY{n}{df}\PY{p}{[}\PY{n}{target}\PY{p}{]}\PY{p}{,} 
                                \PY{n}{line\PYZus{}kws} \PY{o}{=} \PY{n}{line\PYZus{}kws}\PY{p}{,}
                                \PY{n}{scatter\PYZus{}kws} \PY{o}{=} \PY{n}{scatter\PYZus{}kws}\PY{p}{,}
                                \PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{p}{)}
        
                    \PY{c+c1}{\PYZsh{} Set x\PYZhy{}axis label}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{n}{column}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
        
                     \PY{c+c1}{\PYZsh{} Get x ticks, rotate labels, and return}
                    \PY{n}{xticklab2}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{get\PYZus{}xticklabels}\PY{p}{(}\PY{n}{which}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{both}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xticklabels}\PY{p}{(}\PY{n}{labels}\PY{o}{=}\PY{n}{xticklab2}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontTicks}\PY{p}{,} \PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{xaxis}\PY{o}{.}\PY{n}{set\PYZus{}major\PYZus{}formatter}\PY{p}{(}\PY{n}{mtick}\PY{o}{.}\PY{n}{ScalarFormatter}\PY{p}{(}\PY{p}{)}\PY{p}{)}
        
                    \PY{c+c1}{\PYZsh{} Set  y\PYZhy{}axis label}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{n}{target}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
        
                    \PY{c+c1}{\PYZsh{} Get, set, and format y\PYZhy{}axis Price labels}
                    \PY{n}{yticklab} \PY{o}{=} \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{get\PYZus{}yticklabels}\PY{p}{(}\PY{p}{)}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}yticklabels}\PY{p}{(}\PY{n}{yticklab}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontTicks}\PY{p}{)}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{yaxis}\PY{o}{.}\PY{n}{set\PYZus{}major\PYZus{}formatter}\PY{p}{(}\PY{n}{mtick}\PY{o}{.}\PY{n}{ScalarFormatter}\PY{p}{(}\PY{p}{)}\PY{p}{)}
        
            \PY{c+c1}{\PYZsh{}         ax[i,j].get\PYZus{}yaxis().set\PYZus{}major\PYZus{}formatter(tickPrice) }
        
                    \PY{c+c1}{\PYZsh{} Set y\PYZhy{}grid}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}axisbelow}\PY{p}{(}\PY{k+kc}{True}\PY{p}{)}
                    \PY{n}{ax}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]}\PY{o}{.}\PY{n}{grid}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{ls}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}       
        
                    \PY{c+c1}{\PYZsh{}\PYZsh{} \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Final layout adjustments \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} \PYZsh{}\PYZsh{}}
                    \PY{c+c1}{\PYZsh{} Deleted unused subplots }
                    \PY{n}{fig}\PY{o}{.}\PY{n}{delaxes}\PY{p}{(}\PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
                    \PY{n}{fig}\PY{o}{.}\PY{n}{delaxes}\PY{p}{(}\PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
        
                    \PY{c+c1}{\PYZsh{} Optimizing spatial layout}
                    \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
                    \PY{n}{figtitle}\PY{o}{=}\PY{n}{column}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}dist\PYZus{}regr\PYZus{}plots.png}\PY{l+s+s1}{\PYZsq{}}
        \PY{c+c1}{\PYZsh{}             plt.savefig(figtitle)}
            \PY{k}{return} 
\end{Verbatim}


    \hypertarget{def-plot_wide_kde_mean_sem_bar}{%
\subsubsection{def
plot\_wide\_kde\_mean\_sem\_bar()}\label{def-plot_wide_kde_mean_sem_bar}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}7}]:} \PY{k}{def} \PY{n+nf}{plot\PYZus{}wide\PYZus{}kde\PYZus{}thin\PYZus{}bar}\PY{p}{(}\PY{n}{series1}\PY{p}{,}\PY{n}{sname1}\PY{p}{,} \PY{n}{series2}\PY{p}{,} \PY{n}{sname2}\PY{p}{,}\PY{o}{*}\PY{o}{*}\PY{n}{kwargs}\PY{p}{)}\PY{p}{:}
            \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Plot series1 and series 2 on wide kde plot with small mean+sem bar plot.}
        \PY{l+s+sd}{    **kwargs include:}
        \PY{l+s+sd}{        title\PYZus{}var \PYZhy{}\PYZhy{} the variable that will appear in the title of both graphs. }
        \PY{l+s+sd}{    \PYZsq{}\PYZsq{}\PYZsq{}}
            
            \PY{c+c1}{\PYZsh{}\PYZsh{} ADDING add\PYZus{}gridspec usage}
            \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
            \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
            \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{sem}
        
            \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
            \PY{k+kn}{import} \PY{n+nn}{matplotlib} \PY{k}{as} \PY{n+nn}{mpl}
            \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{ticker} \PY{k}{as} \PY{n+nn}{ticker}
            \PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
        
            \PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}
        
            \PY{k+kn}{from} \PY{n+nn}{matplotlib} \PY{k}{import} \PY{n}{rcParams}
            \PY{k+kn}{from} \PY{n+nn}{matplotlib} \PY{k}{import} \PY{n}{rc}
        \PY{c+c1}{\PYZsh{}     mpl.rcdefaults()}
        \PY{c+c1}{\PYZsh{}     rcParams[\PYZsq{}font.family\PYZsq{}] = \PYZsq{}serif\PYZsq{}}
        \PY{c+c1}{\PYZsh{}     rcParams[\PYZsq{}hatch.color\PYZsq{}] = \PYZsq{}gray\PYZsq{}}
        \PY{c+c1}{\PYZsh{}     plt.rcParams[\PYZdq{}axes.edgecolor\PYZdq{}] = \PYZdq{}black\PYZdq{}}
            \PY{n}{mpl}\PY{o}{.}\PY{n}{rcParams}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hatch.linewidth}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mf}{0.5}
            
            \PY{n}{title}\PY{o}{=}\PY{n}{series1}\PY{o}{.}\PY{n}{name}
            \PY{k}{for} \PY{n}{k}\PY{p}{,}\PY{n}{v} \PY{o+ow}{in} \PY{n}{kwargs}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                \PY{k}{if} \PY{n}{k}\PY{o}{.}\PY{n}{lower}\PY{p}{(}\PY{p}{)} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{title\PYZus{}var}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
                    \PY{n}{title} \PY{o}{=} \PY{n}{v}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{p}{)}
        
            \PY{c+c1}{\PYZsh{} Plot distributions of discounted vs full price groups}
        \PY{c+c1}{\PYZsh{}     plt.style.use(\PYZsq{}default\PYZsq{})}
            \PY{c+c1}{\PYZsh{} with plt.style.context((\PYZsq{}tableau\PYZhy{}colorblind10\PYZsq{})):}
            \PY{k}{with} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{context}\PY{p}{(}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dark\PYZus{}background}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{p}{:}
        
                
        
                \PY{c+c1}{\PYZsh{}\PYZsh{} \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} DEFINE AESTHETIC CUSTOMIZATIONS \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} \PYZsh{}\PYZsh{}}
               \PY{c+c1}{\PYZsh{} Axis Label fonts}
                \PY{n}{fontSuptitle} \PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{16}\PY{p}{,}
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontweight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontfamily}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{serif}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
        
                \PY{n}{fontTitle} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{14}\PY{p}{,}
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontweight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontfamily}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{serif}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
        
                \PY{n}{fontAxis} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{12}\PY{p}{,}
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontweight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontfamily}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{serif}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
        
                \PY{n}{fontTicks} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{10}\PY{p}{,}
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontweight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} 
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontfamily}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{serif}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
        
        
                \PY{c+c1}{\PYZsh{}\PYZsh{} \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} CREATE FIG BASED ON GRIDSPEC \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} \PYZsh{}\PYZsh{}}
                
                \PY{n}{plt}\PY{o}{.}\PY{n}{suptitle}\PY{p}{(}\PY{n}{title}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ of Units Sold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontdict} \PY{o}{=} \PY{n}{fontSuptitle}\PY{p}{)}
        
                \PY{c+c1}{\PYZsh{} Create fig object and declare figsize}
                \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{constrained\PYZus{}layout}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
                
                
                \PY{c+c1}{\PYZsh{} Define gridspec to create grid coordinates             }
                \PY{n}{gs} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}gridspec}\PY{p}{(}\PY{n}{nrows}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{ncols}\PY{o}{=}\PY{l+m+mi}{9}\PY{p}{)}
        
                \PY{c+c1}{\PYZsh{} Assign grid space to ax with add\PYZus{}subplot}
                \PY{n}{ax0} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}subplot}\PY{p}{(}\PY{n}{gs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{:}\PY{l+m+mi}{7}\PY{p}{]}\PY{p}{)}
                \PY{n}{ax1} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}subplot}\PY{p}{(}\PY{n}{gs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{7}\PY{p}{:}\PY{l+m+mi}{9}\PY{p}{]}\PY{p}{)}
                
                \PY{c+c1}{\PYZsh{}Combine into 1 list}
                \PY{n}{ax} \PY{o}{=} \PY{p}{[}\PY{n}{ax0}\PY{p}{,}\PY{n}{ax1}\PY{p}{]}
                
                \PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{} \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}  SUBPLOT 1  \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} \PYZsh{}\PYZsh{}\PYZsh{}}
        
                \PY{c+c1}{\PYZsh{}\PYZsh{} \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} Defining series1 and 2 for subplot 1\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} \PYZsh{}\PYZsh{}}
                \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Distribution of }\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n}{title}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontTitle}\PY{p}{)}
        
                \PY{c+c1}{\PYZsh{} Group 1: data, label, hist\PYZus{}kws and kde\PYZus{}kws}
                \PY{n}{plotS1} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{data}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{series1}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{label}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{sname1}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{p}{)}\PY{p}{,}
        
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hist\PYZus{}kws}\PY{l+s+s1}{\PYZsq{}} \PY{p}{:}
                            \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{edgecolor}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{white}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{color}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{darkgray}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{alpha}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lw}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{1}\PY{p}{\PYZcb{}}\PY{p}{,}
                            \PY{c+c1}{\PYZsh{}\PYZsq{}hatch\PYZsq{}:\PYZsq{}//\PYZsq{}\PYZcb{},}
        
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kde\PYZus{}kws}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
                            \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{color}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{white}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{linestyle}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{linewidth}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{2}\PY{p}{,}
                             \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{label}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kde}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{\PYZcb{}}
        
                \PY{c+c1}{\PYZsh{} Group 2: data, label, hist\PYZus{}kws and kde\PYZus{}kws}
                \PY{n}{plotS2} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{data}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{series2}\PY{p}{,}
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{label}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{sname2}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{p}{)}\PY{p}{,} 
        
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hist\PYZus{}kws}\PY{l+s+s1}{\PYZsq{}} \PY{p}{:}
                            \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{edgecolor}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{white}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{color}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lightgreen}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{alpha}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mf}{0.8} \PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lw}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hatch}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{//}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{,}
        
        
                            \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kde\PYZus{}kws}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
                            \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{color}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{darkgreen}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{linestyle}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{linewidth}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{label}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kde}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{\PYZcb{}}
                
                \PY{c+c1}{\PYZsh{} plot group 1}
                \PY{n}{sns}\PY{o}{.}\PY{n}{distplot}\PY{p}{(}\PY{n}{plotS1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{data}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{n}{plotS1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{label}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
                           
                             \PY{n}{hist\PYZus{}kws} \PY{o}{=} \PY{n}{plotS1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hist\PYZus{}kws}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{kde\PYZus{}kws} \PY{o}{=} \PY{n}{plotS1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kde\PYZus{}kws}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
                             
                             \PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}   
              
        
                \PY{c+c1}{\PYZsh{} plot group 2}
                \PY{n}{sns}\PY{o}{.}\PY{n}{distplot}\PY{p}{(}\PY{n}{plotS2}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{data}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{n}{plotS2}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{label}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
                             
                             \PY{n}{hist\PYZus{}kws}\PY{o}{=}\PY{n}{plotS2}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hist\PYZus{}kws}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{kde\PYZus{}kws} \PY{o}{=} \PY{n}{plotS2}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kde\PYZus{}kws}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
                             
                             \PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
        
                \PY{c+c1}{\PYZsh{} X label}
                \PY{n}{xlabel} \PY{o}{=} \PY{n}{series1}\PY{o}{.}\PY{n}{name}
                \PY{n}{xl} \PY{o}{=} \PY{n}{xlabel}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{p}{)}
                \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{n}{xl}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
                \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Kernel Density Estimation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
                \PY{c+c1}{\PYZsh{} ticks/legend}
                \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{both}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{labelsize}\PY{o}{=}\PY{n}{fontTicks}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}   
                \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
        
                
        \PY{c+c1}{\PYZsh{}         \PYZsh{} annotating lines with means}
        \PY{c+c1}{\PYZsh{}         meanS1 = np.mean(plotS1[\PYZsq{}data\PYZsq{}])}
        \PY{c+c1}{\PYZsh{}         meanS2 = np.mean(plotS2[\PYZsq{}data\PYZsq{}])}
                
        \PY{c+c1}{\PYZsh{}         ax[0].axvline(meanS1, linestyle=\PYZsq{}\PYZhy{}\PYZhy{}\PYZsq{},label=sname1)}
        \PY{c+c1}{\PYZsh{}         ax[0].text(meanS1,0,f\PYZsq{}Mean:\PYZob{}meanS1:.2f\PYZcb{}\PYZsq{},rotation=90)}
            
        \PY{c+c1}{\PYZsh{}         ax[0].axvline(meanS2,color=\PYZsq{}k\PYZsq{},linestyle=\PYZsq{}\PYZhy{}\PYZhy{}\PYZsq{},label=sname2)}
        \PY{c+c1}{\PYZsh{}         ax[0].text(meanS2,0,f\PYZsq{}Mean:\PYZob{}meanS2:.2f\PYZcb{}\PYZsq{},rotation=90)}
                
                
                \PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{} \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}  SUBPLOT 2  \PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{} \PYZsh{}\PYZsh{}\PYZsh{}}
                
                \PY{c+c1}{\PYZsh{} Import scipy for error bars}
                \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{sem}
            
                \PY{c+c1}{\PYZsh{} Declare x y group labels(x) and bar heights(y)}
                \PY{n}{x} \PY{o}{=} \PY{p}{[}\PY{n}{plotS1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{label}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{plotS2}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{label}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
                \PY{n}{y} \PY{o}{=} \PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{plotS1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{data}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{plotS2}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{data}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{]}
            
                \PY{n}{yerr} \PY{o}{=} \PY{p}{[}\PY{n}{sem}\PY{p}{(}\PY{n}{plotS1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{data}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{n}{sem}\PY{p}{(}\PY{n}{plotS2}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{data}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{]}
                \PY{n}{err\PYZus{}kws} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ecolor}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{white}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{capsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{4}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{capthick}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{elinewidth}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{2}\PY{p}{\PYZcb{}}
        
                \PY{c+c1}{\PYZsh{} Create the bar plot}
                \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,} \PY{n}{align}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{edge}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{white}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linewidth}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{color} \PY{o}{=}\PY{p}{[}\PY{n}{plotS1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hist\PYZus{}kws}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{color}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{n}{plotS2}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{hist\PYZus{}kws}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{color}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{,}
                          \PY{n}{yerr}\PY{o}{=}\PY{n}{yerr}\PY{p}{,}\PY{n}{error\PYZus{}kw}\PY{o}{=}\PY{n}{err\PYZus{}kws}\PY{p}{,} \PY{n}{width}\PY{o}{=}\PY{l+m+mf}{0.6}\PY{p}{,}\PY{p}{)}
        
                
                \PY{c+c1}{\PYZsh{} Customize subplot 2}
                \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Average }\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n}{title}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontTitle}\PY{p}{)}
                \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mean +/\PYZhy{} SEM }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
                \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                
                \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{n}{y}\PY{p}{,}\PY{n}{labelsize}\PY{o}{=}\PY{n}{fontTicks}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                \PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{n}{x}\PY{p}{,}\PY{n}{labelsize}\PY{o}{=}\PY{n}{fontTicks}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)} 
        
                \PY{n}{ax1}\PY{o}{=}\PY{n}{ax}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}
                \PY{n}{test} \PY{o}{=} \PY{n}{ax1}\PY{o}{.}\PY{n}{get\PYZus{}xticklabels}\PY{p}{(}\PY{p}{)}
                \PY{n}{labels} \PY{o}{=} \PY{p}{[}\PY{n}{x}\PY{o}{.}\PY{n}{get\PYZus{}text}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{test}\PY{p}{]}
                \PY{n}{ax1}\PY{o}{.}\PY{n}{set\PYZus{}xticklabels}\PY{p}{(}\PY{p}{[}\PY{n}{plotS1}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{label}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{n}{plotS2}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{label}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{,} \PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{45}\PY{p}{,}\PY{n}{ha}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
                
                \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Mean of }\PY{l+s+si}{\PYZob{}plotS1[\PYZsq{}label\PYZsq{}]\PYZcb{}}\PY{l+s+s2}{: }\PY{l+s+s2}{\PYZob{}}\PY{l+s+s2}{np.mean(plotS1[}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{data}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{])\PYZcb{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{ Mean of }\PY{l+s+si}{\PYZob{}plotS2[\PYZsq{}label\PYZsq{}]\PYZcb{}}\PY{l+s+s2}{: }\PY{l+s+s2}{\PYZob{}}\PY{l+s+s2}{np.mean(plotS2[}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{data}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{])\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{}         plt.tight\PYZus{}layout()}
                \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
                \PY{k}{return} \PY{n}{fig}\PY{p}{,}\PY{n}{ax}
            
            
\end{Verbatim}


    \hypertarget{def-list2df}{%
\subsubsection{def list2df}\label{def-list2df}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}8}]:} \PY{k}{def} \PY{n+nf}{list2df}\PY{p}{(}\PY{n+nb}{list}\PY{p}{)}\PY{p}{:}\PY{c+c1}{\PYZsh{}, sort\PYZus{}values=\PYZsq{}index\PYZsq{}):}
            \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{} Take in a list where row[0] = column\PYZus{}names and outputs a dataframe.}
        \PY{l+s+sd}{    }
        \PY{l+s+sd}{    Keyword arguments:}
        \PY{l+s+sd}{    set\PYZus{}index \PYZhy{}\PYZhy{} df.set\PYZus{}index(set\PYZus{}index)}
        \PY{l+s+sd}{    sortby \PYZhy{}\PYZhy{} df.sorted()}
        \PY{l+s+sd}{    \PYZdq{}\PYZdq{}\PYZdq{}}    
            
            \PY{n}{df\PYZus{}list} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n+nb}{list}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{:}\PY{p}{]}\PY{p}{,}\PY{n}{columns}\PY{o}{=}\PY{n+nb}{list}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
        \PY{c+c1}{\PYZsh{}     df\PYZus{}list = df\PYZus{}list[1:]}
        
            \PY{k}{return} \PY{n}{df\PYZus{}list}
\end{Verbatim}


    \hypertarget{def-get_col_info}{%
\subsubsection{def get\_col\_info}\label{def-get_col_info}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}9}]:} \PY{k}{def}  \PY{n+nf}{get\PYZus{}col\PYZus{}info}\PY{p}{(}\PY{n}{col\PYZus{}name}\PY{p}{)}\PY{p}{:}
            \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Gets the column names and data types from the alchamey inspector object.}
        \PY{l+s+sd}{    Returns column\PYZus{}info dataframe of table details.}
        \PY{l+s+sd}{    \PYZdq{}\PYZdq{}\PYZdq{}}
            \PY{n}{col\PYZus{}list} \PY{o}{=} \PY{n}{inspector}\PY{o}{.}\PY{n}{get\PYZus{}columns}\PY{p}{(}\PY{n}{col\PYZus{}name}\PY{p}{)}
            
            \PY{n}{column\PYZus{}info} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{column}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dtype}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
            \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Table Name: }\PY{l+s+si}{\PYZob{}col\PYZus{}name\PYZcb{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        
            \PY{k}{for} \PY{n}{col} \PY{o+ow}{in} \PY{n}{col\PYZus{}list}\PY{p}{:}
                \PY{n}{column\PYZus{}info}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n+nb}{str}\PY{p}{(}\PY{n}{col\PYZus{}name}\PY{p}{)}\PY{p}{,}\PY{n}{col}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{col}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
                
            \PY{n}{df} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{column\PYZus{}info}\PY{p}{)}
            \PY{k}{return} \PY{n}{column\PYZus{}info}
\end{Verbatim}


    \hypertarget{def-describe_outliers}{%
\subsubsection{def describe\_outliers}\label{def-describe_outliers}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}10}]:} \PY{c+c1}{\PYZsh{} describe\PYZus{}outliers \PYZhy{}\PYZhy{} calls detect\PYZus{}outliers}
         \PY{k}{def} \PY{n+nf}{describe\PYZus{}outliers}\PY{p}{(}\PY{n}{df}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{} Returns a new\PYZus{}df of outliers, and \PYZpc{} outliers each col using detect\PYZus{}outliers.}
         \PY{l+s+sd}{    \PYZdq{}\PYZdq{}\PYZdq{}}
             \PY{n}{out\PYZus{}count} \PY{o}{=} \PY{l+m+mi}{0}
             \PY{n}{new\PYZus{}df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{total\PYZus{}outliers}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{percent\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
             \PY{k}{for} \PY{n}{col} \PY{o+ow}{in} \PY{n}{df}\PY{o}{.}\PY{n}{columns}\PY{p}{:}
                 \PY{n}{outies} \PY{o}{=} \PY{n}{detect\PYZus{}outliers}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{n}{col}\PY{p}{]}\PY{p}{)}
                 \PY{n}{out\PYZus{}count} \PY{o}{+}\PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{outies}\PY{p}{)} 
                 \PY{n}{new\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{col}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{n+nb}{len}\PY{p}{(}\PY{n}{outies}\PY{p}{)}\PY{p}{,} \PY{n+nb}{round}\PY{p}{(}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{outies}\PY{p}{)}\PY{o}{/}\PY{n+nb}{len}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{index}\PY{p}{)}\PY{p}{)}\PY{o}{*}\PY{l+m+mi}{100}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{]}
             \PY{n}{new\PYZus{}df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{grand\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{n+nb}{sum}\PY{p}{(}\PY{n}{new\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{total\PYZus{}outliers}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{new\PYZus{}df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{percent\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{]}
             \PY{k}{return} \PY{n}{new\PYZus{}df}
\end{Verbatim}


    \hypertarget{def-get_full_table_info}{%
\subsubsection{def
get\_full\_table\_info}\label{def-get_full_table_info}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}11}]:} \PY{k}{def}  \PY{n+nf}{get\PYZus{}full\PYZus{}table\PYZus{}info}\PY{p}{(}\PY{n}{engine}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Gets the table names, their column namesand data types engine.}
         \PY{l+s+sd}{    Returns column\PYZus{}info dataframe of table details.}
         \PY{l+s+sd}{    \PYZdq{}\PYZdq{}\PYZdq{}}
             \PY{n}{column\PYZus{}info} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{column}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dtype}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
             
             \PY{n}{list\PYZus{}tables}\PY{o}{=} \PY{n}{engine}\PY{o}{.}\PY{n}{table\PYZus{}names}\PY{p}{(}\PY{p}{)}
             
             \PY{k}{for} \PY{n}{table} \PY{o+ow}{in} \PY{n}{list\PYZus{}tables}\PY{p}{:}
                 
                 \PY{n}{col\PYZus{}list} \PY{o}{=} \PY{n}{inspector}\PY{o}{.}\PY{n}{get\PYZus{}columns}\PY{p}{(}\PY{n}{table}\PY{p}{)}
                 
                 \PY{k}{for} \PY{n}{col} \PY{o+ow}{in} \PY{n}{col\PYZus{}list}\PY{p}{:}
                     
                     \PY{n}{column\PYZus{}info}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n+nb}{str}\PY{p}{(}\PY{n}{table}\PY{p}{)}\PY{p}{,}\PY{n}{col}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{col}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{n}{col}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
                     \PY{n}{inspector}\PY{o}{.}\PY{n}{get\PYZus{}foreign\PYZus{}keys}\PY{p}{(}\PY{p}{)}
             
             \PY{n}{df} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{column\PYZus{}info}\PY{p}{)}
             \PY{k}{return} \PY{n}{df}
\end{Verbatim}


    \hypertarget{def-cohens-d}{%
\subsubsection{def Cohen's d}\label{def-cohens-d}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}12}]:} \PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{} Cohen\PYZsq{}s d}
         \PY{k}{def} \PY{n+nf}{Cohen\PYZus{}d}\PY{p}{(}\PY{n}{group1}\PY{p}{,} \PY{n}{group2}\PY{p}{)}\PY{p}{:}
             \PY{c+c1}{\PYZsh{} Compute Cohen\PYZsq{}s d.}
             \PY{c+c1}{\PYZsh{} group1: Series or NumPy array}
             \PY{c+c1}{\PYZsh{} group2: Series or NumPy array}
             \PY{c+c1}{\PYZsh{} returns a floating point number }
             \PY{n}{diff} \PY{o}{=} \PY{n}{group1}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{group2}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}
         
             \PY{n}{n1}\PY{p}{,} \PY{n}{n2} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{group1}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{group2}\PY{p}{)}
             \PY{n}{var1} \PY{o}{=} \PY{n}{group1}\PY{o}{.}\PY{n}{var}\PY{p}{(}\PY{p}{)}
             \PY{n}{var2} \PY{o}{=} \PY{n}{group2}\PY{o}{.}\PY{n}{var}\PY{p}{(}\PY{p}{)}
         
             \PY{c+c1}{\PYZsh{} Calculate the pooled threshold as shown earlier}
             \PY{n}{pooled\PYZus{}var} \PY{o}{=} \PY{p}{(}\PY{n}{n1} \PY{o}{*} \PY{n}{var1} \PY{o}{+} \PY{n}{n2} \PY{o}{*} \PY{n}{var2}\PY{p}{)} \PY{o}{/} \PY{p}{(}\PY{n}{n1} \PY{o}{+} \PY{n}{n2}\PY{p}{)}
             
             \PY{c+c1}{\PYZsh{} Calculate Cohen\PYZsq{}s d statistic}
             \PY{n}{d} \PY{o}{=} \PY{n}{diff} \PY{o}{/} \PY{n}{np}\PY{o}{.}\PY{n}{sqrt}\PY{p}{(}\PY{n}{pooled\PYZus{}var}\PY{p}{)}
             
             \PY{k}{return} \PY{n}{d}
         
         
         \PY{k}{def} \PY{n+nf}{plot\PYZus{}pdfs}\PY{p}{(}\PY{n}{cohen\PYZus{}d}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Plot PDFs for distributions that differ by some number of stds.}
         \PY{l+s+sd}{    }
         \PY{l+s+sd}{    cohen\PYZus{}d: number of standard deviations between the means}
         \PY{l+s+sd}{    \PYZdq{}\PYZdq{}\PYZdq{}}
             \PY{n}{group1} \PY{o}{=} \PY{n}{scipy}\PY{o}{.}\PY{n}{stats}\PY{o}{.}\PY{n}{norm}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}
             \PY{n}{group2} \PY{o}{=} \PY{n}{scipy}\PY{o}{.}\PY{n}{stats}\PY{o}{.}\PY{n}{norm}\PY{p}{(}\PY{n}{cohen\PYZus{}d}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}
             \PY{n}{xs}\PY{p}{,} \PY{n}{ys} \PY{o}{=} \PY{n}{evaluate\PYZus{}PDF}\PY{p}{(}\PY{n}{group1}\PY{p}{)}
             \PY{n}{pyplot}\PY{o}{.}\PY{n}{fill\PYZus{}between}\PY{p}{(}\PY{n}{xs}\PY{p}{,} \PY{n}{ys}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Group1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{}ff2289}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.7}\PY{p}{)}
         
             \PY{n}{xs}\PY{p}{,} \PY{n}{ys} \PY{o}{=} \PY{n}{evaluate\PYZus{}PDF}\PY{p}{(}\PY{n}{group2}\PY{p}{)}
             \PY{n}{pyplot}\PY{o}{.}\PY{n}{fill\PYZus{}between}\PY{p}{(}\PY{n}{xs}\PY{p}{,} \PY{n}{ys}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Group2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{}376cb0}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.7}\PY{p}{)}
             
             \PY{n}{o}\PY{p}{,} \PY{n}{s} \PY{o}{=} \PY{n}{overlap\PYZus{}superiority}\PY{p}{(}\PY{n}{group1}\PY{p}{,} \PY{n}{group2}\PY{p}{)}
             \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{overlap}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{o}\PY{p}{)}
             \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{superiority}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{s}\PY{p}{)}
            
\end{Verbatim}


    \hypertarget{def-calc_product_price-def-calc_order_total}{%
\subsubsection{def calc\_product\_price, def
calc\_order\_total}\label{def-calc_product_price-def-calc_order_total}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}13}]:} \PY{c+c1}{\PYZsh{} Source of df = pd.read\PYZus{}sql\PYZus{}query(\PYZdq{}SELECT * FROM OrderDetail\PYZdq{},  engine)}
         
         \PY{c+c1}{\PYZsh{} Define calc\PYZus{}product\PYZus{}review to add product price column}
         \PY{k}{def} \PY{n+nf}{calc\PYZus{}product\PYZus{}price}\PY{p}{(}\PY{n}{row}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Calculates the sub\PYZhy{}total for the product in the row. }
         \PY{l+s+sd}{    Classifies the product as OnSale or not. }
         \PY{l+s+sd}{    Sub\PYZhy{}total =  [UnitPrice*(1\PYZhy{}Discount)*Quantity}
         \PY{l+s+sd}{    }
         \PY{l+s+sd}{    Returns:}
         \PY{l+s+sd}{    New columns OnSale and price\PYZsq{}\PYZsq{}\PYZsq{}}
             
             \PY{n}{price} \PY{o}{=} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{UnitPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{*}\PY{p}{(}\PY{l+m+mi}{1}\PY{o}{\PYZhy{}}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{o}{*}\PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
             \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{price}
             \PY{k}{if} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{\PYZgt{}}\PY{l+m+mi}{0}\PY{p}{:}
                 \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
             \PY{k}{else}\PY{p}{:}
                 \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{0}
             \PY{k}{return} \PY{n}{row}    
         
         \PY{c+c1}{\PYZsh{} Use calc\PYZus{}order\PYZus{}total to fill in order\PYZus{}total column}
         \PY{k}{def} \PY{n+nf}{calc\PYZus{}order\PYZus{}total}\PY{p}{(}\PY{n}{row}\PY{p}{,}\PY{n}{df}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Takes in a specific row and the whole dataframe.}
         \PY{l+s+sd}{    Groupby OrderID. Classify as discounted\PYZus{}order if any}
         \PY{l+s+sd}{    item was on discount. }
         \PY{l+s+sd}{    Returns row with added \PYZsq{}discounted\PYZus{}order\PYZsq{} category and }
         \PY{l+s+sd}{    \PYZsq{}order\PYZus{}total\PYZsq{} \PYZsq{}\PYZsq{}\PYZsq{}}
             \PY{n}{order} \PY{o}{=} \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
             \PY{n}{df\PYZus{}temp} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{get\PYZus{}group}\PY{p}{(}\PY{n}{order}\PY{p}{)}
         
             
             \PY{k}{if} \PY{n+nb}{any}\PY{p}{(}\PY{n}{df\PYZus{}temp}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                 \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{discounted\PYZus{}order}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
             \PY{k}{else}\PY{p}{:}
                 \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{discounted\PYZus{}order}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{0}
             
             \PY{n}{order\PYZus{}total} \PY{o}{=} \PY{n}{df\PYZus{}temp}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}
             \PY{n}{row}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{order\PYZus{}total}
             
             \PY{k}{return} \PY{n}{row}
\end{Verbatim}


    \hypertarget{def-quant_transform}{%
\paragraph{def quant\_transform}\label{def-quant_transform}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}14}]:} \PY{c+c1}{\PYZsh{} TRANSFORM DATA BEFORE RE\PYZhy{}CALLING ORIGINAL normtest\PYZus{}results}
         \PY{k}{def} \PY{n+nf}{quant\PYZus{}transform}\PY{p}{(}\PY{n}{data\PYZus{}in}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Use sklearn.preprocessing.QuantileTransformer to remove outliers from dataset.}
         \PY{l+s+sd}{    }
         \PY{l+s+sd}{    Parameters:}
         \PY{l+s+sd}{        data\PYZus{}in (dict) \PYZhy{}\PYZhy{} dictionary with data series as values to be processed.}
         \PY{l+s+sd}{    Returns: }
         \PY{l+s+sd}{        data\PYZus{}tf (dict) \PYZhy{}\PYZhy{} dicionary of same keys from data\PYZus{}in, but transformed.}
         \PY{l+s+sd}{        \PYZsq{}\PYZsq{}\PYZsq{}}
             
             \PY{k+kn}{from} \PY{n+nn}{sklearn} \PY{k}{import} \PY{n}{preprocessing} \PY{k}{as} \PY{n}{prep} 
             \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{preprocessing} \PY{k}{import} \PY{n}{QuantileTransformer}
         
             \PY{n}{qt} \PY{o}{=}  \PY{n}{QuantileTransformer}\PY{p}{(}\PY{n}{n\PYZus{}quantiles}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,}\PY{n}{output\PYZus{}distribution}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{normal}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{data\PYZus{}tf} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
             \PY{k}{for} \PY{n}{k}\PY{p}{,}\PY{n}{v} \PY{o+ow}{in} \PY{n}{data\PYZus{}in}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}    
                 \PY{n}{data} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{v}\PY{p}{)}\PY{o}{.}\PY{n}{reshape}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
                 \PY{n}{transformed} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{squeeze}\PY{p}{(}\PY{n}{qt}\PY{o}{.}\PY{n}{fit\PYZus{}transform}\PY{p}{(}\PY{n}{data}\PY{p}{)}\PY{p}{)}\PY{p}{)}
               
                 \PY{n}{data\PYZus{}tf}\PY{p}{[}\PY{n}{k}\PY{p}{]} \PY{o}{=} \PY{n}{transformed}
             
             \PY{k}{return} \PY{n}{data\PYZus{}tf}
\end{Verbatim}


    \hypertarget{define-plotting-functions-for-looking-at-each-month-individually}{%
\subsection{Define plotting functions for looking at each month
individually}\label{define-plotting-functions-for-looking-at-each-month-individually}}

    \hypertarget{def-make_violinplot}{%
\subsubsection{def make\_violinplot}\label{def-make_violinplot}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}15}]:} \PY{c+c1}{\PYZsh{} plotting order totals per month in violin plots}
         
         \PY{k}{def} \PY{n+nf}{make\PYZus{}violinplot}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{hue}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{ticklabels}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Plots a violin plot with horizontal mean line, inner stick lines\PYZsq{}\PYZsq{}\PYZsq{}}
         
             \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{use}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dark\PYZus{}background}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{fig}\PY{p}{,}\PY{n}{ax} \PY{o}{=}\PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{12}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
         
             \PY{n}{ax}\PY{o}{.}\PY{n}{xlabel}\PY{o}{=} \PY{n}{x}\PY{o}{.}\PY{n}{name}
             \PY{n}{ylabel}\PY{o}{=} \PY{n}{y}\PY{o}{.}\PY{n}{name}
             
             \PY{n}{sns}\PY{o}{.}\PY{n}{violinplot}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{y}\PY{p}{,}\PY{n}{cut}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{,}\PY{n}{split}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{scale}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{count}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{scale\PYZus{}hue}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}
                          \PY{n}{saturation}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{9}\PY{p}{,}\PY{n}{bw}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{25}\PY{p}{,} \PY{n}{palette}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Dark2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{inner}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stick}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{hue}\PY{o}{=}\PY{n}{hue}\PY{p}{)}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{n}{title}\PY{p}{)}
         
             \PY{n}{ax}\PY{o}{.}\PY{n}{axhline}\PY{p}{(}\PY{n}{y}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{total mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ls}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xkcd:yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xticklabels}\PY{p}{(}\PY{n}{ticklabels}\PY{p}{)}
         
             \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}     x= df\PYZus{}year\PYZus{}orders[\PYZsq{}month\PYZsq{}]}
         \PY{c+c1}{\PYZsh{}     y= df\PYZus{}year\PYZus{}orders[\PYZsq{}order\PYZus{}total\PYZsq{}]}
         \PY{c+c1}{\PYZsh{}     title = \PYZsq{}Order totals per month with or without discounts\PYZsq{}}
         \PY{c+c1}{\PYZsh{}     hue=df\PYZus{}year\PYZus{}orders[\PYZsq{}Discount\PYZsq{}]\PYZgt{}0}
             
             \PY{k}{return} \PY{n}{fig}\PY{p}{,} \PY{n}{ax}
             
             
\end{Verbatim}


    \hypertarget{def-make-stripplot}{%
\subsubsection{def make-stripplot}\label{def-make-stripplot}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}16}]:} \PY{k}{def} \PY{n+nf}{make\PYZus{}stripplot}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{title}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{hue}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{ticklabels}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
         
             \PY{k}{with} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dark\PYZus{}background}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
                 \PY{n}{fig}\PY{p}{,}\PY{n}{ax} \PY{o}{=}\PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{8}\PY{p}{,}\PY{l+m+mi}{6}\PY{p}{)}\PY{p}{)}
         
         
                 \PY{n}{sns}\PY{o}{.}\PY{n}{stripplot}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{jitter}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{l+m+mi}{12}\PY{p}{,}\PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gray}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linewidth}\PY{o}{=}\PY{l+m+mf}{1.5}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{palette}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Dark2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{marker}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{d}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{hue}\PY{o}{=}\PY{n}{hue}\PY{p}{)}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{n}{title}\PY{p}{)}
         
                 \PY{n}{ax}\PY{o}{.}\PY{n}{axhline}\PY{p}{(}\PY{n}{y}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{total mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ls}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xkcd:yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                 \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xticklabels}\PY{p}{(}\PY{n}{ticklabels}\PY{p}{)}
         
                 \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
             \PY{k}{return} \PY{n}{fig}\PY{p}{,} \PY{n}{ax}
\end{Verbatim}


    \hypertarget{def-draw_histograms}{%
\subsubsection{def draw\_histograms}\label{def-draw_histograms}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}17}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{use}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{default}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{k}{def} \PY{n+nf}{draw\PYZus{}histograms}\PY{p}{(}\PY{n}{df}\PY{p}{,} \PY{n}{variable}\PY{p}{,} \PY{n}{sample\PYZus{}dict}\PY{p}{,} \PY{n}{n\PYZus{}rows}\PY{p}{,} \PY{n}{n\PYZus{}cols}\PY{p}{)}\PY{p}{:}
         
           \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Takes dataframe, variable is column name , plots histograms \PYZsq{}\PYZsq{}\PYZsq{}}
           
           \PY{k}{with} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{seaborn\PYZhy{}paper}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
         
             \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{)}
         
             \PY{k}{for} \PY{n}{k}\PY{p}{,}\PY{n}{v} \PY{o+ow}{in} \PY{n}{sample\PYZus{}dict}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
         
               \PY{n}{month} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{n}{variable}\PY{p}{]} \PY{o}{==} \PY{n}{k}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
               \PY{n}{month\PYZus{}mean} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{month}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
         
               \PY{n}{year} \PY{o}{=}  \PY{n}{df}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{!=} \PY{n}{k}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
               \PY{n}{year\PYZus{}mean} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{year}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
         
               \PY{n}{ax} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}subplot}\PY{p}{(}\PY{n}{n\PYZus{}rows}\PY{p}{,}\PY{n}{n\PYZus{}cols}\PY{p}{,}\PY{n}{k}\PY{p}{)}
               \PY{n}{ax}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{labelsize}\PY{o}{=}\PY{l+m+mi}{8}\PY{p}{)}
         
               \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{year}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{,}\PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{7}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rest of Year}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
               \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{month}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{6}\PY{p}{,}\PY{n}{label}\PY{o}{=} \PY{n}{v}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         
               \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{n}{v}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{fontsize}\PY{o}{=}\PY{l+m+mi}{14}\PY{p}{)}
         
               \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{month\PYZus{}mean}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xkcd:fuchsia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                           \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Sample Mean }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{month\PYZus{}mean}\PY{p}{)}\PY{p}{)}
         
               \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{year\PYZus{}mean}\PY{p}{,}\PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xkcd:green}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                           \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pop. Mean }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{year\PYZus{}mean}\PY{p}{)}\PY{p}{)}
         
               \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{fontsize}\PY{o}{=}\PY{l+m+mi}{6}\PY{p}{,} \PY{n}{frameon}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{ncol} \PY{o}{=} \PY{l+m+mi}{2} \PY{p}{)}
         
             \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}    
             \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \hypertarget{def-draw_histograms_sample}{%
\subsubsection{def
draw\_histograms\_sample}\label{def-draw_histograms_sample}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}18}]:} \PY{k}{def} \PY{n+nf}{draw\PYZus{}histograms\PYZus{}from\PYZus{}sample}\PY{p}{(}\PY{n}{population}\PY{p}{,}\PY{n}{sample}\PY{p}{,} \PY{n}{sample\PYZus{}dict}\PY{p}{,} \PY{n}{n\PYZus{}rows}\PY{p}{,} \PY{n}{n\PYZus{}cols}\PY{p}{)}\PY{p}{:}
         
           \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mf}{8.5}\PY{p}{,}\PY{l+m+mf}{7.5}\PY{p}{)}\PY{p}{)}
           \PY{n}{count} \PY{o}{=} \PY{l+m+mi}{0}
           
           \PY{k}{for} \PY{n}{k}\PY{p}{,}\PY{n}{v} \PY{o+ow}{in} \PY{n}{sample\PYZus{}dict}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
             
             \PY{n}{count} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}                        
         
             \PY{n}{month} \PY{o}{=} \PY{n}{sample\PYZus{}dict}\PY{p}{[}\PY{n}{k}\PY{p}{]} \PY{c+c1}{\PYZsh{}pop\PYZus{}samp\PYZus{}month\PYZus{}dict[k]}
             \PY{n}{month\PYZus{}mean} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{v}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
             
             \PY{n}{year} \PY{o}{=} \PY{n}{population}
             \PY{n}{year\PYZus{}mean} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{population}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
         
             \PY{n}{ax} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}subplot}\PY{p}{(}\PY{n}{n\PYZus{}rows}\PY{p}{,}\PY{n}{n\PYZus{}cols}\PY{p}{,} \PY{n}{count}\PY{p}{)}
             \PY{n}{ax}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{labelsize}\PY{o}{=}\PY{l+m+mi}{8}\PY{p}{)}
         
             \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{year}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{8}\PY{p}{,} \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{All Months}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{month}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{6}\PY{p}{,} \PY{n}{label} \PY{o}{=} \PY{n}{v}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         
             \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{n}{k}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{fontsize}\PY{o}{=}\PY{l+m+mi}{14}\PY{p}{)}
         
             \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{month\PYZus{}mean}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xkcd:fuchsia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                         \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Sample Mean }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{month\PYZus{}mean}\PY{p}{)}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{year\PYZus{}mean}\PY{p}{,}\PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{xkcd:green}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                         \PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pop. Mean }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{year\PYZus{}mean}\PY{p}{)}\PY{p}{)}
             
             \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{n}{fontsize}\PY{o}{=}\PY{l+m+mi}{6}\PY{p}{,} \PY{n}{frameon}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
             
           \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}    
           \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \hypertarget{def-tukey_table}{%
\subsubsection{def tukey\_table}\label{def-tukey_table}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}19}]:} \PY{k}{def} \PY{n+nf}{tukey\PYZus{}table}\PY{p}{(}\PY{n}{tukey\PYZus{}results}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{} Accepts the output of the tukey hsd test and returns it as a dataframe.\PYZsq{}\PYZsq{}\PYZsq{}}
             \PY{n}{table\PYZus{}tukey} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{data}\PY{o}{=}\PY{n}{tukey\PYZus{}results}\PY{o}{.}\PY{n}{\PYZus{}results\PYZus{}table}\PY{o}{.}\PY{n}{data}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{n}{tukey\PYZus{}results}\PY{o}{.}\PY{n}{\PYZus{}results\PYZus{}table}\PY{o}{.}\PY{n}{data}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
             \PY{k}{return} \PY{n}{table\PYZus{}tukey}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}20}]:} \PY{k}{def} \PY{n+nf}{normtest\PYZus{}results}\PY{p}{(}\PY{n}{dict\PYZus{}data}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Peforms both d\PYZsq{}agostino\PYZhy{}pearson and shapiro\PYZhy{}wilik normal tests}
         \PY{l+s+sd}{        }
         \PY{l+s+sd}{        Parameters:}
         \PY{l+s+sd}{            dict\PYZus{}data \PYZhy{}\PYZhy{} dictionary with \PYZob{}\PYZsq{}name\PYZsq{} : data\PYZcb{} }
         \PY{l+s+sd}{        Returns:}
         \PY{l+s+sd}{            results\PYZus{}normtest \PYZhy{}\PYZhy{} list of test results (can run list2df(results\PYZus{}normtest)}
         \PY{l+s+sd}{    \PYZdq{}\PYZdq{}\PYZdq{}}
             \PY{k+kn}{from} \PY{n+nn}{numpy}\PY{n+nn}{.}\PY{n+nn}{random} \PY{k}{import} \PY{n}{seed}
             \PY{k+kn}{from} \PY{n+nn}{numpy}\PY{n+nn}{.}\PY{n+nn}{random} \PY{k}{import} \PY{n}{randn}
             \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{shapiro}
             \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{normaltest}
         
             \PY{n}{results\PYZus{}normtest\PYZus{}shap} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DataIn}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Test}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stat}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
             \PY{n}{results\PYZus{}normtest\PYZus{}dagp} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DataIn}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Test}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stat}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
         
             \PY{k}{for} \PY{n}{key}\PY{p}{,}\PY{n}{val} \PY{o+ow}{in} \PY{n}{dict\PYZus{}data}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
         
                 \PY{n}{data\PYZus{}in} \PY{o}{=} \PY{n}{val}
                 \PY{n}{name} \PY{o}{=} \PY{n}{key}
                 \PY{n}{test} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Shapiro}\PY{l+s+s1}{\PYZsq{}}
                 \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n}{shapiro}\PY{p}{(}\PY{n}{data\PYZus{}in}\PY{p}{)}
                 \PY{n}{results\PYZus{}normtest\PYZus{}shap}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{name} \PY{p}{,} \PY{n}{test}\PY{p}{,} \PY{n}{stat} \PY{p}{,} \PY{n}{p} \PY{p}{]}\PY{p}{)}
                 \PY{n}{test} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{D’Agostino’s}\PY{l+s+s1}{\PYZsq{}}
                 \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n}{normaltest}\PY{p}{(}\PY{n}{data\PYZus{}in}\PY{p}{)}
                 \PY{n}{results\PYZus{}normtest\PYZus{}dagp}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{name}\PY{p}{,}\PY{n}{test}\PY{p}{,}\PY{n}{stat}\PY{p}{,} \PY{n}{p}\PY{p}{]}\PY{p}{)}
         
             \PY{n}{results\PYZus{}normtest} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{list2df}\PY{p}{(}\PY{n}{results\PYZus{}normtest\PYZus{}shap}\PY{p}{)}\PY{p}{,} \PY{n}{list2df}\PY{p}{(}\PY{n}{results\PYZus{}normtest\PYZus{}dagp}\PY{p}{)}\PY{p}{]}\PY{p}{)} 
         
             \PY{k}{return} \PY{n}{results\PYZus{}normtest} \PY{c+c1}{\PYZsh{}, list2df(results\PYZus{}normtest\PYZus{}shap),list2df(results\PYZus{}normtest\PYZus{}dagp)}
         
         \PY{c+c1}{\PYZsh{}   results\PYZus{}pivot = results.pivot(index=\PYZsq{}DataIn\PYZsq{}, columns= \PYZsq{}Test\PYZsq{})}
         \PY{c+c1}{\PYZsh{}   results\PYZus{}pivot.stack(0)}
\end{Verbatim}


    \hypertarget{importing-and-setting-pandas-dataframe-options}{%
\subsubsection{Importing and setting pandas dataframe
options}\label{importing-and-setting-pandas-dataframe-options}}

    \hypertarget{testing-table-methods}{%
\subparagraph{TESTING TABLE METHODS}\label{testing-table-methods}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}21}]:} \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
         \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
         \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
         \PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
         \PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}
         
         \PY{c+c1}{\PYZsh{} from IPython.core import display}
         \PY{k+kn}{from} \PY{n+nn}{IPython}\PY{n+nn}{.}\PY{n+nn}{core}\PY{n+nn}{.}\PY{n+nn}{display} \PY{k}{import} \PY{n}{HTML}
         \PY{k+kn}{from} \PY{n+nn}{IPython}\PY{n+nn}{.}\PY{n+nn}{display} \PY{k}{import} \PY{n}{display}
         \PY{n}{f} \PY{o}{=} \PY{n+nb}{open}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{CSS.css}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{HTML}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZlt{}style\PYZgt{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZlt{}/style\PYZgt{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{f}\PY{o}{.}\PY{n}{read}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}21}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}22}]:} \PY{c+c1}{\PYZsh{} Using built\PYZhy{}in pandas styling}
         \PY{n}{pd}\PY{o}{.}\PY{n}{set\PYZus{}option}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{colheader\PYZus{}justify}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{center}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{pd}\PY{o}{.}\PY{n}{set\PYZus{}option}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{precision}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} def highlight\PYZus{}sig(s,alpha,column):}
         \PY{c+c1}{\PYZsh{}     is\PYZus{}sig = pd.Series(data=False, index=s.index)}
         \PY{c+c1}{\PYZsh{}     is\PYZus{}sig[column] = s.loc[column] \PYZlt{}= threshold}
         \PY{c+c1}{\PYZsh{}     print(type(is\PYZus{}sig))}
         \PY{c+c1}{\PYZsh{}     return [\PYZsq{}background\PYZhy{}color: yellow\PYZsq{} if is\PYZus{}sig.any() else \PYZsq{}\PYZsq{} for v in is\PYZus{}sig]}
         
         
         \PY{c+c1}{\PYZsh{} df.style.apply(highlight\PYZus{}sig,threshold=1.0,column=[\PYZsq{}C\PYZsq{},\PYZsq{}B\PYZsq{}], axis=1)}
\end{Verbatim}


    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{experimental-design-and-hypothesis}{%
\section{\texorpdfstring{\textbf{EXPERIMENTAL DESIGN AND
HYPOTHESIS}}{EXPERIMENTAL DESIGN AND HYPOTHESIS}}\label{experimental-design-and-hypothesis}}

You will need query the database to get the data needed to perform a
statistical analysis. In this statistical analysis, \textbf{you'll need
to perform a hypothesis test (or perhaps several) to answer the
following question:}

\hypertarget{hypothesis-1}{%
\paragraph{Hypothesis 1:}\label{hypothesis-1}}

\begin{quote}
\textbf{Do discounts have a statistically significant effect on the
number of products customers order?} \textbf{If so, at what level(s) of
discount?}
\end{quote}

\begin{itemize}
\item
  \(H_1\) : Products that are discounted sell in higher quantities.
\item
  \(H_0\) : Products that are discounted sell the same quantities as
  full-proce products.
\end{itemize}

\hypertarget{hypothesis-2}{%
\paragraph{Hypothesis 2:}\label{hypothesis-2}}

\begin{quote}
\textbf{Do customers spend more money if they are buying discounted
items?}
\end{quote}

\begin{itemize}
\item
  \(H_1\): Customers spend more money overall when their order includes
  discounted items.
\item
  \(H_0\): Customers spend the same amount regardless of discounted
  items.
\end{itemize}

\hypertarget{hypothesis-3}{%
\paragraph{Hypothesis 3:}\label{hypothesis-3}}

\begin{quote}
\textbf{Does the time of year affect quantity of items sold?}
\end{quote}

\begin{itemize}
\tightlist
\item
  \(H_1\) = THe month an order is placed relates to either a higher or
  lower mean quantity of items sold.
\item
  \(H_0\) = The month of an order has no affect on the mean quantity of
  items sold.
\end{itemize}

\hypertarget{hypothesis-4}{%
\paragraph{Hypothesis 4:}\label{hypothesis-4}}

\begin{quote}
\textbf{Do different countries respond to discounts differently?}
\end{quote}

\begin{itemize}
\tightlist
\item
  \(H_1\): Different countries purchase different quantities of
  discounted vs non discounted products.
\item
  \(H_0\): All countries purchase the same quantities of discounted vs
  non discounted products. 
\end{itemize}

    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{hypothesis-1}{%
\section{\texorpdfstring{\textbf{Hypothesis
1:}}{Hypothesis 1:}}\label{hypothesis-1}}

\begin{quote}
\textbf{Do discounts have a statistically significant effect on the
number of products customers order?} \textbf{If so, at what level(s) of
discount?}
\end{quote}

\begin{itemize}
\item
  \(H_1\) : Products that are discounted sell in higher quantities.
\item
  \(H_0\) : Products that are discounted sell the same quantities as
  full-proce products.
\end{itemize}

\textbf{Specific Aims:}

\begin{itemize}
\tightlist
\item
  \textbf{\emph{Aim 1:To select the proper dataset for analysis, perform
  EDA, and generate data groups for testing.}}

  \begin{itemize}
  \tightlist
  \item
    Used sqlalchemy and pandas.
  \end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{query }\OperatorTok{=} \StringTok{"SELECT* FROM OrderDetails, GROUPBY discount"}
\NormalTok{python pandas.read_sql_query()}
\end{Highlighting}
\end{Shaded}
\item
  \textbf{\emph{Aim 2: Select the appropriate t-test based on tests for
  the assumptions of normality and homogeneity of variance.}}

  \begin{enumerate}
  \def\labelenumi{\arabic{enumi}.}
  \tightlist
  \item
    \textbf{Test for Normality}

    \begin{itemize}
    \tightlist
    \item
      D'Agostino-Pearson's normality test
      \texttt{scipy.stats.normaltest}
    \item
      Shapiro-Wilik Test \texttt{scipy.stats.shapiro}
    \end{itemize}
  \item
    \textbf{Test for Homogeneity of Variance}

    \begin{itemize}
    \tightlist
    \item
      Levene's Test \texttt{scipy.stats.levene}
    \end{itemize}
  \item
    \textbf{Choose appropriate test based upon 1. and 2.}

    \begin{itemize}
    \tightlist
    \item
      Mann-Whitney U test (non parametric equivalent of ANOVA)
      \texttt{stats.mannwhitneyu}
    \end{itemize}
  \end{enumerate}
\item
  \textbf{\emph{Aim 3: To perform post-hoc painrwise comparison testing
  to determine which level of discounts affect quantity and if any
  discount has a greater effect than the others.}}

  \begin{itemize}
  \tightlist
  \item
    Tukey's test for multiple pairwise comparisons
    \texttt{statsmodels.stats.multicomp.pairwise\_tukeyhsd}
  \end{itemize}
\end{itemize}

    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{h1-aim-1.1-to-select-the-proper-dataset-for-analyiss-and-generate-data-groups-for-testing.}{%
\subsection{\texorpdfstring{\textbf{\emph{H1, Aim 1.1 : To select the
proper dataset for analyiss and generate data groups for
testing.}}}{H1, Aim 1.1 : To select the proper dataset for analyiss and generate data groups for testing.}}\label{h1-aim-1.1-to-select-the-proper-dataset-for-analyiss-and-generate-data-groups-for-testing.}}

\hypertarget{importing-method}{%
\paragraph{Importing Method}\label{importing-method}}

\begin{itemize}
\item
  Used sqlalchemy to create engine to connect to
  Northwind\_small.sqlite.
\item
  Used
  \texttt{pd.read\_sql\_query(\textquotesingle{}SELECT\ *\ FROM\ OrderDetail\textquotesingle{},engine)}
  to directly read db into df
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}23}]:} \PY{c+c1}{\PYZsh{} \PYZsh{} \PYZsh{}CELL A : IF ON COLAB.}
         \PY{c+c1}{\PYZsh{} \PYZsh{} \PYZsh{}The northwind.sqlite is located in: content/drive/My Drive/Colab Notebooks/datasets/Northwind\PYZus{}small.sqlite}
         \PY{c+c1}{\PYZsh{} from google.colab import drive}
         \PY{c+c1}{\PYZsh{} drive.mount(\PYZsq{}/content/drive/\PYZsq{}, force\PYZus{}remount=True)}
         
         \PY{c+c1}{\PYZsh{} \PYZsh{} \PYZsh{} If in Google Drive }
         \PY{c+c1}{\PYZsh{} path= \PYZsq{}/content/drive/My Drive/Colab Notebooks/datasets/\PYZsq{}}
         \PY{c+c1}{\PYZsh{} file=\PYZsq{}Northwind\PYZus{}small.sqlite\PYZsq{}}
         \PY{c+c1}{\PYZsh{} filepath = path+file}
         \PY{c+c1}{\PYZsh{} \PYZsh{} filepath = \PYZsq{}/content/drive/My Drive/Colab Notebooks/datasets/Northwind\PYZus{}small.sqlite\PYZsq{}}
         
         
         \PY{c+c1}{\PYZsh{} \PYZsh{}NOTE: To save files to drive, just to df.to\PYZus{}csv(path+\PYZsq{}filename.csv\PYZsq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}24}]:} \PY{c+c1}{\PYZsh{} \PYZsh{}CELL B: If RUNNING LOCALLY.}
         \PY{c+c1}{\PYZsh{} filepath = \PYZsq{}Northwind\PYZus{}small.sqlite\PYZsq{}}
\end{Verbatim}


    \hypertarget{use-sqlalchemy-and-pandas-to-inspect-data-tables}{%
\paragraph{Use sqlalchemy and pandas to inspect data
tables}\label{use-sqlalchemy-and-pandas-to-inspect-data-tables}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}25}]:} \PY{c+c1}{\PYZsh{} Import packages for sql}
         \PY{k+kn}{import} \PY{n+nn}{sqlite3}
         \PY{k+kn}{from} \PY{n+nn}{sqlalchemy} \PY{k}{import} \PY{n}{create\PYZus{}engine}\PY{p}{,} \PY{n}{inspect}
         \PY{c+c1}{\PYZsh{} from sqlalchemy import Table, Column, Integer, String, MetaData, ForeignKey,text, Float}
         \PY{n}{filepath} \PY{o}{=}  \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Northwind\PYZus{}small.sqlite}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{engine} \PY{o}{=} \PY{n}{create\PYZus{}engine}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sqlite:///Northwind\PYZus{}small.sqlite}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{echo}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{;}
         
         \PY{n}{inspector} \PY{o}{=} \PY{n}{inspect}\PY{p}{(}\PY{n}{engine}\PY{p}{)}\PY{p}{;}
         
         \PY{n}{db\PYZus{}tables} \PY{o}{=} \PY{n}{inspector}\PY{o}{.}\PY{n}{get\PYZus{}table\PYZus{}names}\PY{p}{(}\PY{p}{)}\PY{p}{;}
         
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{db\PYZus{}tables}\PY{p}{)}\PY{p}{;}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
2019-04-12 16:53:13,035 INFO sqlalchemy.engine.base.Engine SELECT CAST('test plain returns' AS VARCHAR(60)) AS anon\_1
2019-04-12 16:53:13,037 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:13,038 INFO sqlalchemy.engine.base.Engine SELECT CAST('test unicode returns' AS VARCHAR(60)) AS anon\_1
2019-04-12 16:53:13,039 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:13,041 INFO sqlalchemy.engine.base.Engine SELECT name FROM sqlite\_master WHERE type='table' ORDER BY name
2019-04-12 16:53:13,041 INFO sqlalchemy.engine.base.Engine ()

 ['Category', 'Customer', 'CustomerCustomerDemo', 'CustomerDemographic', 'Employee', 'EmployeeTerritory', 'Order', 'OrderDetail', 'Product', 'Region', 'Shipper', 'Supplier', 'Territory']

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}26}]:} \PY{c+c1}{\PYZsh{} list2df(get\PYZus{}col\PYZus{}info(\PYZsq{}OrderDetail\PYZsq{}))}
\end{Verbatim}


    \hypertarget{load-in-table-orderdetail-for-hypothesis-1}{%
\paragraph{Load in table OrderDetail for hypothesis
1}\label{load-in-table-orderdetail-for-hypothesis-1}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}27}]:} \PY{c+c1}{\PYZsh{} We want to test hypothesis one, so we need OrderDetail table.}
         \PY{n}{table\PYZus{}to\PYZus{}test} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{OrderDetail}\PY{l+s+s2}{\PYZdq{}}
         \PY{n}{df\PYZus{}od} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}sql\PYZus{}query}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{SELECT * FROM OrderDetail}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}  \PY{n}{engine}\PY{p}{)}
         \PY{n}{df\PYZus{}o} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}sql\PYZus{}query}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{SELECT * FROM [Order]}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}  \PY{n}{engine}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} df\PYZus{}o.info()}
         \PY{n}{df\PYZus{}o}\PY{o}{.}\PY{n}{rename}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
         
         \PY{n}{df} \PY{o}{=} \PY{n}{df\PYZus{}od}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{df\PYZus{}o}\PY{p}{,} \PY{n}{on} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} if save\PYZus{}for\PYZus{}user==True:}
         \PY{c+c1}{\PYZsh{}     df.to\PYZus{}csv(data\PYZus{}filepath+\PYZsq{}OrderId\PYZus{}Order.csv\PYZsq{})}
         \PY{c+c1}{\PYZsh{} \PYZsh{} df.to\PYZus{}csv(\PYZsq{}OrderId\PYZus{}Order.csv\PYZsq{})}
         
         \PY{n}{df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
2019-04-12 16:53:13,056 INFO sqlalchemy.engine.base.Engine SELECT * FROM OrderDetail
2019-04-12 16:53:13,057 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:13,069 INFO sqlalchemy.engine.base.Engine SELECT * FROM [Order]
2019-04-12 16:53:13,069 INFO sqlalchemy.engine.base.Engine ()

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}27}]:}       Id     OrderId  ProductId  UnitPrice  Quantity  Discount CustomerId  \textbackslash{}
         0  10248/11   10248      11        14.0        12        0.0      VINET     
         1  10248/42   10248      42         9.8        10        0.0      VINET     
         2  10248/72   10248      72        34.8         5        0.0      VINET     
         3  10249/14   10249      14        18.6         9        0.0      TOMSP     
         4  10249/51   10249      51        42.4        40        0.0      TOMSP     
         
            EmployeeId  OrderDate  RequiredDate ShippedDate  ShipVia  Freight  \textbackslash{}
         0       5      2012-07-04  2012-08-01   2012-07-16     3      32.38    
         1       5      2012-07-04  2012-08-01   2012-07-16     3      32.38    
         2       5      2012-07-04  2012-08-01   2012-07-16     3      32.38    
         3       6      2012-07-05  2012-08-16   2012-07-10     1      11.61    
         4       6      2012-07-05  2012-08-16   2012-07-10     1      11.61    
         
                    ShipName              ShipAddress     ShipCity    ShipRegion    \textbackslash{}
         0  Vins et alcools Chevalier  59 rue de l'Abbaye    Reims  Western Europe   
         1  Vins et alcools Chevalier  59 rue de l'Abbaye    Reims  Western Europe   
         2  Vins et alcools Chevalier  59 rue de l'Abbaye    Reims  Western Europe   
         3         Toms Spezialitäten       Luisenstr. 48  Münster  Western Europe   
         4         Toms Spezialitäten       Luisenstr. 48  Münster  Western Europe   
         
           ShipPostalCode ShipCountry  
         0      51100         France   
         1      51100         France   
         2      51100         France   
         3      44087        Germany   
         4      44087        Germany   
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}28}]:} \PY{c+c1}{\PYZsh{}     df.info()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}29}]:} \PY{c+c1}{\PYZsh{} Checking the levels of discount}
         \PY{c+c1}{\PYZsh{} sorted(df[\PYZsq{}Discount\PYZsq{}].unique())}
         \PY{n}{counts} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
         \PY{n}{counts}\PY{o}{.}\PY{n}{sort\PYZus{}index}\PY{p}{(}\PY{p}{)}
         \PY{n}{count\PYZus{}dict} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{n+nb}{zip}\PY{p}{(}\PY{n}{counts}\PY{o}{.}\PY{n}{index}\PY{p}{,} \PY{n}{counts}\PY{o}{.}\PY{n}{values}\PY{p}{)}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} count\PYZus{}dict}
\end{Verbatim}


    \hypertarget{aim-1.2-eda-on-dataset}{%
\subsubsection{Aim 1.2: EDA on dataset}\label{aim-1.2-eda-on-dataset}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}30}]:} \PY{c+c1}{\PYZsh{} df[\PYZsq{}Quantity\PYZsq{}].groupby(df[\PYZsq{}Discount\PYZsq{}]).plot(kind=\PYZsq{}bar\PYZsq{})}
         \PY{n}{plot\PYZus{}hist\PYZus{}scat\PYZus{}sns}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ProductId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_61_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_61_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_61_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_61_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_61_4.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_61_5.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{note-on-orderdetails-df}{%
\paragraph{Note on OrderDetails df:}\label{note-on-orderdetails-df}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  There are 11 possible values for discounts:

  \begin{itemize}
  \tightlist
  \item
    Values = {[}0.0, 0.01, 0.02, 0.03, 0.04, 0.05, 0.06, 0.1, 0.15, 0.2,
    0.25{]}
  \item
    However, there are very few entries for some of the levels of value.
    \texttt{print(sorted(df{[}\textquotesingle{}Discount\textquotesingle{}{]}.unique()))}
  \end{itemize}
\item
  The data for quantity looks skewed and not-normal.

  \begin{itemize}
  \tightlist
  \item
    Normality tests will likely come back significant
  \end{itemize}
\end{enumerate}

    \hypertarget{aim-1.3-generated-and-inspect-the-required-groups}{%
\subsubsection{Aim 1.3: Generated and inspect the required
groups}\label{aim-1.3-generated-and-inspect-the-required-groups}}

\begin{itemize}
\tightlist
\item
  Generate the groups that we want to test.

  \begin{itemize}
  \tightlist
  \item
    Discounted
  \item
    Full price
  \end{itemize}
\item
  Once review, use info to determine next steps.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}31}]:} \PY{c+c1}{\PYZsh{} Print the descriptive statistics.}
         \PY{n}{df\PYZus{}discounted} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{\PYZgt{}}\PY{l+m+mi}{0}\PY{p}{]}
         \PY{n}{df\PYZus{}fullprice} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{l+m+mi}{0}\PY{p}{]}
         
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{All Quantities:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} df.drop([\PYZsq{}OrderId\PYZsq{},\PYZsq{}ProductId\PYZsq{}],axis=1).describe().round()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

All Quantities:

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}32}]:} \PY{c+c1}{\PYZsh{} print(f\PYZsq{}\PYZbs{}nDiscounted Quantities:\PYZsq{})}
         
         \PY{c+c1}{\PYZsh{} df\PYZus{}discounted.drop([\PYZsq{}OrderId\PYZsq{},\PYZsq{}ProductId\PYZsq{}],axis=1).describe().round()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}33}]:} \PY{c+c1}{\PYZsh{} print(f\PYZsq{}Full price Quantities:\PYZbs{}n\PYZsq{})}
         \PY{c+c1}{\PYZsh{} df\PYZus{}fullprice.drop([\PYZsq{}OrderId\PYZsq{},\PYZsq{}ProductId\PYZsq{}],axis=1).describe().round()}
\end{Verbatim}


    \hypertarget{plotting-summary-eda-figure}{%
\subsubsection{Plotting Summary EDA
Figure}\label{plotting-summary-eda-figure}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}34}]:} \PY{n}{kwargs} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{title\PYZus{}var}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity Sold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
         \PY{n}{figa}\PY{p}{,}\PY{n}{ax} \PY{o}{=} \PY{n}{plot\PYZus{}wide\PYZus{}kde\PYZus{}thin\PYZus{}bar}\PY{p}{(}\PY{n}{df\PYZus{}fullprice}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Full Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{df\PYZus{}discounted}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discounted}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{o}{*}\PY{o}{*}\PY{n}{kwargs}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Mean of Full Price: 21.715261958997722
 Mean of Discounted: 27.10978520286396

    \end{Verbatim}

    
    \begin{verbatim}
<Figure size 432x288 with 0 Axes>
    \end{verbatim}

    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_68_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}35}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Uncomment this cell to save the outputs.}
         \PY{c+c1}{\PYZsh{} figa.savefig(\PYZsq{}H1\PYZus{}Kde\PYZus{}bar\PYZus{}Quantity\PYZus{}black.png\PYZsq{},dpi=300,facecolor=\PYZsq{}black\PYZsq{})}
         \PY{c+c1}{\PYZsh{} df\PYZus{}discounted.to\PYZus{}csv(\PYZsq{}df\PYZus{}discounted.csv\PYZsq{})}
         \PY{c+c1}{\PYZsh{} df\PYZus{}fullprice.to\PYZus{}csv(\PYZsq{}df\PYZus{}fullprice.csv\PYZsq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}36}]:} \PY{c+c1}{\PYZsh{} df\PYZus{}fullprice.info(), df\PYZus{}discounted.info()}
\end{Verbatim}


    \hypertarget{h1-aim-2-select-the-appropriate-t-test-based-on-tests-for-the-assumptions-of-normality-and-homogeneity-of-variance.}{%
\subsection{\texorpdfstring{\textbf{\emph{H1, Aim 2: Select the
appropriate t-test based on tests for the assumptions of normality and
homogeneity of
variance.}}}{H1, Aim 2: Select the appropriate t-test based on tests for the assumptions of normality and homogeneity of variance.}}\label{h1-aim-2-select-the-appropriate-t-test-based-on-tests-for-the-assumptions-of-normality-and-homogeneity-of-variance.}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Test for Normality}

  \begin{itemize}
  \tightlist
  \item
    D'Agostino-Pearson's normality test \texttt{scipy.stats.normaltest}
  \item
    Shapiro-Wilik Test \texttt{scipy.stats.shapiro}
  \end{itemize}
\item
  \textbf{Test for Homogeneity of Variance}

  \begin{itemize}
  \tightlist
  \item
    Levene's Test \texttt{scipy.stats.levene}
  \end{itemize}
\item
  \textbf{Choose appropriate test based upon 1. and 2.} \_\_\_
\end{enumerate}

    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{h1-aim-2-final-workflow-for-testing-assumptions}{%
\subsection{\texorpdfstring{\textbf{\emph{H1, Aim 2: Final Workflow for
testing
assumptions}}}{H1, Aim 2: Final Workflow for testing assumptions}}\label{h1-aim-2-final-workflow-for-testing-assumptions}}

    \hypertarget{new-statistical-analysis-pipeline}{%
\paragraph{New Statistical Analysis
Pipeline}\label{new-statistical-analysis-pipeline}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Test for Normality}

  \begin{itemize}
  \tightlist
  \item
    D'Agostino-Pearson's normality test \texttt{scipy.stats.normaltest}
  \item
    Shapiro-Wilik Test \texttt{scipy.stats.shapiro}
  \end{itemize}
\item
  \textbf{Test for Homogeneity of Variance}

  \begin{itemize}
  \tightlist
  \item
    Levene's Test \texttt{scipy.stats.levene}
  \end{itemize}
\item
  \textbf{Choose appropriate test based upon 1. and 2.}

  \begin{itemize}
  \tightlist
  \item
    Welch's T-Test
  \item
    Mann Whitney U
  \item
    ANOVA
  \item
    Tukey's
  \end{itemize}
\item
  Calculate effect size for significant results.

  \begin{itemize}
  \tightlist
  \item
    Effect size:
    \href{https://stackoverflow.com/questions/21532471/how-to-calculate-cohens-d-in-python}{cohen's
    d}
  \item
    Interpretation:

    \begin{itemize}
    \tightlist
    \item
      Small effect = 0.2 ( cannot be seen by naked eye)
    \item
      Medium effect = 0.5
    \item
      Large Effect = 0.8 (can be seen by naked eye)
    \end{itemize}
  \end{itemize}
\item
  If significant, follow up with post-hoc tests (if have more than 2
  groups)

  \begin{itemize}
  \tightlist
  \item
    \href{https://www.statsmodels.org/stable/generated/statsmodels.stats.multicomp.pairwise_tukeyhsd.html}{Tukey's}
  \end{itemize}
\end{enumerate}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}37}]:} \PY{c+c1}{\PYZsh{} 1 \PYZhy{} Separating groups from dfH (dataframeHypothesis)}
         \PY{n}{dfH} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{UnitPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{}Adding group definitions}
         \PY{n}{grpA} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{[}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{Discount}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{] \PYZgt{} 0}\PY{l+s+s2}{\PYZdq{}}
         \PY{n}{grpB} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{[}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{Discount}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{] == 0}\PY{l+s+s2}{\PYZdq{}}
         
         \PY{c+c1}{\PYZsh{} Using eval to create df\PYZus{}A and df\PYZus{}B; will allow us to fill in our results }
         \PY{c+c1}{\PYZsh{} with the exact definitions of Group A and Group B}
         \PY{n}{df\PYZus{}A} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dfH.loc[dfH}\PY{l+s+si}{\PYZob{}grpA\PYZcb{}}\PY{l+s+s1}{]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{df\PYZus{}B} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dfH.loc[dfH}\PY{l+s+si}{\PYZob{}grpB\PYZcb{}}\PY{l+s+s1}{]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} dfj\PYZus{}D = dfH.loc[dfj[\PYZsq{}Discount\PYZsq{}]\PYZgt{}0] }
         \PY{c+c1}{\PYZsh{} dfj\PYZus{}F = dfH.loc[dfj[\PYZsq{}Discount\PYZsq{}]==0]}
         \PY{n}{df\PYZus{}A}\PY{o}{.}\PY{n}{describe}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{*}\PY{l+m+mi}{25}\PY{p}{,}\PY{n}{df\PYZus{}B}\PY{o}{.}\PY{n}{describe}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}37}]:} (       Quantity  UnitPrice  Discount
          count   838.000   838.000    838.000
          mean     27.110    26.292      0.144
          std      20.771    30.017      0.072
          min       1.000     2.000      0.010
          25\%      12.000    12.500      0.100
          50\%      20.000    18.000      0.150
          75\%      36.000    31.230      0.200
          max     130.000   263.500      0.250,
          '--------------------------------------------------',
                 Quantity  UnitPrice  Discount
          count  1317.000  1317.000    1317.0 
          mean     21.715    26.172       0.0 
          std      17.507    29.717       0.0 
          min       1.000     2.000       0.0 
          25\%      10.000    12.000       0.0 
          50\%      18.000    18.400       0.0 
          75\%      30.000    32.800       0.0 
          max     130.000   263.500       0.0 )
\end{Verbatim}
            
    \hypertarget{aim-2.1-test-for-normality}{%
\subsubsection{Aim 2.1: Test for
Normality}\label{aim-2.1-test-for-normality}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}38}]:} \PY{c+c1}{\PYZsh{} Adding table to collect summary statistics}
         \PY{n}{H1\PYZus{}tests} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Group:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TestName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Test Purpose}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stat}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p\PYZlt{}.05?}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{p}{]}
         \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{normaltest}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}39}]:} \PY{c+c1}{\PYZsh{} H1\PYZus{}tests = [[\PYZsq{}Group:\PYZsq{},\PYZsq{}TestName\PYZsq{},\PYZsq{}Test Purpose\PYZsq{},\PYZsq{}stat\PYZsq{},\PYZsq{}p\PYZsq{}]  ]}
         \PY{c+c1}{\PYZsh{} 2. Testing normality}
         
         \PY{n}{test\PYZus{}purpose} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Normality}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{normaltest}\PY{l+s+s1}{\PYZsq{}}
         
         \PY{n}{arrA} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{df\PYZus{}A}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         \PY{n}{arrB} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{df\PYZus{}B}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
         \PY{n}{statA}\PY{p}{,} \PY{n}{pA} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}
         \PY{n}{statB}\PY{p}{,} \PY{n}{pB} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}
         
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A:stat=}\PY{l+s+si}{\PYZob{}statA\PYZcb{}}\PY{l+s+s1}{, p=}\PY{l+s+si}{\PYZob{}pA\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{B:stat=}\PY{l+s+si}{\PYZob{}statB\PYZcb{}}\PY{l+s+s1}{, p=}\PY{l+s+si}{\PYZob{}pB\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} H1\PYZus{}tests = [[\PYZsq{}Group:\PYZsq{},\PYZsq{}TestName\PYZsq{},\PYZsq{}Test Purpose\PYZsq{},\PYZsq{}stat\PYZsq{},\PYZsq{}p\PYZsq{}]  ]}
         \PY{n}{H1\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A: }\PY{l+s+s1}{\PYZsq{}}\PY{o}{+} \PY{n}{grpA}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,}
                          \PY{n}{test\PYZus{}purpose}\PY{p}{,} \PY{n}{statA}\PY{p}{,}\PY{n}{pA}\PY{p}{,} \PY{n}{pA} \PY{o}{\PYZlt{}}\PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
         
         \PY{n}{H1\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{B: }\PY{l+s+s1}{\PYZsq{}}\PY{o}{+} \PY{n}{grpB}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,}
                          \PY{n}{test\PYZus{}purpose}\PY{p}{,} \PY{n}{statB}\PY{p}{,}\PY{n}{pB}\PY{p}{,} \PY{n}{pB} \PY{o}{\PYZlt{}}\PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} list2df(H1\PYZus{}tests)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
A:stat=261.528012299789, p=1.6214878452829618e-57
B:stat=544.5770045551502, p=5.579637380545965e-119

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}40}]:} \PY{n}{list2df}\PY{p}{(}\PY{n}{H1\PYZus{}tests}\PY{p}{)}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}40}]:}           Group:          TestName  Test Purpose   stat     p   p<.05?
         0   A: ['Discount'] > 0  normaltest   Normality   261.528  0.0   True 
         1  B: ['Discount'] == 0  normaltest   Normality   544.577  0.0   True 
\end{Verbatim}
            
    \hypertarget{aim-2.2-test-for-homogeneity-of-variance}{%
\subsubsection{Aim 2.2 Test for Homogeneity of
Variance}\label{aim-2.2-test-for-homogeneity-of-variance}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}41}]:} \PY{c+c1}{\PYZsh{} 3. Test for homo var}
         \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stats.levene}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{stat}\PY{p}{,}\PY{n}{p} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{,} \PY{n}{arrB}\PY{p}{,} \PY{n}{center}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{n}{H1\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A\PYZam{}B}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Equal Var}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{stat}\PY{p}{,}\PY{n}{p}\PY{p}{,} \PY{n}{p}\PY{o}{\PYZlt{}}\PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \hypertarget{aim-2.3-selecting-the-appropriate-test-to-perform.}{%
\subsubsection{Aim 2.3 Selecting the appropriate test to
perform.}\label{aim-2.3-selecting-the-appropriate-test-to-perform.}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}42}]:} \PY{n}{list2df}\PY{p}{(}\PY{n}{H1\PYZus{}tests}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}42}]:}           Group:           TestName   Test Purpose   stat         p      \textbackslash{}
         0   A: ['Discount'] > 0    normaltest   Normality   261.528   1.621e-57   
         1  B: ['Discount'] == 0    normaltest   Normality   544.577  5.580e-119   
         2                   A\&B  stats.levene   Equal Var    14.833   1.209e-04   
         
            p<.05?  
         0   True   
         1   True   
         2   True   
\end{Verbatim}
            
    \hypertarget{conclusions-so-far}{%
\subsubsection{Conclusions so far\ldots{}}\label{conclusions-so-far}}

\begin{itemize}
\tightlist
\item
  We failed both normaltests and homo variance
\item
  Need non-parametric 2sample ttest

  \begin{itemize}
  \tightlist
  \item
    \href{https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.mannwhitneyu.html}{\textbf{Mann-Whitney
    U test}}
  \end{itemize}
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}43}]:} \PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{} Mann\PYZhy{}Whitney U test}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}44}]:} \PY{c+c1}{\PYZsh{} Mann Whitney U test+}
         \PY{k+kn}{import} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{as} \PY{n+nn}{stats}
         \PY{c+c1}{\PYZsh{} arrA was discounted, arrB was non\PYZhy{}discounted}
         \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stats.mannwhitneyu}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{arrB}\PY{p}{,}\PY{n}{alternative}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{greater}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{stat}\PY{p}{,} \PY{n}{p}
         \PY{n}{H1\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A vs. B}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H1\PYZus{}sig}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{stat}\PY{p}{,}\PY{n}{p}\PY{p}{,} \PY{n}{p}\PY{o}{\PYZlt{}}\PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}45}]:} \PY{n}{list2df}\PY{p}{(}\PY{n}{H1\PYZus{}tests}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}45}]:}           Group:              TestName      Test Purpose     stat     \textbackslash{}
         0   A: ['Discount'] > 0          normaltest   Normality      261.528   
         1  B: ['Discount'] == 0          normaltest   Normality      544.577   
         2                   A\&B        stats.levene   Equal Var       14.833   
         3               A vs. B  stats.mannwhitneyu      H1\_sig   642105.000   
         
                 p      p<.05?  
         0   1.621e-57   True   
         1  5.580e-119   True   
         2   1.209e-04   True   
         3   6.629e-11   True   
\end{Verbatim}
            
    \hypertarget{calculating-effect-size}{%
\paragraph{Calculating Effect Size}\label{calculating-effect-size}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}46}]:} \PY{c+c1}{\PYZsh{} Calculating Cohens d}
         \PY{n}{d} \PY{o}{=} \PY{n}{Cohen\PYZus{}d}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{arrB}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cohen}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s d=}\PY{l+s+s2}{\PYZob{}}\PY{l+s+s2}{round(d,3)\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Append H1\PYZus{}tests and export result. }
         \PY{n}{H1\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A vs. B}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cohen}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s d}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Effect Size}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{d}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         \PY{n}{table\PYZus{}H1\PYZus{}test\PYZus{}results} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{H1\PYZus{}tests}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Export csv if user sets save\PYZus{}for\PYZus{}user to True}
         \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user}\PY{o}{==}\PY{k+kc}{True}\PY{p}{:}
             \PY{n}{table\PYZus{}H1\PYZus{}test\PYZus{}results}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}test\PYZus{}results.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{table\PYZus{}H1\PYZus{}test\PYZus{}results}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}test\PYZus{}results.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{table\PYZus{}H1\PYZus{}test\PYZus{}results}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}\PY{o}{.}\PY{n}{to\PYZus{}html}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}test\PYZus{}results.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         
         \PY{c+c1}{\PYZsh{} Display output                          }
         \PY{n}{table\PYZus{}H1\PYZus{}test\PYZus{}results}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Cohen's d=0.286

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}46}]:}           Group:              TestName      Test Purpose     stat     \textbackslash{}
         0   A: ['Discount'] > 0          normaltest    Normality     261.528   
         1  B: ['Discount'] == 0          normaltest    Normality     544.577   
         2                   A\&B        stats.levene    Equal Var      14.833   
         3               A vs. B  stats.mannwhitneyu       H1\_sig  642105.000   
         4               A vs. B           Cohen's d  Effect Size       0.286   
         
               p      p<.05?  
         0   1.62e-57  True   
         1  5.58e-119  True   
         2   0.000121  True   
         3   6.63e-11  True   
         4         --    --   
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}47}]:} \PY{c+c1}{\PYZsh{} Save table of basic info on central tendency}
         \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{sem}
         \PY{n}{H1\PYZus{}mean\PYZus{}sem} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H\PYZsh{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{std}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
         
         \PY{n}{dataArr}\PY{o}{=}\PY{n}{arrA}
         \PY{n}{H1\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A:}\PY{l+s+si}{\PYZob{}grpA\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,}
                             \PY{n}{sem}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,}\PY{n+nb}{len}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{]}\PY{p}{)}
         
         \PY{n}{dataArr}\PY{o}{=}\PY{n}{arrB}
         \PY{n}{H1\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{B:}\PY{l+s+si}{\PYZob{}grpB\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,}
                             \PY{n}{sem}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,}\PY{n+nb}{len}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{]}\PY{p}{)}
         
         \PY{n}{table\PYZus{}H1\PYZus{}mean\PYZus{}sem} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{H1\PYZus{}mean\PYZus{}sem}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Export csv if user sets save\PYZus{}for\PYZus{}user to True}
         \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user}\PY{o}{==}\PY{k+kc}{True}\PY{p}{:}
             \PY{n}{table\PYZus{}H1\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}mean\PYZus{}sem.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
             \PY{n}{table\PYZus{}H1\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}mean\PYZus{}sem.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
             \PY{n}{table\PYZus{}H1\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{)}\PY{o}{.}\PY{n}{to\PYZus{}html}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}mean\PYZus{}sem.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
         
         \PY{n}{table\PYZus{}H1\PYZus{}mean\PYZus{}sem}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}47}]:}    H\#        Group           mean    sem     std     n 
         0  H1   A:['Discount'] > 0  27.110  0.718  20.759   838
         1  H1  B:['Discount'] == 0  21.715  0.482  17.501  1317
\end{Verbatim}
            
    \hypertarget{interpretation-of-results.}{%
\paragraph{Interpretation of
results.}\label{interpretation-of-results.}}

\textbf{We have a significant Mann Whitney U results, but we have yet to
say anything about} - We should now run post-hoc tests using pairwise
Tukey's tests - Compare all levels of discount in pairwise comparisons

    \hypertarget{h1-aim-3-to-perform-post-hoc-pairwise-comparisons-for-level-of-discount}{%
\subsection{\texorpdfstring{\textbf{\emph{H1, Aim 3: To perform post-hoc
pairwise comparisons for level of
discount}}}{H1, Aim 3: To perform post-hoc pairwise comparisons for level of discount}}\label{h1-aim-3-to-perform-post-hoc-pairwise-comparisons-for-level-of-discount}}

\begin{itemize}
\tightlist
\item
  \textbf{To find out which level of discount is most
  effective/significant.}
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}48}]:} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{sort\PYZus{}index}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}48}]:}       Discount
         0.00    1317  
         0.01       1  
         0.02       2  
         0.03       3  
         0.04       1  
         0.05     185  
         0.06       1  
         0.10     173  
         0.15     157  
         0.20     161  
         0.25     154  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}49}]:} \PY{c+c1}{\PYZsh{} df.info()}
\end{Verbatim}


    \hypertarget{creating-discount-level-variables-for-tukey}{%
\subsubsection{Creating Discount Level Variables for
Tukey}\label{creating-discount-level-variables-for-tukey}}

\begin{itemize}
\tightlist
\item
  Adding LabelEncoding
\item
  Question: do we want to have ``None'' encoded? Not sure. Would need to
  replace the current np.NaN with ``NaN'' first or likely will return
  error
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}50}]:} \PY{c+c1}{\PYZsh{} intervalIndex = pd.IntervalIndex(())}
         \PY{n}{df\PYZus{}cut} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
         
         \PY{n}{new\PYZus{}discounts} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{cut}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mf}{0.05}\PY{p}{,}\PY{l+m+mf}{0.0}\PY{p}{,}
                                                \PY{l+m+mf}{0.05}\PY{p}{,}\PY{l+m+mf}{0.10}\PY{p}{,}
                                                \PY{l+m+mf}{0.15}\PY{p}{,}\PY{l+m+mf}{0.20}\PY{p}{,}
                                                \PY{l+m+mf}{0.25}\PY{p}{,}\PY{l+m+mf}{0.3}\PY{p}{]}\PY{p}{,} \PY{n}{include\PYZus{}lowest}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
         \PY{n}{new\PYZus{}discouts} \PY{o}{=} \PY{n}{new\PYZus{}discounts}\PY{o}{.}\PY{n}{cat}\PY{o}{.}\PY{n}{as\PYZus{}ordered}\PY{p}{(}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
         \PY{n}{df\PYZus{}disc\PYZus{}codes}  \PY{o}{=} \PY{n}{new\PYZus{}discounts}\PY{o}{.}\PY{n}{cat}\PY{o}{.}\PY{n}{codes}
         
         \PY{c+c1}{\PYZsh{} Save code info for later}
         \PY{n}{disc\PYZus{}intervals} \PY{o}{=} \PY{n}{new\PYZus{}discounts}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{p}{)}
         \PY{n}{disc\PYZus{}codes} \PY{o}{=} \PY{n+nb}{sorted}\PY{p}{(}\PY{n}{df\PYZus{}disc\PYZus{}codes}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Save the intervals }
         \PY{n}{labelCodes} \PY{o}{=} \PY{n+nb}{tuple}\PY{p}{(}\PY{n+nb}{zip}\PY{p}{(}\PY{n}{disc\PYZus{}intervals}\PY{p}{,}\PY{n}{disc\PYZus{}codes}\PY{p}{)}\PY{p}{)}
         \PY{n}{labelCodes}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}50}]:} ((Interval(-0.05, 0.0, closed='right'), 0),
          (Interval(0.0, 0.05, closed='right'), 1),
          (Interval(0.05, 0.1, closed='right'), 2),
          (Interval(0.1, 0.15, closed='right'), 3),
          (Interval(0.15, 0.2, closed='right'), 4),
          (Interval(0.2, 0.25, closed='right'), 5))
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}51}]:} \PY{c+c1}{\PYZsh{} Before encoding}
         \PY{n}{df\PYZus{}H1codes} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{df\PYZus{}cut}\PY{p}{,}\PY{n}{new\PYZus{}discounts}\PY{p}{,}\PY{n}{df\PYZus{}disc\PYZus{}codes}\PY{p}{]}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} df\PYZus{}H1codes.info()}
         \PY{c+c1}{\PYZsh{} df\PYZus{}H1codes.Discount.unique()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}52}]:} \PY{c+c1}{\PYZsh{} colnames = list(df\PYZus{}H1codes.columns)}
         \PY{c+c1}{\PYZsh{} colnames[\PYZhy{}1] = \PYZsq{}DiscSize\PYZsq{}}
         \PY{c+c1}{\PYZsh{} df\PYZus{}H1codes.columns = colnames}
         \PY{c+c1}{\PYZsh{} df\PYZus{}H1codes.head()}
\end{Verbatim}


    \hypertarget{use-tukeys-pairwise-multiple-comparison-test.}{%
\subsubsection{Use Tukey's Pairwise Multiple Comparison
test.}\label{use-tukeys-pairwise-multiple-comparison-test.}}

\texttt{statsmodels.stats.multicomp.pairwise\_tukeyhsd}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}53}]:} \PY{c+c1}{\PYZsh{} Importing tukey\PYZsq{}s test}
         \PY{k+kn}{from} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{stats}\PY{n+nn}{.}\PY{n+nn}{multicomp} \PY{k}{import} \PY{n}{pairwise\PYZus{}tukeyhsd} \PY{k}{as} \PY{n}{tukey}
         \PY{n}{int\PYZus{}str} \PY{o}{=} \PY{p}{[}\PY{n+nb}{str}\PY{p}{(}\PY{n}{x}\PY{p}{)} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{new\PYZus{}discounts}\PY{p}{]}
         
         \PY{c+c1}{\PYZsh{} Run tukey\PYZsq{}s test}
         \PY{n}{tukey\PYZus{}results} \PY{o}{=}\PY{n}{tukey}\PY{p}{(}\PY{n}{df\PYZus{}H1codes}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{int\PYZus{}str}\PY{p}{,} \PY{l+m+mf}{0.05}\PY{p}{)}
         
         \PY{n}{table\PYZus{}H1\PYZus{}tukey} \PY{o}{=} \PY{n}{tukey\PYZus{}table}\PY{p}{(}\PY{n}{tukey\PYZus{}results}\PY{p}{)}
         
         \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user}\PY{o}{==}\PY{k+kc}{True}\PY{p}{:}
             \PY{n}{table\PYZus{}H1\PYZus{}tukey}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}tukey.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{table\PYZus{}H1\PYZus{}tukey}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}tukey.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
             \PY{n}{table\PYZus{}H1\PYZus{}tukey}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}\PY{o}{.}\PY{n}{to\PYZus{}html}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}tukey.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{tukey\PYZus{}results}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}53}]:} <class 'statsmodels.iolib.table.SimpleTable'>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}54}]:} \PY{n}{table\PYZus{}H1\PYZus{}tukey}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{table\PYZus{}H1\PYZus{}tukey}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reject}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{k+kc}{True}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}54}]:}       group1       group2     meandiff  lower   upper  reject
         0  (-0.05, 0.0]  (0.0, 0.05]    5.337   1.184   9.489   True 
         2  (-0.05, 0.0]  (0.1, 0.15]    6.667   2.128  11.206   True 
         3  (-0.05, 0.0]  (0.15, 0.2]    5.310   0.822   9.798   True 
         4  (-0.05, 0.0]  (0.2, 0.25]    6.525   1.947  11.103   True 
\end{Verbatim}
            
    \hypertarget{plotting-summary-post-hoc-figure}{%
\subsubsection{Plotting summary post-hoc
figure}\label{plotting-summary-post-hoc-figure}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}55}]:} \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{sem}
         \PY{c+c1}{\PYZsh{} fig = plt.figure()}
         \PY{c+c1}{\PYZsh{} ax = fig.add\PYZus{}subplot(111)}
         
         \PY{n}{H1\PYZus{}means} \PY{o}{=} \PY{n}{df\PYZus{}H1codes}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}
         \PY{n}{H1\PYZus{}sem} \PY{o}{=} \PY{n}{df\PYZus{}H1codes}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sem}\PY{p}{(}\PY{p}{)}
         \PY{n}{H1\PYZus{}std} \PY{o}{=} \PY{n}{df\PYZus{}H1codes}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{p}{)}
         \PY{n}{H1\PYZus{}n} \PY{o}{=}  \PY{n}{df\PYZus{}H1codes}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{count}\PY{p}{(}\PY{p}{)}
         \PY{n}{H1\PYZus{}index} \PY{o}{=} \PY{n}{H1\PYZus{}means}\PY{o}{.}\PY{n}{index}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}56}]:} \PY{n}{H1\PYZus{}groups\PYZus{}mean\PYZus{}sem}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{n}{H1\PYZus{}index}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{H1\PYZus{}means}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{n}{H1\PYZus{}sem}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{n}{H1\PYZus{}n}\PY{p}{\PYZcb{}}
         
         \PY{n}{table\PYZus{}H1\PYZus{}groups\PYZus{}mean\PYZus{}sem}\PY{o}{=}\PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{o}{.}\PY{n}{from\PYZus{}dict}\PY{p}{(}\PY{n}{H1\PYZus{}groups\PYZus{}mean\PYZus{}sem}\PY{p}{,} \PY{n}{orient}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{columns}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{table\PYZus{}H1\PYZus{}groups\PYZus{}mean\PYZus{}sem}
         
         \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user} \PY{o}{==} \PY{k+kc}{True}\PY{p}{:}
             \PY{n}{table\PYZus{}H1\PYZus{}groups\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}groups\PYZus{}mean\PYZus{}sem.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                                     
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}57}]:} \PY{c+c1}{\PYZsh{} H1\PYZus{}means.index}
         \PY{n}{xticklabels} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{0 }\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZlt{}=5 }\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{5\PYZhy{}10 }\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{10\PYZhy{}15 }\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{15\PYZhy{}20 }\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{20\PYZhy{}25 }\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{25\PYZhy{}30 }\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
         \PY{n}{plot\PYZus{}data} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{index}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{n}{H1\PYZus{}index}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{labels}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{n}{xticklabels}\PY{p}{,}
                      \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{n}{H1\PYZus{}means}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{n}{H1\PYZus{}sem}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{std}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{n}{H1\PYZus{}std}\PY{p}{\PYZcb{}}
         
         \PY{n}{df\PYZus{}plot} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{o}{.}\PY{n}{from\PYZus{}dict}\PY{p}{(}\PY{n}{plot\PYZus{}data}\PY{p}{,}\PY{n}{orient}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{columns}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{labels}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
         
         \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount Level Barplot mean sem.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
CategoricalIndex: 7 entries, (-0.05, 0.0] to (0.25, 0.3]
Data columns (total 5 columns):
index     7 non-null category
labels    7 non-null object
mean      6 non-null float64
sem       6 non-null float64
std       6 non-null float64
dtypes: category(1), float64(3), object(1)
memory usage: 462.0+ bytes

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}58}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{use}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{default}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{k}{with} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dark\PYZus{}background}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
         \PY{c+c1}{\PYZsh{}     sns.set\PYZus{}palette(\PYZsq{}viridis\PYZsq{})}
             \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
             \PY{n}{ax} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}subplot}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
             
             \PY{n}{color} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{}2F9AE1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{}90E13A}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{}4F3C8E}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{}E95969}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsh{}FEDF08}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
             
             \PY{n}{err\PYZus{}kws} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ecolor}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{capsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{elinewidth}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{2} \PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{capthick}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{2}\PY{p}{\PYZcb{}}
             
             \PY{n}{fontTitle} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontfamily}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{serif}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontweight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{16}\PY{p}{\PYZcb{}}
             
             \PY{n}{fontAxis} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontfamily}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{serif}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontweight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                        \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{12}\PY{p}{\PYZcb{}}
             
             \PY{n}{ax}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{x} \PY{o}{=} \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{index}\PY{p}{,}\PY{n}{width}\PY{o}{=}\PY{l+m+mf}{0.6}\PY{p}{,} \PY{n}{height} \PY{o}{=} \PY{n}{df\PYZus{}plot}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{yerr} \PY{o}{=} \PY{n}{df\PYZus{}plot}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{error\PYZus{}kw}\PY{o}{=}\PY{n}{err\PYZus{}kws}\PY{p}{,}
                   \PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{white}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{linewidth} \PY{o}{=} \PY{l+m+mi}{2}\PY{p}{,}\PY{n}{color}\PY{o}{=} \PY{n}{color}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{7}\PY{p}{)}
             
             \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantities Purchased By Discount Size}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontTitle}\PY{p}{)}
             \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Average Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
             \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount Size}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
             
         \PY{c+c1}{\PYZsh{}     plt.tight\PYZus{}layout()}
             \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_105_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}59}]:} \PY{c+c1}{\PYZsh{} Save figure of save\PYZus{}for\PYZus{}user is True}
         \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user} \PY{o}{==} \PY{k+kc}{True}\PY{p}{:}
             \PY{c+c1}{\PYZsh{} \PYZsh{}\PYZsh{} Uncomment this cell in order to save the image.*}
             \PY{n}{fig}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{n}{fig\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H1\PYZus{}Avg\PYZus{}quantity\PYZus{}by\PYZus{}discount.png}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{300}\PY{p}{,} \PY{n}{frameon}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}\PY{n}{facecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \hypertarget{conclusions-for-hypothesis-1}{%
\subsection{\texorpdfstring{\textbf{\emph{Conclusions for Hypothesis
1:}}}{Conclusions for Hypothesis 1:}}\label{conclusions-for-hypothesis-1}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}60}]:} \PY{n}{display}\PY{p}{(}\PY{n}{table\PYZus{}H1\PYZus{}test\PYZus{}results}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}
          Group:              TestName      Test Purpose     stat     \
0   A: ['Discount'] > 0          normaltest    Normality     261.528   
1  B: ['Discount'] == 0          normaltest    Normality     544.577   
2                   A&B        stats.levene    Equal Var      14.833   
3               A vs. B  stats.mannwhitneyu       H1_sig  642105.000   
4               A vs. B           Cohen's d  Effect Size       0.286   

      p      p<.05?  
0   1.62e-57  True   
1  5.58e-119  True   
2   0.000121  True   
3   6.63e-11  True   
4         --    --   
    \end{verbatim}

    
    \begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{We first used D'Agostino \& Perason's test (normaltest) to
  check for normal distributions}

  \begin{itemize}
  \tightlist
  \item
    Both groups had p-values very far below our \(\alpha=0.05\) (Rows
    0,1 below)

    \begin{itemize}
    \tightlist
    \item
      We rejecteded the null hypothesis that the groups came from a
      populatiin with a normal distribtuion.
    \end{itemize}
  \end{itemize}
\item
  \textbf{We tested for equal variances using Levene's test.}

  \begin{itemize}
  \tightlist
  \item
    Level's test had a signifcant p-value, so we rejected the hypothesis
    that the groups have equal variances
  \end{itemize}
\item
  \textbf{We then concluded we need a non-parametric 2-sample test, so
  we used the Mann-Whitney U test}.

  \begin{itemize}
  \tightlist
  \item
    Our comparison had a p-value less than .05
  \item
    We reject the null hypothesis that discounts do not affect
    quantities sold.
  \end{itemize}
\end{enumerate}

    \begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{3}
\tightlist
\item
  \textbf{To determine which level of discounts had the largest effect,
  we performed a pairwise multiple comparison Tukey's test}.

  \begin{itemize}
  \tightlist
  \item
    Our results showed that discounts of 0-5\%, 10-15\%, 15-20\%, and
    20-25\% were all significantly different from full price products.

    \begin{itemize}
    \tightlist
    \item
      Except 5-10 \% discount group
    \end{itemize}
  \item
    No discount groups were significantly different than other discount
    groups.
  \end{itemize}
\end{enumerate}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}61}]:} \PY{c+c1}{\PYZsh{} Save the results into a dataframe}
         \PY{n}{table\PYZus{}H1\PYZus{}tukey}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{table\PYZus{}H1\PYZus{}tukey}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reject}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{k+kc}{True}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}61}]:}       group1       group2     meandiff  lower   upper  reject
         0  (-0.05, 0.0]  (0.0, 0.05]    5.337   1.184   9.489   True 
         2  (-0.05, 0.0]  (0.1, 0.15]    6.667   2.128  11.206   True 
         3  (-0.05, 0.0]  (0.15, 0.2]    5.310   0.822   9.798   True 
         4  (-0.05, 0.0]  (0.2, 0.25]    6.525   1.947  11.103   True 
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}62}]:} \PY{c+c1}{\PYZsh{} df\PYZus{}H1codes.info(),}
         \PY{c+c1}{\PYZsh{} dfH.index}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}63}]:} \PY{c+c1}{\PYZsh{} \PYZsh{} Save results to new dataframe}
         \PY{c+c1}{\PYZsh{} df\PYZus{}orig\PYZus{}save = df\PYZus{}H1codes.copy()}
         \PY{c+c1}{\PYZsh{} dfH1\PYZus{}save = dfH.copy()}
\end{Verbatim}


    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{hypothesis-2}{%
\section{\texorpdfstring{\textbf{Hypothesis
2:}}{Hypothesis 2:}}\label{hypothesis-2}}

    \begin{quote}
\textbf{Do customers spend more money if they are buying discounted
items?}
\end{quote}

\begin{itemize}
\item
  \(H_1\): Customers spend more money overall when their order includes
  discounted items.
\item
  \(H_0\): Customers spend the same amount regardless of discounted
  items.
\end{itemize}

\textbf{Specific Aims:}

\begin{itemize}
\item
  \textbf{\emph{Aim 1:To select the proper dataset for analysis, perform
  EDA, and generate data groups for testing.}}

  \begin{itemize}
  \tightlist
  \item
    Used sqlalchemy and pandas.read\_sql\_query()
  \end{itemize}

  \texttt{python\ \ query\ =\ "SELECT*\ FROM\ OrderDetails,\ \ \ \ \ \ \ \ \ \ \ GROUPBY\ discount}
\item
  \textbf{\emph{Aim 2: Select the appropriate t-test based on tests for
  the assumptions of normality and homogeneity of variance.}}

  \begin{enumerate}
  \def\labelenumi{\arabic{enumi}.}
  \tightlist
  \item
    \textbf{Test for Normality}

    \begin{itemize}
    \tightlist
    \item
      D'Agostino-Pearson's normality test
      \texttt{scipy.stats.normaltest}
    \item
      Shapiro-Wilik Test \texttt{scipy.stats.shapiro}
    \end{itemize}
  \item
    \textbf{Test for Homogeneity of Variance}

    \begin{itemize}
    \tightlist
    \item
      Levene's Test \texttt{scipy.stats.levene}
    \end{itemize}
  \item
    \textbf{Choose appropriate test based upon 1. and 2.} 
  \end{enumerate}
\item
  \textbf{\emph{Aim 3: To perform post-hoc painrwise comparison testing
  to determine which level of discounts affect quantity and if any
  discount has a greater effect than the others.}}

  \begin{itemize}
  \tightlist
  \item
    Tukey's test for multiple pairwise comparisons
  \end{itemize}
\end{itemize}

    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{h2-aim-1-to-select-the-proper-dataset-for-analysis-and-generate-data-groups-for-testing.}{%
\subsection{\texorpdfstring{\textbf{\emph{H2, Aim 1 : To select the
proper dataset for analysis and generate data groups for
testing.}}}{H2, Aim 1 : To select the proper dataset for analysis and generate data groups for testing.}}\label{h2-aim-1-to-select-the-proper-dataset-for-analysis-and-generate-data-groups-for-testing.}}

\hypertarget{importing-method}{%
\paragraph{Importing Method}\label{importing-method}}

\begin{itemize}
\tightlist
\item
  Used sqlalchemy to create engine to connect to
  Northwind\_small.sqlite.
\item
  used
  \texttt{pd.read\_sql\_query(\textquotesingle{}SELECT\ *\ FROM\ OrderDetail\textquotesingle{},engine)}
  to directly read db into df
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}64}]:} \PY{c+c1}{\PYZsh{} filepath = \PYZsq{}/content/drive/My Drive/Colab Notebooks/datasets/Northwind\PYZus{}small.sqlite\PYZsq{}}
         \PY{c+c1}{\PYZsh{} filepath = \PYZsq{}Northwind\PYZus{}small.sqlite\PYZsq{}}
         \PY{c+c1}{\PYZsh{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}\PYZhy{}}
         \PY{c+c1}{\PYZsh{} Testing minimal version of prior code}
         \PY{k+kn}{import} \PY{n+nn}{sqlite3}
         \PY{k+kn}{from} \PY{n+nn}{sqlalchemy} \PY{k}{import} \PY{n}{create\PYZus{}engine}\PY{p}{,} \PY{n}{inspect}
         \PY{c+c1}{\PYZsh{} from sqlalchemy import Table, Column, Integer, String, MetaData, ForeignKey,text, Float}
         
         \PY{n}{engine} \PY{o}{=} \PY{n}{create\PYZus{}engine}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sqlite:///}\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n}{filepath}\PY{p}{,}\PY{n}{echo}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{;}
         \PY{n}{inspector} \PY{o}{=} \PY{n}{inspect}\PY{p}{(}\PY{n}{engine}\PY{p}{)}\PY{p}{;}
         \PY{n}{db\PYZus{}tables} \PY{o}{=} \PY{n}{inspector}\PY{o}{.}\PY{n}{get\PYZus{}table\PYZus{}names}\PY{p}{(}\PY{p}{)}\PY{p}{;}
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{db\PYZus{}tables}\PY{p}{)}\PY{p}{;}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
2019-04-12 16:53:20,086 INFO sqlalchemy.engine.base.Engine SELECT CAST('test plain returns' AS VARCHAR(60)) AS anon\_1
2019-04-12 16:53:20,087 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:20,089 INFO sqlalchemy.engine.base.Engine SELECT CAST('test unicode returns' AS VARCHAR(60)) AS anon\_1
2019-04-12 16:53:20,090 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:20,092 INFO sqlalchemy.engine.base.Engine SELECT name FROM sqlite\_master WHERE type='table' ORDER BY name
2019-04-12 16:53:20,092 INFO sqlalchemy.engine.base.Engine ()

 ['Category', 'Customer', 'CustomerCustomerDemo', 'CustomerDemographic', 'Employee', 'EmployeeTerritory', 'Order', 'OrderDetail', 'Product', 'Region', 'Shipper', 'Supplier', 'Territory']

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}65}]:} \PY{c+c1}{\PYZsh{} We want to test hypothesis one, so we need OrderDetail table.}
         \PY{n}{table\PYZus{}to\PYZus{}test} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{OrderDetail}\PY{l+s+s2}{\PYZdq{}}
         \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}sql\PYZus{}query}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{SELECT * FROM OrderDetail}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}  \PY{n}{engine}\PY{p}{)}
         \PY{n}{df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
2019-04-12 16:53:20,101 INFO sqlalchemy.engine.base.Engine SELECT * FROM OrderDetail
2019-04-12 16:53:20,102 INFO sqlalchemy.engine.base.Engine ()

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}65}]:}       Id     OrderId  ProductId  UnitPrice  Quantity  Discount
         0  10248/11   10248      11        14.0        12        0.0  
         1  10248/42   10248      42         9.8        10        0.0  
         2  10248/72   10248      72        34.8         5        0.0  
         3  10249/14   10249      14        18.6         9        0.0  
         4  10249/51   10249      51        42.4        40        0.0  
\end{Verbatim}
            
    \hypertarget{aim-1.1-calculating-order-totals-adding-discount-groups}{%
\subsubsection{Aim 1.1: Calculating order totals, adding discount
groups}\label{aim-1.1-calculating-order-totals-adding-discount-groups}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}66}]:} \PY{c+c1}{\PYZsh{} Apply calc\PYZus{}product\PYZus{}price to every row }
         \PY{n}{df\PYZus{}price} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{calc\PYZus{}product\PYZus{}price}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} df\PYZus{}price[\PYZsq{}order\PYZus{}total\PYZsq{}] = None}
         
         \PY{c+c1}{\PYZsh{} Apply\PYZus{}calc\PYZus{}order\PYZus{}total to every row}
         \PY{n}{df\PYZus{}price} \PY{o}{=} \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{calc\PYZus{}order\PYZus{}total}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{df\PYZus{}price}\PY{p}{)}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}  
         \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}66}]:}       Id     OrderId  ProductId  UnitPrice  Quantity  Discount   price  \textbackslash{}
         0  10248/11   10248      11        14.0        12        0.0     168.0   
         1  10248/42   10248      42         9.8        10        0.0      98.0   
         2  10248/72   10248      72        34.8         5        0.0     174.0   
         3  10249/14   10249      14        18.6         9        0.0     167.4   
         4  10249/51   10249      51        42.4        40        0.0    1696.0   
         
            OnSale  discounted\_order  order\_total  
         0     0            0            440.0     
         1     0            0            440.0     
         2     0            0            440.0     
         3     0            0           1863.4     
         4     0            0           1863.4     
\end{Verbatim}
            
    \hypertarget{aim-1.2-eda-on-dataset}{%
\subsubsection{Aim 1.2: EDA on dataset}\label{aim-1.2-eda-on-dataset}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}67}]:} \PY{k+kn}{import} \PY{n+nn}{warnings}
         \PY{n}{warnings}\PY{o}{.}\PY{n}{filterwarnings}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ignore}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} Define groups}
         \PY{c+c1}{\PYZsh{} A: discounted df\PYZus{}price.groupby(\PYZsq{}discounted\PYZus{}order\PYZsq{}).get\PYZus{}group(1)}
         \PY{c+c1}{\PYZsh{} B: full price df\PYZus{}price.groupbt(\PYZsq{}discounted\PYZus{}order\PYZsq{}).get\PYZus{}group(0)}
         \PY{n}{grpA} \PY{o}{=} \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{discounted\PYZus{}order}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{get\PYZus{}group}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{)}
         \PY{n}{grpB} \PY{o}{=} \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{discounted\PYZus{}order}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{get\PYZus{}group}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{)}
         
         \PY{n}{kwargs} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{title\PYZus{}var}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Order Totals}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}
         \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=}\PY{n}{plot\PYZus{}wide\PYZus{}kde\PYZus{}thin\PYZus{}bar}\PY{p}{(}\PY{n}{grpB}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Full Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{grpA}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discounted}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{o}{*}\PY{o}{*}\PY{n}{kwargs}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Mean of Full Price: 1748.1294774774774
 Mean of Discounted: 1967.286576076555

    \end{Verbatim}

    
    \begin{verbatim}
<Figure size 432x288 with 0 Axes>
    \end{verbatim}

    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_122_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}68}]:} \PY{c+c1}{\PYZsh{} Save figure of save\PYZus{}for\PYZus{}user is True}
         \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user} \PY{o}{==} \PY{k+kc}{True}\PY{p}{:}
             \PY{n}{fig}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{n}{fig\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H2\PYZus{}kde\PYZus{}bar\PYZus{}black.png}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{300}\PY{p}{,}\PY{n}{facecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}69}]:} \PY{c+c1}{\PYZsh{} 1 \PYZhy{} Separating groups from dfH (dataframeHypothesis)}
         \PY{n}{df\PYZus{}temp} \PY{o}{=} \PY{n}{df\PYZus{}price}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{discounted\PYZus{}order}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
         
         \PY{n}{unique\PYZus{}orders} \PY{o}{=} \PY{n}{df\PYZus{}temp}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{p}{)}
         
         \PY{n+nb}{len}\PY{p}{(}\PY{n}{unique\PYZus{}orders}\PY{p}{)}
         \PY{n}{keep\PYZus{}me}\PY{o}{=}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{discounted\PYZus{}order}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
         
         \PY{k}{for} \PY{n}{u} \PY{o+ow}{in} \PY{n}{unique\PYZus{}orders}\PY{p}{:}
         \PY{c+c1}{\PYZsh{}     grouped = dfH.groupby(\PYZsq{}OrderId\PYZsq{}).get\PYZus{}group(u)}
         \PY{c+c1}{\PYZsh{}     keep\PYZus{}me.append(grouped.iloc[0,:])}
             \PY{n}{grouped\PYZus{}idx} \PY{o}{=} \PY{n}{df\PYZus{}temp}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{get\PYZus{}group}\PY{p}{(}\PY{n}{u}\PY{p}{)}\PY{o}{.}\PY{n}{index}
             \PY{n}{keep\PYZus{}me}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{df\PYZus{}temp}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{grouped\PYZus{}idx}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}\PY{p}{)}
         \PY{n}{dfH} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{keep\PYZus{}me}\PY{p}{)}
         \PY{n}{dfH}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}69}]:}     OrderId  order\_total  discounted\_order
         0   10248.0     440.00           0.0      
         3   10249.0    1863.40           0.0      
         5   10250.0    1552.60           1.0      
         8   10251.0     654.06           1.0      
         11  10252.0    3597.90           1.0      
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}70}]:} \PY{n}{dfH}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{discounted\PYZus{}order}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{discounted\PYZus{}order}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{describe}\PY{p}{(}\PY{p}{)}\PY{c+c1}{\PYZsh{}.stack()}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}70}]:}                  order\_total                                              \textbackslash{}
                             count       mean      std     min    25\%      50\%      
         discounted\_order                                                           
         0.0                  450.0    1375.332  1792.781  12.5  360.25   810.250   
         1.0                  380.0    1702.352  1892.448  23.8  587.75  1244.885   
         
                                             
                            75\%      max     
         discounted\_order                    
         0.0               1731.67  15810.0  
         1.0               2027.91  16387.5  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}71}]:} \PY{c+c1}{\PYZsh{}Adding group definitions}
         \PY{n}{grpA} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{[}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{discounted\PYZus{}order}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{] == True}\PY{l+s+s2}{\PYZdq{}}
         \PY{n}{grpB} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{[}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{discounted\PYZus{}order}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{] == False}\PY{l+s+s2}{\PYZdq{}}
         
         \PY{c+c1}{\PYZsh{} Using eval to create df\PYZus{}A and df\PYZus{}B; will allow us to fill in our results }
         \PY{c+c1}{\PYZsh{} with the exact definitions of Group A and Group B}
         \PY{n}{df\PYZus{}A} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dfH.loc[dfH}\PY{l+s+si}{\PYZob{}grpA\PYZcb{}}\PY{l+s+s1}{]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{df\PYZus{}B} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dfH.loc[dfH}\PY{l+s+si}{\PYZob{}grpB\PYZcb{}}\PY{l+s+s1}{]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} dfj\PYZus{}D = dfH.loc[dfj[\PYZsq{}Discount\PYZsq{}]\PYZgt{}0] }
         \PY{c+c1}{\PYZsh{} dfj\PYZus{}F = dfH.loc[dfj[\PYZsq{}Discount\PYZsq{}]==0]}
         \PY{n}{df\PYZus{}A}\PY{o}{.}\PY{n}{describe}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{*}\PY{l+m+mi}{25}\PY{p}{,}\PY{n}{df\PYZus{}B}\PY{o}{.}\PY{n}{describe}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}71}]:} (        OrderId   order\_total  discounted\_order
          count    380.000     380.000         380.0     
          mean   10659.555    1702.352           1.0     
          std      234.869    1892.448           0.0     
          min    10250.000      23.800           1.0     
          25\%    10460.750     587.750           1.0     
          50\%    10649.000    1244.885           1.0     
          75\%    10854.250    2027.910           1.0     
          max    11077.000   16387.500           1.0     ,
          '--------------------------------------------------',
                  OrderId   order\_total  discounted\_order
          count    450.000     450.000         450.0     
          mean   10664.987    1375.332           0.0     
          std      244.019    1792.781           0.0     
          min    10248.000      12.500           0.0     
          25\%    10447.250     360.250           0.0     
          50\%    10678.500     810.250           0.0     
          75\%    10884.500    1731.670           0.0     
          max    11073.000   15810.000           0.0     )
\end{Verbatim}
            
    \hypertarget{h2-aim-2-select-the-appropriate-t-test-based-on-tests-for-the-assumptions-of-normality-and-homogeneity-of-variance.}{%
\subsection{\texorpdfstring{\textbf{\emph{H2, Aim 2: Select the
appropriate t-test based on tests for the assumptions of normality and
homogeneity of
variance.}}}{H2, Aim 2: Select the appropriate t-test based on tests for the assumptions of normality and homogeneity of variance.}}\label{h2-aim-2-select-the-appropriate-t-test-based-on-tests-for-the-assumptions-of-normality-and-homogeneity-of-variance.}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}72}]:} \PY{c+c1}{\PYZsh{} Adding table to collect summary statistics}
         \PY{n}{H2\PYZus{}tests} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Group:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TestName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Test Purpose}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stat}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p\PYZlt{}.05?}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}  \PY{p}{]}
\end{Verbatim}


    \hypertarget{aim-2.1-test-for-normality}{%
\subsubsection{Aim 2.1: Test for
Normality}\label{aim-2.1-test-for-normality}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}73}]:} \PY{c+c1}{\PYZsh{} 2. Testing normality}
         \PY{n}{test\PYZus{}purpose} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Normality}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{normaltest}\PY{l+s+s1}{\PYZsq{}}
         
         \PY{n}{arrA} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{df\PYZus{}A}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         \PY{n}{arrB} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{df\PYZus{}B}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
         \PY{n}{statA}\PY{p}{,} \PY{n}{pA} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}
         \PY{n}{statB}\PY{p}{,} \PY{n}{pB} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}
         
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A:stat=}\PY{l+s+si}{\PYZob{}statA\PYZcb{}}\PY{l+s+s1}{, p=}\PY{l+s+si}{\PYZob{}pA\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{B:stat=}\PY{l+s+si}{\PYZob{}statB\PYZcb{}}\PY{l+s+s1}{, p=}\PY{l+s+si}{\PYZob{}pB\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{n}{H2\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A: }\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n}{grpA}\PY{p}{,}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,}\PY{n}{test\PYZus{}purpose}\PY{p}{,}\PY{n}{statA}\PY{p}{,}\PY{n}{pA}\PY{p}{,}\PY{n}{pA}\PY{o}{\PYZlt{}}\PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
         \PY{n}{H2\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{B: }\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n}{grpB}\PY{p}{,}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,}\PY{n}{test\PYZus{}purpose}\PY{p}{,}\PY{n}{statB}\PY{p}{,}\PY{n}{pB}\PY{p}{,}\PY{n}{pB}\PY{o}{\PYZlt{}}\PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} list2df(H1\PYZus{}tests)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
A:stat=309.8566632385119, p=5.193743376505954e-68
B:stat=368.4093987857893, p=1.0021102701214462e-80

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}74}]:} \PY{n}{list2df}\PY{p}{(}\PY{n}{H2\PYZus{}tests}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}74}]:}                 Group:                TestName  Test Purpose   stat    \textbackslash{}
         0   A: ['discounted\_order'] == True  normaltest   Normality   309.857   
         1  B: ['discounted\_order'] == False  normaltest   Normality   368.409   
         
                p      p<.05?  
         0  5.194e-68   True   
         1  1.002e-80   True   
\end{Verbatim}
            
    \hypertarget{aim-2.2-test-for-homogeneity-of-variance}{%
\subsubsection{Aim 2.2 Test for Homogeneity of
Variance}\label{aim-2.2-test-for-homogeneity-of-variance}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}75}]:} \PY{c+c1}{\PYZsh{} 3. Test for homo var}
         \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stats.levene}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{stat}\PY{p}{,}\PY{n}{p} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{arrB}\PY{p}{,}\PY{n}{center}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{n}{H2\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A\PYZam{}B}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Equal Var}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{stat}\PY{p}{,}\PY{n}{p}\PY{p}{,}\PY{n}{p}\PY{o}{\PYZlt{}}\PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}76}]:} \PY{n}{list2df}\PY{p}{(}\PY{n}{H2\PYZus{}tests}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}76}]:}                 Group:                 TestName   Test Purpose   stat    \textbackslash{}
         0   A: ['discounted\_order'] == True    normaltest   Normality   309.857   
         1  B: ['discounted\_order'] == False    normaltest   Normality   368.409   
         2                               A\&B  stats.levene   Equal Var     0.714   
         
                p      p<.05?  
         0  5.194e-68    True  
         1  1.002e-80    True  
         2  3.983e-01   False  
\end{Verbatim}
            
    \hypertarget{aim-2.3-selecting-the-appropriate-test-to-perform.}{%
\subsubsection{Aim 2.3 Selecting the appropriate test to
perform.}\label{aim-2.3-selecting-the-appropriate-test-to-perform.}}

\begin{itemize}
\tightlist
\item
  We failed both normaltests
\item
  We passed Levene's test for homo. of variance
\item
  Need non-parametric 2sample ttest

  \begin{itemize}
  \tightlist
  \item
    \href{https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.mannwhitneyu.html}{\textbf{Mann-Whitney
    U test}}
  \end{itemize}
\end{itemize}

    \hypertarget{mann-whitney-u-test}{%
\paragraph{Mann-Whitney U test}\label{mann-whitney-u-test}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}77}]:} \PY{c+c1}{\PYZsh{} Mann Whitney U test+}
         \PY{k+kn}{import} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{as} \PY{n+nn}{stats}
         \PY{c+c1}{\PYZsh{} arrA was discounted, arrB was non\PYZhy{}discounted}
         \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stats.mannwhitneyu}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{arrB}\PY{p}{,}\PY{n}{alternative}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{greater}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{stat}\PY{p}{,} \PY{n}{p}
         \PY{n}{H2\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A vs. B}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H2\PYZus{}sig}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{stat}\PY{p}{,}\PY{n}{p}\PY{p}{,}\PY{n}{p}\PY{o}{\PYZlt{}}\PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}78}]:} \PY{n}{list2df}\PY{p}{(}\PY{n}{H2\PYZus{}tests}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}78}]:}                 Group:                    TestName      Test Purpose  \textbackslash{}
         0   A: ['discounted\_order'] == True          normaltest   Normality    
         1  B: ['discounted\_order'] == False          normaltest   Normality    
         2                               A\&B        stats.levene   Equal Var    
         3                           A vs. B  stats.mannwhitneyu      H2\_sig    
         
               stat         p      p<.05?  
         0     309.857  5.194e-68    True  
         1     368.409  1.002e-80    True  
         2       0.714  3.983e-01   False  
         3  102021.000  7.901e-07    True  
\end{Verbatim}
            
    \hypertarget{calculating-effect-size}{%
\paragraph{Calculating Effect Size}\label{calculating-effect-size}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}79}]:} \PY{c+c1}{\PYZsh{} Calculating Cohens d}
         \PY{n}{d} \PY{o}{=} \PY{n}{Cohen\PYZus{}d}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{arrB}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cohen}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s d=}\PY{l+s+s2}{\PYZob{}}\PY{l+s+s2}{round(d,3)\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{H2\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A vs. B}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cohen}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s d}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Effect Size}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{d}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         \PY{n}{table\PYZus{}H2\PYZus{}test\PYZus{}results} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{H2\PYZus{}tests}\PY{p}{)}
         
         \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user}\PY{o}{==}\PY{k+kc}{True}\PY{p}{:}
             \PY{n}{table\PYZus{}H2\PYZus{}test\PYZus{}results}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H2\PYZus{}test\PYZus{}results.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{table\PYZus{}H2\PYZus{}test\PYZus{}results}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H2\PYZus{}test\PYZus{}results.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
             \PY{n}{table\PYZus{}H2\PYZus{}test\PYZus{}results}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}\PY{o}{.}\PY{n}{to\PYZus{}html}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H2\PYZus{}test\PYZus{}results.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Cohen's d=0.178

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}80}]:} \PY{c+c1}{\PYZsh{} Save table of basic info on central tendency}
         \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{sem}
         \PY{n}{H2\PYZus{}mean\PYZus{}sem} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H\PYZsh{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{std}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
         
         \PY{n}{dataArr}\PY{o}{=}\PY{n}{arrA}
         \PY{n}{H2\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A:}\PY{l+s+si}{\PYZob{}grpA\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,}\PY{n}{sem}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,}\PY{n+nb}{len}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{]}\PY{p}{)}
         
         \PY{n}{dataArr}\PY{o}{=}\PY{n}{arrB}
         \PY{n}{H2\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{B:}\PY{l+s+si}{\PYZob{}grpB\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,}\PY{n}{sem}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{,}\PY{n+nb}{len}\PY{p}{(}\PY{n}{dataArr}\PY{p}{)}\PY{p}{]}\PY{p}{)}
         
         \PY{n}{table\PYZus{}H2\PYZus{}mean\PYZus{}sem} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{H2\PYZus{}mean\PYZus{}sem}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Export csv if user sets save\PYZus{}for\PYZus{}user to True}
         \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user}\PY{o}{==}\PY{k+kc}{True}\PY{p}{:}
             \PY{n}{table\PYZus{}H2\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H2\PYZus{}mean\PYZus{}sem.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
             \PY{n}{table\PYZus{}H2\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H2\PYZus{}mean\PYZus{}sem.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} 
         
             \PY{n}{table\PYZus{}H2\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{)}\PY{o}{.}\PY{n}{to\PYZus{}html}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H2\PYZus{}mean\PYZus{}sem.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
         
         \PY{c+c1}{\PYZsh{} table\PYZus{}H2\PYZus{}mean\PYZus{}sem}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}81}]:} \PY{n}{display}\PY{p}{(}\PY{n}{table\PYZus{}H2\PYZus{}test\PYZus{}results}\PY{p}{)}
         \PY{n}{display}\PY{p}{(}\PY{n}{table\PYZus{}H2\PYZus{}mean\PYZus{}sem}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}
                Group:                    TestName      Test Purpose  \
0   A: ['discounted_order'] == True          normaltest    Normality   
1  B: ['discounted_order'] == False          normaltest    Normality   
2                               A&B        stats.levene    Equal Var   
3                           A vs. B  stats.mannwhitneyu       H2_sig   
4                           A vs. B           Cohen's d  Effect Size   

      stat        p     p<.05?  
0     309.857  5.19e-68   True  
1     368.409     1e-80   True  
2       0.714     0.398  False  
3  102021.000   7.9e-07   True  
4       0.178        --     --  
    \end{verbatim}

    
    
    \begin{verbatim}
   H#              Group                  mean      sem      std     n 
0  H2   A:['discounted_order'] == True  1702.352  97.081  1889.956  380
1  H2  B:['discounted_order'] == False  1375.332  84.513  1790.788  450
    \end{verbatim}

    
    \hypertarget{conclusions-for-hypothesis-2}{%
\subsubsection{Conclusions for Hypothesis
2:}\label{conclusions-for-hypothesis-2}}

\begin{itemize}
\item
  We reject the null hypothesis that there is no effect of an order
  containing discounted items on the order total.
\item
  Therefore, we have found evidence that customers spend more money when
  they are buying at least 1 discounted item.
\item
  However, Cohen's d indicates it a small effect size.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}82}]:} \PY{c+c1}{\PYZsh{} Plot the re\PYZhy{}sampled data}
         
         \PY{c+c1}{\PYZsh{} \PYZsh{} IF want to take smaller sample from population:}
         
         \PY{c+c1}{\PYZsh{} pop\PYZus{}samp\PYZus{}disc = np.random.choice(pop\PYZus{}samp\PYZus{}disc,1000)}
         \PY{c+c1}{\PYZsh{} pop\PYZus{}samp\PYZus{}full = np.random.choice(pop\PYZus{}samp\PYZus{}full, 1000)}
         \PY{k}{with} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{context}\PY{p}{(}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{tableau\PYZhy{}colorblind10}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{p}{:}
             \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
             
             \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Order Total  of Orders with Discounted Items vs Full Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             
             \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{alpha} \PY{o}{=} \PY{l+m+mf}{0.5}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discounted}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{arrB}\PY{p}{,}\PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{black}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha} \PY{o}{=} \PY{l+m+mf}{0.5}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Full Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
             \PY{c+c1}{\PYZsh{} Adding annotations}
             \PY{n}{meanD} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}
             \PY{n}{meanS} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}
             
             \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{meanD}\PY{p}{,} \PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discounted Mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{text}\PY{p}{(}\PY{n}{meanD}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1000}\PY{p}{,}\PY{l+m+mi}{165}\PY{p}{,}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mean:}\PY{l+s+si}{\PYZob{}meanD\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
             
             \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{meanS}\PY{p}{,}\PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Full Price Mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{text}\PY{p}{(}\PY{n}{meanS}\PY{o}{+}\PY{l+m+mi}{500}\PY{p}{,}\PY{l+m+mi}{165}\PY{p}{,}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mean:}\PY{l+s+si}{\PYZob{}meanS\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
         
         
             \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Run normality testing}
         \PY{c+c1}{\PYZsh{} stat,p = normaltest(pop\PYZus{}samp\PYZus{}full)}
         \PY{c+c1}{\PYZsh{} print(f\PYZsq{}Normality: stat =\PYZob{}stat\PYZcb{}, p = \PYZob{}p\PYZcb{}\PYZsq{})}
         
         \PY{c+c1}{\PYZsh{} Run ttest}
         \PY{c+c1}{\PYZsh{} tstat,tp = stats.ttest\PYZus{}ind(arrA, arrB)}
         \PY{c+c1}{\PYZsh{} print(f\PYZsq{}T\PYZhy{}test: stat =\PYZob{}tstat\PYZcb{}, p = \PYZob{}tp\PYZcb{}\PYZsq{})\PYZsh{}tstat,tp}
         \PY{c+c1}{\PYZsh{} ax.text(}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_144_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{hypothesis-3}{%
\section{\texorpdfstring{\textbf{Hypothesis
3}}{Hypothesis 3}}\label{hypothesis-3}}

\begin{quote}
\textbf{Does the time of year affect quantity of items sold?}
\end{quote}

\begin{itemize}
\tightlist
\item
  \(H_1\) = The month an order is placed relates to either a higher or
  lower mean quantity of items sold.
\item
  \(H_0\) = The month of an order has no affect on the mean quantity of
  items sold.
\end{itemize}

    \hypertarget{h3-aim-1.1-to-select-the-proper-dataset-for-analyiss-and-generate-data-groups-for-testing.}{%
\subsection{\texorpdfstring{\textbf{\emph{H3, Aim 1.1 : To select the
proper dataset for analyiss and generate data groups for
testing.}}}{H3, Aim 1.1 : To select the proper dataset for analyiss and generate data groups for testing.}}\label{h3-aim-1.1-to-select-the-proper-dataset-for-analyiss-and-generate-data-groups-for-testing.}}

\hypertarget{importing-method}{%
\paragraph{Importing Method}\label{importing-method}}

\begin{itemize}
\tightlist
\item
  Use sqlalchemy to create engine to connect to Northwind\_small.sqlite.
  \texttt{python\ df\_ord\ =\ pd.read\_sql\_query("SELECT\ *\ FROM\ OrderDetail\ JOIN\ {[}Order{]}\ \ ON\ {[}Order{]}.Id\ =\ OrderDetail.OrderId",\ engine)}
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}83}]:} \PY{c+c1}{\PYZsh{} Import librairies}
         \PY{k+kn}{import} \PY{n+nn}{sqlalchemy}
         \PY{k+kn}{from} \PY{n+nn}{sqlalchemy} \PY{k}{import} \PY{n}{create\PYZus{}engine}
         \PY{k+kn}{from} \PY{n+nn}{sqlalchemy}\PY{n+nn}{.}\PY{n+nn}{orm} \PY{k}{import} \PY{n}{Session}\PY{p}{,} \PY{n}{sessionmaker}
         
         \PY{c+c1}{\PYZsh{} from google.colab import drive}
         \PY{c+c1}{\PYZsh{} drive.mount(\PYZsq{}/content/drive/\PYZsq{}, force\PYZus{}remount=True)}
         
         \PY{c+c1}{\PYZsh{} filepath = \PYZsq{}/content/drive/My Drive/Colab Notebooks/datasets/Northwind\PYZus{}small.sqlite\PYZsq{}}
         \PY{n}{filepath} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Northwind\PYZus{}small.sqlite}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{engine} \PY{o}{=} \PY{n}{create\PYZus{}engine}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sqlite:///}\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n}{filepath}\PY{p}{,}\PY{n}{echo}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
         \PY{n}{inspector} \PY{o}{=} \PY{n}{inspect}\PY{p}{(}\PY{n}{engine}\PY{p}{)}\PY{p}{;}
         
         \PY{c+c1}{\PYZsh{} df\PYZus{}employee = pd.read\PYZus{}sql\PYZus{}query(\PYZdq{}SELECT Id, Title, LastName, HireDate , BirthDate  FROM [EMPLOYEE]\PYZdq{}, engine )}
         \PY{c+c1}{\PYZsh{} df\PYZus{}cust\PYZus{}ord = pd.read\PYZus{}sql\PYZus{}query(\PYZdq{}SELECT *FROM [Order] JOIN [Customer] ON [Customer].Id = [Order].CustomerId\PYZdq{}, engine)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{inspector}\PY{o}{.}\PY{n}{get\PYZus{}table\PYZus{}names}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
2019-04-12 16:53:37,974 INFO sqlalchemy.engine.base.Engine SELECT CAST('test plain returns' AS VARCHAR(60)) AS anon\_1
2019-04-12 16:53:37,976 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:37,978 INFO sqlalchemy.engine.base.Engine SELECT CAST('test unicode returns' AS VARCHAR(60)) AS anon\_1
2019-04-12 16:53:37,980 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:37,982 INFO sqlalchemy.engine.base.Engine SELECT name FROM sqlite\_master WHERE type='table' ORDER BY name
2019-04-12 16:53:37,983 INFO sqlalchemy.engine.base.Engine ()
['Category', 'Customer', 'CustomerCustomerDemo', 'CustomerDemographic', 'Employee', 'EmployeeTerritory', 'Order', 'OrderDetail', 'Product', 'Region', 'Shipper', 'Supplier', 'Territory']

    \end{Verbatim}

    \hypertarget{extract-sql-tables-and-cleancombine}{%
\subsubsection{Extract SQL tables and
clean/combine}\label{extract-sql-tables-and-cleancombine}}

\begin{itemize}
\tightlist
\item
  Original extract used for analysis.
\item
  Secondary method was added to export a larger csv for external
  plotting.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}84}]:} \PY{c+c1}{\PYZsh{} Extractiong of specific, required data from database. }
         \PY{n}{df\PYZus{}ord} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}sql\PYZus{}query}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{SELECT * FROM OrderDetail JOIN [Order]  ON [Order].Id = OrderDetail.OrderId}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{engine}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} df\PYZus{}ord = pd.concat([df\PYZus{}ord, df\PYZus{}employee[\PYZsq{}Title\PYZsq{}]], axis=1)}
         \PY{n}{df\PYZus{}ord}\PY{o}{.}\PY{n}{columns}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
2019-04-12 16:53:37,993 INFO sqlalchemy.engine.base.Engine SELECT * FROM OrderDetail JOIN [Order]  ON [Order].Id = OrderDetail.OrderId
2019-04-12 16:53:37,994 INFO sqlalchemy.engine.base.Engine ()

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}84}]:} Index(['Id', 'OrderId', 'ProductId', 'UnitPrice', 'Quantity', 'Discount', 'Id',
                'CustomerId', 'EmployeeId', 'OrderDate', 'RequiredDate', 'ShippedDate',
                'ShipVia', 'Freight', 'ShipName', 'ShipAddress', 'ShipCity',
                'ShipRegion', 'ShipPostalCode', 'ShipCountry'],
               dtype='object')
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}85}]:} \PY{c+c1}{\PYZsh{} Dropping unwanted columns}
         \PY{n}{df\PYZus{}ord}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShippedDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{RequiredDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipVia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipAddress}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{RequiredDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShippedDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShippedDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipCity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipCountry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipRegion}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Freight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} relabel the Id column so they have unique names}
         \PY{n}{df\PYZus{}ord}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ProductId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{UnitPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{CustomerId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EmployeeId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                           \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipPostalCode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}


    \hypertarget{calculating-new-features-based-on-unit-pricing-df_price}{%
\paragraph{Calculating new features based on unit pricing
(df\_price)}\label{calculating-new-features-based-on-unit-pricing-df_price}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}86}]:} \PY{c+c1}{\PYZsh{}Apply calc\PYZus{}product\PYZus{}price to every row }
         \PY{n}{df\PYZus{}price} \PY{o}{=} \PY{n}{df\PYZus{}ord}\PY{o}{.}\PY{n}{apply}\PY{p}{(}
             \PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{calc\PYZus{}product\PYZus{}price}\PY{p}{(}
                 \PY{n}{x}\PY{p}{)}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Apply\PYZus{}calc\PYZus{}order\PYZus{}total to every row}
         \PY{n}{df\PYZus{}price} \PY{o}{=} \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{apply}\PY{p}{(}
             \PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{calc\PYZus{}order\PYZus{}total}\PY{p}{(}
                 \PY{n}{x}\PY{p}{,}\PY{n}{df\PYZus{}price}\PY{p}{)}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}  
         
         \PY{c+c1}{\PYZsh{} Display output}
         \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{describe}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}86}]:}        ProductId  UnitPrice  Quantity  Discount  OrderId  EmployeeId   price   \textbackslash{}
         count   2155.0     2155.0     2155.0    2155.0    2155.0    2155.0     2155.0   
         mean      41.0       26.0       24.0       0.0   10659.0       4.0      587.0   
         std       22.0       30.0       19.0       0.0     241.0       2.0      969.0   
         min        1.0        2.0        1.0       0.0   10248.0       1.0        5.0   
         25\%       22.0       12.0       10.0       0.0   10451.0       2.0      147.0   
         50\%       41.0       18.0       20.0       0.0   10657.0       4.0      338.0   
         75\%       60.0       32.0       30.0       0.0   10862.0       7.0      656.0   
         max       77.0      264.0      130.0       0.0   11077.0       9.0    15810.0   
         
                OnSale  discounted\_order  order\_total  
         count  2155.0       2155.0          2155.0    
         mean      0.0          0.0          1854.0    
         std       0.0          0.0          1961.0    
         min       0.0          0.0            12.0    
         25\%       0.0          0.0           634.0    
         50\%       0.0          0.0          1337.0    
         75\%       1.0          1.0          2222.0    
         max       1.0          1.0         16388.0    
\end{Verbatim}
            
    \hypertarget{adding-datetime-columns-for-day-of-week-and-month}{%
\paragraph{Adding Datetime columns for day of week and
month}\label{adding-datetime-columns-for-day-of-week-and-month}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}87}]:} \PY{c+c1}{\PYZsh{}convert dates to datetime}
         \PY{n}{df\PYZus{}price}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}
                             \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{OrderDate} \PY{p}{)}
         
         \PY{p}{(}\PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{OrderDate}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{p}{)}\PY{p}{,}
          \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{OrderDate}\PY{o}{.}\PY{n}{sort\PYZus{}values}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{c+c1}{\PYZsh{} seeing date range}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}87}]:} (Timestamp('2012-07-04 00:00:00'), Timestamp('2014-05-06 00:00:00'))
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}88}]:} \PY{c+c1}{\PYZsh{} create columns for day of week and month}
         \PY{n}{df\PYZus{}price}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}
                             \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{OrderDate}\PY{p}{)} 
         
         \PY{n}{df\PYZus{}price}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{week\PYZus{}day}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}price}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{dayofweek}
         \PY{n}{df\PYZus{}price}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}price}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{month}
         
         \PY{c+c1}{\PYZsh{} df\PYZus{}price.info()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}89}]:} \PY{c+c1}{\PYZsh{} Defining criteria for dividing the calendar yaer}
         \PY{n}{criteria} \PY{o}{=} \PY{n}{df\PYZus{}price}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{l+m+mi}{6} \PY{c+c1}{\PYZsh{} boolean selector used to select parts of df for possible plotting options}
         
         \PY{c+c1}{\PYZsh{}drop duplicate orders based on OrderId to not inflate or deflate order\PYZus{}total mean}
         \PY{c+c1}{\PYZsh{} split in two for exploring subsets}
         \PY{n}{df\PYZus{}month6} \PY{o}{=} \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{criteria}\PY{p}{,}
                                  \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                   \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                                 \PY{p}{]}\PY{o}{.}\PY{n}{drop\PYZus{}duplicates}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
         \PY{n}{df\PYZus{}month12} \PY{o}{=} \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{o}{\PYZti{}}\PY{n}{criteria}\PY{p}{,}
                                   \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                                  \PY{p}{]}\PY{o}{.}\PY{n}{drop\PYZus{}duplicates}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{}Did use this variable}
         \PY{n}{total\PYZus{}order} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}
                         \PY{p}{[}\PY{n}{df\PYZus{}month6}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
                         \PY{n}{df\PYZus{}month12}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} verifying correct lengths}
         \PY{n+nb}{len}\PY{p}{(}\PY{n}{total\PYZus{}order}\PY{p}{)} \PY{o}{==} \PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{df\PYZus{}month6}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)} 
                            \PY{o}{+} \PY{n+nb}{len}\PY{p}{(}\PY{n}{df\PYZus{}month12}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}89}]:} True
\end{Verbatim}
            
    \hypertarget{selecting-out-final-working-dataframe-for-testing.}{%
\paragraph{Selecting out final working dataframe for
testing.}\label{selecting-out-final-working-dataframe-for-testing.}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}90}]:} \PY{n}{df\PYZus{}year} \PY{o}{=} \PY{n}{df\PYZus{}price}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,}
                                \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                 \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                                \PY{p}{]}\PY{o}{.}\PY{n}{drop\PYZus{}duplicates}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         \PY{n}{df\PYZus{}year}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
Int64Index: 830 entries, 0 to 2130
Data columns (total 4 columns):
month          830 non-null int64
order\_total    830 non-null float64
Discount       830 non-null float64
OrderId        830 non-null int64
dtypes: float64(2), int64(2)
memory usage: 32.4 KB

    \end{Verbatim}

    \hypertarget{create-a-dictionary-containing-keys-and-values-representing-months-to-assist-in-plotting-and-testing}{%
\paragraph{Create a dictionary containing keys and values representing
months to assist in plotting and
testing}\label{create-a-dictionary-containing-keys-and-values-representing-months-to-assist-in-plotting-and-testing}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}91}]:} \PY{c+c1}{\PYZsh{}make list of month names (strings) for labels}
         \PY{n}{months} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{jan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{feb}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                   \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mar}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{apr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                   \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{may}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{jun}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                   \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{jul}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{aug}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                   \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sep}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{oct}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                   \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nov}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dec}\PY{l+s+s1}{\PYZsq{}}
                  \PY{p}{]}
         \PY{c+c1}{\PYZsh{}make corresponding list of integers from 1 = \PYZsq{}jan\PYZsq{} through 12 = \PYZsq{}dec\PYZsq{}}
         \PY{n}{month\PYZus{}code} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{n+nb}{len}\PY{p}{(}\PY{n}{months}\PY{p}{)}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}
         \PY{n}{month\PYZus{}dict} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{n+nb}{zip}\PY{p}{(}\PY{n}{month\PYZus{}code}\PY{p}{,}\PY{n}{months}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{} zip the two into a dictionary}
         \PY{n}{month\PYZus{}dict}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}91}]:} dict\_items([(1, 'jan'), (2, 'feb'), (3, 'mar'), (4, 'apr'), (5, 'may'), (6, 'jun'), (7, 'jul'), (8, 'aug'), (9, 'sep'), (10, 'oct'), (11, 'nov'), (12, 'dec')])
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}92}]:} \PY{c+c1}{\PYZsh{} Add month name}
         \PY{k}{for} \PY{n}{k}\PY{p}{,}\PY{n}{v} \PY{o+ow}{in} \PY{n}{month\PYZus{}dict}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
               \PY{n}{df\PYZus{}year}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{(}\PY{n}{df\PYZus{}year}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{n}{k}\PY{p}{)}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{v} 
                 
         \PY{n}{df\PYZus{}yearM} \PY{o}{=} \PY{n}{df\PYZus{}year}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
         \PY{n}{df\PYZus{}yearM}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{3}\PY{p}{)}\PY{p}{,} \PY{n}{df\PYZus{}yearM}\PY{o}{.}\PY{n}{tail}\PY{p}{(}\PY{l+m+mi}{3}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}92}]:} (   month  order\_total  Discount  OrderId month\_name
          0    7       440.0        0.0     10248      jul   
          3    7      1863.4        0.0     10249      jul   
          5    7      1552.6        0.0     10250      jul   ,
                month  order\_total  Discount  OrderId month\_name
          2124    5      498.100      0.15     11075      may   
          2127    5      792.750      0.25     11076      may   
          2130    5     1255.721      0.20     11077      may   )
\end{Verbatim}
            
    \hypertarget{def_drop_regex}{%
\subsubsection{def\_drop\_regex}\label{def_drop_regex}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}93}]:} \PY{k}{def} \PY{n+nf}{df\PYZus{}drop\PYZus{}regex}\PY{p}{(}\PY{n}{DF}\PY{p}{,} \PY{n}{regex\PYZus{}list}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Use a list of regex to remove columns names. Returns new df.}
         \PY{l+s+sd}{    }
         \PY{l+s+sd}{    Parameters:}
         \PY{l+s+sd}{        DF \PYZhy{}\PYZhy{} input dataframe to remove columns from.}
         \PY{l+s+sd}{        regex\PYZus{}list \PYZhy{}\PYZhy{} list of string patterns or regexp to remove.}
         \PY{l+s+sd}{    }
         \PY{l+s+sd}{    Returns:}
         \PY{l+s+sd}{        df\PYZus{}cut \PYZhy{}\PYZhy{} input df without the dropped columns. }
         \PY{l+s+sd}{        \PYZsq{}\PYZsq{}\PYZsq{}}
             \PY{n}{df\PYZus{}cut} \PY{o}{=} \PY{n}{DF}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
             
             \PY{k}{for} \PY{n}{r} \PY{o+ow}{in} \PY{n}{regex\PYZus{}list}\PY{p}{:}
                 
                 \PY{n}{df\PYZus{}cut} \PY{o}{=} \PY{n}{df\PYZus{}cut}\PY{p}{[}\PY{n}{df\PYZus{}cut}\PY{o}{.}\PY{n}{columns}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{df\PYZus{}cut}\PY{o}{.}\PY{n}{filter}\PY{p}{(}\PY{n}{regex}\PY{o}{=}\PY{n}{r}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{p}{]}
                 \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Removed }\PY{l+s+si}{\PYZob{}r\PYZcb{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                 
             \PY{k}{return} \PY{n}{df\PYZus{}cut}
\end{Verbatim}


    \hypertarget{secondary-extraction-method-for-larger-dataset-to-export-to-csv}{%
\subsubsection{Secondary extraction method for larger dataset to export
to
csv}\label{secondary-extraction-method-for-larger-dataset-to-export-to-csv}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}94}]:} \PY{c+c1}{\PYZsh{} Extracting additional information to export for external plotting. }
         \PY{n}{DB\PYZus{}Order} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}sql\PYZus{}table}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Order}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{engine}\PY{p}{)}\PY{p}{;}
         \PY{n}{DB\PYZus{}OrderDetail} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}sql\PYZus{}table}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDetail}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{engine}\PY{p}{)}\PY{p}{;}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{DB\PYZus{}Order columns:}\PY{l+s+si}{\PYZob{}DB\PYZus{}Order.columns\PYZcb{}}\PY{l+s+s2}{n}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{ DB\PYZus{}OrderDetail columns: }\PY{l+s+si}{\PYZob{}DB\PYZus{}OrderDetail.columns\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{;}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
2019-04-12 16:53:51,135 INFO sqlalchemy.engine.base.Engine SELECT name FROM sqlite\_master WHERE type='table' ORDER BY name
2019-04-12 16:53:51,136 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,138 INFO sqlalchemy.engine.base.Engine SELECT name FROM sqlite\_master WHERE type='view' ORDER BY name
2019-04-12 16:53:51,138 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,140 INFO sqlalchemy.engine.base.Engine PRAGMA table\_info("Order")
2019-04-12 16:53:51,141 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,143 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'Order' AND type = 'table'
2019-04-12 16:53:51,144 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,146 INFO sqlalchemy.engine.base.Engine PRAGMA foreign\_key\_list("Order")
2019-04-12 16:53:51,147 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,148 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'Order' AND type = 'table'
2019-04-12 16:53:51,148 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,151 INFO sqlalchemy.engine.base.Engine PRAGMA index\_list("Order")
2019-04-12 16:53:51,151 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,153 INFO sqlalchemy.engine.base.Engine PRAGMA index\_list("Order")
2019-04-12 16:53:51,153 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,154 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'Order' AND type = 'table'
2019-04-12 16:53:51,155 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,161 INFO sqlalchemy.engine.base.Engine SELECT "Order"."Id", "Order"."CustomerId", "Order"."EmployeeId", "Order"."OrderDate", "Order"."RequiredDate", "Order"."ShippedDate", "Order"."ShipVia", "Order"."Freight", "Order"."ShipName", "Order"."ShipAddress", "Order"."ShipCity", "Order"."ShipRegion", "Order"."ShipPostalCode", "Order"."ShipCountry" 
FROM "Order"
2019-04-12 16:53:51,162 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,186 INFO sqlalchemy.engine.base.Engine SELECT name FROM sqlite\_master WHERE type='table' ORDER BY name
2019-04-12 16:53:51,187 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,189 INFO sqlalchemy.engine.base.Engine SELECT name FROM sqlite\_master WHERE type='view' ORDER BY name
2019-04-12 16:53:51,190 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,191 INFO sqlalchemy.engine.base.Engine PRAGMA table\_info("OrderDetail")
2019-04-12 16:53:51,192 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,194 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'OrderDetail' AND type = 'table'
2019-04-12 16:53:51,195 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,197 INFO sqlalchemy.engine.base.Engine PRAGMA foreign\_key\_list("OrderDetail")
2019-04-12 16:53:51,198 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,199 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'OrderDetail' AND type = 'table'
2019-04-12 16:53:51,200 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,201 INFO sqlalchemy.engine.base.Engine PRAGMA index\_list("OrderDetail")
2019-04-12 16:53:51,202 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,203 INFO sqlalchemy.engine.base.Engine PRAGMA index\_list("OrderDetail")
2019-04-12 16:53:51,204 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,205 INFO sqlalchemy.engine.base.Engine PRAGMA index\_info("sqlite\_autoindex\_OrderDetail\_1")
2019-04-12 16:53:51,206 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,207 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'OrderDetail' AND type = 'table'
2019-04-12 16:53:51,208 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:53:51,210 INFO sqlalchemy.engine.base.Engine SELECT "OrderDetail"."Id", "OrderDetail"."OrderId", "OrderDetail"."ProductId", "OrderDetail"."UnitPrice", "OrderDetail"."Quantity", "OrderDetail"."Discount" 
FROM "OrderDetail"
2019-04-12 16:53:51,211 INFO sqlalchemy.engine.base.Engine ()
DB\_Order columns:Index(['Id', 'CustomerId', 'EmployeeId', 'OrderDate', 'RequiredDate',
       'ShippedDate', 'ShipVia', 'Freight', 'ShipName', 'ShipAddress',
       'ShipCity', 'ShipRegion', 'ShipPostalCode', 'ShipCountry'],
      dtype='object')n
 DB\_OrderDetail columns: Index(['Id', 'OrderId', 'ProductId', 'UnitPrice', 'Quantity', 'Discount'], dtype='object')

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}95}]:} \PY{c+c1}{\PYZsh{} TAKE  DB\PYZus{}Orderm rename index, remove unwanted columns}
         \PY{n}{DB\PYZus{}Order}\PY{o}{.}\PY{n}{rename}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderPlaced}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Drop unwanted columns from DB\PYZus{}Orde to make df\PYZus{}Order}
         \PY{n}{regex\PYZus{}to\PYZus{}drop} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Freight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
         
         \PY{n}{df\PYZus{}Order} \PY{o}{=} \PY{n}{df\PYZus{}drop\PYZus{}regex}\PY{p}{(}\PY{n}{DB\PYZus{}Order}\PY{p}{,} \PY{n}{regex\PYZus{}to\PYZus{}drop}\PY{p}{)}
         \PY{n}{df\PYZus{}Order}\PY{o}{.}\PY{n}{rename}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderPlaced}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} df\PYZus{}Order.head()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Removed Date

Removed Freight


    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}96}]:} \PY{c+c1}{\PYZsh{} MERGING IMPORT DB\PYZus{}OrderDetail and cleaned df\PYZus{}Order}
         \PY{n}{df\PYZus{}merged} \PY{o}{=} \PY{n}{DB\PYZus{}OrderDetail}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{df\PYZus{}Order}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{copy}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}97}]:} \PY{c+c1}{\PYZsh{} Renaming dataframes for consistency}
         \PY{n}{df\PYZus{}order\PYZus{}geo} \PY{o}{=} \PY{n}{df\PYZus{}merged}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} df\PYZus{}order\PYZus{}geo.info()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}98}]:} \PY{c+c1}{\PYZsh{} \PYZsh{} Remove some columns from df\PYZus{}order\PYZus{}geo}
         
         \PY{c+c1}{\PYZsh{} df\PYZus{}order\PYZus{}geo.drop([\PYZsq{}OrderId\PYZsq{}, \PYZsq{}ShipName\PYZsq{}, \PYZsq{}ShippedDate\PYZsq{}, \PYZsq{}RequiredDate\PYZsq{}, \PYZsq{}ShipVia\PYZsq{},\PYZsq{}ShipAddress\PYZsq{},}
         \PY{c+c1}{\PYZsh{}              \PYZsq{}RequiredDate\PYZsq{},\PYZsq{}ShippedDate\PYZsq{}, \PYZsq{}Freight\PYZsq{}],inplace=True, axis=1)}
         \PY{c+c1}{\PYZsh{} \PYZsh{} relabel the Id column so they have unique names}
         \PY{c+c1}{\PYZsh{} df\PYZus{}order\PYZus{}geo.rename(columns=\PYZob{}\PYZsq{}Id\PYZsq{}:\PYZsq{}OrderId\PYZus{}\PYZsq{}\PYZcb{},inplace=True )}
         \PY{c+c1}{\PYZsh{} df\PYZus{}order\PYZus{}geo.info()}
         \PY{c+c1}{\PYZsh{} \PYZsh{} print(f\PYZsq{}df\PYZus{}ord.info():\PYZbs{}n \PYZob{}df\PYZus{}ord.info()\PYZcb{}\PYZbs{}n\PYZbs{}ndf\PYZus{}order\PYZus{}geo.info():\PYZbs{}n\PYZob{}df\PYZus{}order\PYZus{}geo.info()\PYZcb{}\PYZsq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}99}]:} \PY{c+c1}{\PYZsh{}Apply calc\PYZus{}product\PYZus{}price to every row }
         \PY{n}{df\PYZus{}price\PYZus{}geo} \PY{o}{=} \PY{n}{df\PYZus{}order\PYZus{}geo}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{calc\PYZus{}product\PYZus{}price}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Apply\PYZus{}calc\PYZus{}order\PYZus{}total to every row}
         \PY{n}{df\PYZus{}price\PYZus{}geo} \PY{o}{=} \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{calc\PYZus{}order\PYZus{}total}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{)}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}  
         \PY{c+c1}{\PYZsh{} df\PYZus{}price\PYZus{}geo.info()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}100}]:} \PY{c+c1}{\PYZsh{}convert dates to datetime}
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{df\PYZus{}price\PYZus{}geo}\PY{o}{.}\PY{n}{OrderDate} \PY{p}{)}
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{o}{.}\PY{n}{OrderDate}\PY{o}{.}\PY{n}{agg}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{max}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{min}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}100}]:} max   2014-05-06
          min   2012-07-04
          Name: OrderDate, dtype: datetime64[ns]
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}101}]:} \PY{c+c1}{\PYZsh{} Create columns for day of week and month}
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{df\PYZus{}price\PYZus{}geo}\PY{o}{.}\PY{n}{OrderDate}\PY{p}{)}
          
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{week\PYZus{}day}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{dayofweek}
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{month}
          
          \PY{c+c1}{\PYZsh{} df\PYZus{}price\PYZus{}geo.info()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}102}]:} \PY{c+c1}{\PYZsh{} Make list of month names to map onto dataframe.}
          \PY{n}{months} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{jan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{feb}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mar}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{apr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{may}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{jun}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{jul}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{aug}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sep}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{oct}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nov}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dec}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{c+c1}{\PYZsh{}creating label names}
          \PY{c+c1}{\PYZsh{} month\PYZus{}code =}
          \PY{n}{month\PYZus{}dict} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{n+nb}{zip}\PY{p}{(} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{n+nb}{len}\PY{p}{(}\PY{n}{months}\PY{p}{)}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}\PY{p}{,}\PY{n}{months}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{} zip the two into a dictionary}
          
          \PY{c+c1}{\PYZsh{} MAP THE MONTH\PYZus{}DICT ONTO NEW COLUMN month\PYZus{}name}
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{map}\PY{p}{(}\PY{n}{month\PYZus{}dict}\PY{p}{)}
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}102}]:} apr    261
          mar    255
          jan    237
          feb    201
          dec    195
          oct    179
          nov    155
          may    155
          aug    153
          sep    152
          jul    136
          jun     76
          Name: month\_name, dtype: int64
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}103}]:} \PY{c+c1}{\PYZsh{} \PYZsh{} Save df\PYZus{}price\PYZus{}Geo }
          \PY{c+c1}{\PYZsh{} \PYZsh{} Save figure of save\PYZus{}for\PYZus{}user is True}
          \PY{c+c1}{\PYZsh{} if save\PYZus{}for\PYZus{}user == True:}
          \PY{c+c1}{\PYZsh{} \PYZsh{} save = input(prompt=\PYZsq{}Would you like to export the dataframe above? (y/n)\PYZbs{}n\PYZsq{})}
          \PY{c+c1}{\PYZsh{} \PYZsh{} if save.lower()==\PYZsq{}y\PYZsq{}:}
          \PY{c+c1}{\PYZsh{}     filename =\PYZsq{}df\PYZus{}H3\PYZus{}price\PYZus{}w\PYZus{}dates\PYZus{}products.csv\PYZsq{}}
          \PY{c+c1}{\PYZsh{}     df\PYZus{}H3\PYZus{}price\PYZus{}w\PYZus{}dates\PYZus{}products = df\PYZus{}price\PYZus{}geo.copy()}
          \PY{c+c1}{\PYZsh{}     df\PYZus{}H3\PYZus{}price\PYZus{}w\PYZus{}dates\PYZus{}products.to\PYZus{}csv(data\PYZus{}filepath+filename)}
          \PY{c+c1}{\PYZsh{}     df\PYZus{}H3\PYZus{}price\PYZus{}w\PYZus{}dates\PYZus{}products.to\PYZus{}excel(data\PYZus{}filepath+\PYZsq{}df\PYZus{}H3\PYZus{}price\PYZus{}w\PYZus{}dates\PYZus{}products.xlsx\PYZsq{})}
          
          \PY{c+c1}{\PYZsh{}     print(f\PYZsq{}df\PYZus{}price exported and saved as \PYZob{}filename\PYZcb{}...\PYZsq{})}
          \PY{c+c1}{\PYZsh{}     print(f\PYZsq{}if you are running this on Colab:...\PYZbs{}nOpen File sidebar, click Refresh, right click on \PYZob{}filename\PYZcb{} to Download.\PYZsq{})}
              
          \PY{c+c1}{\PYZsh{}     filename =\PYZsq{}df\PYZus{}H3\PYZus{}price\PYZus{}w\PYZus{}dates\PYZus{}orders.csv\PYZsq{}}
          \PY{c+c1}{\PYZsh{}     df\PYZus{}H3\PYZus{}price\PYZus{}w\PYZus{}dates\PYZus{}orders = df\PYZus{}H3\PYZus{}price\PYZus{}w\PYZus{}dates\PYZus{}products.drop\PYZus{}duplicates(subset=[\PYZsq{}OrderId\PYZsq{}])}
          \PY{c+c1}{\PYZsh{}     df\PYZus{}H3\PYZus{}price\PYZus{}w\PYZus{}dates\PYZus{}orders.to\PYZus{}csv(data\PYZus{}filepath+filename)}
          \PY{c+c1}{\PYZsh{}     df\PYZus{}H3\PYZus{}price\PYZus{}w\PYZus{}dates\PYZus{}orders.to\PYZus{}excel(data\PYZus{}filepath+\PYZsq{}df\PYZus{}H3\PYZus{}price\PYZus{}w\PYZus{}dates\PYZus{}orders.xlsx\PYZsq{})}
          
          \PY{c+c1}{\PYZsh{}     print(f\PYZsq{}if you are running this on Colab:...\PYZbs{}nOpen File sidebar, click Refresh, right click on \PYZob{}filename\PYZcb{} to Download.\PYZsq{})}
          
          \PY{c+c1}{\PYZsh{} else:}
          \PY{c+c1}{\PYZsh{}     print(\PYZsq{}No .csv exported.\PYZsq{})}
              
              
          \PY{c+c1}{\PYZsh{} \PYZsh{} print(f\PYZsq{}The cell above is currently commented out, uncomment to export csv\PYZsq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}104}]:} \PY{c+c1}{\PYZsh{} df\PYZus{}price\PYZus{}geo.info()}
\end{Verbatim}


    \hypertarget{eda}{%
\subsubsection{EDA}\label{eda}}

\begin{itemize}
\tightlist
\item
  Extraction workflows merge here.
\item
  define uselful functions for visualizations
\item
  Plotting and visualizing features
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}105}]:} \PY{c+c1}{\PYZsh{} Picking which iteration of df\PYZus{}price to use }
          \PY{n}{df\PYZus{}year} \PY{o}{=} \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
          \PY{c+c1}{\PYZsh{}df\PYZus{}year = df\PYZus{}priceM}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}106}]:} \PY{c+c1}{\PYZsh{}\PYZhy{} Adding df\PYZus{}year\PYZus{}orders = df\PYZus{}price\PYZus{}geo should ensure that the rest of mike\PYZsq{}s code runs}
          \PY{n}{df\PYZus{}year\PYZus{}orders} \PY{o}{=} \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{o}{.}\PY{n}{drop\PYZus{}duplicates}\PY{p}{(}\PY{n}{subset}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
          \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}\PY{n}{verify\PYZus{}integrity}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} df\PYZus{}year\PYZus{}orders.info()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}107}]:} \PY{c+c1}{\PYZsh{} Drop unneeded and misleading formerly product\PYZhy{}associated columns}
          \PY{n}{vars\PYZus{}to\PYZus{}drop} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EmployeeId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipVia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipAddress}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipRegion}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ProductId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{vars\PYZus{}to\PYZus{}drop}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} df\PYZus{}year\PYZus{}orders.info()}
\end{Verbatim}


    \hypertarget{plot-initial-order-totals-by-month}{%
\subsubsection{plot initial order totals by
month}\label{plot-initial-order-totals-by-month}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}108}]:} \PY{c+c1}{\PYZsh{} Declare variables to be plotted}
          \PY{n}{x} \PY{o}{=} \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{n}{y} \PY{o}{=} \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{n}{ticks} \PY{o}{=} \PY{p}{[}\PY{n}{v} \PY{k}{for} \PY{n}{v} \PY{o+ow}{in} \PY{n}{month\PYZus{}dict}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{]} 
          \PY{n}{title} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Order totals per month with or without discounts}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{hue} \PY{o}{=} \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}109}]:} \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{make\PYZus{}violinplot}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,}\PY{n}{title}\PY{p}{,}\PY{n}{hue}\PY{p}{,} \PY{n}{ticks}\PY{p}{)}
          \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user} \PY{o}{==} \PY{k+kc}{True}\PY{p}{:}
              \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{n}{fig\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{violin \PYZhy{} order totals per month by discount.png}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{300}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} fig = plt.gcf()}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_182_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    \begin{verbatim}
<Figure size 432x288 with 0 Axes>
    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}110}]:} \PY{n}{make\PYZus{}stripplot}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,}\PY{n}{title}\PY{p}{,}\PY{n}{hue}\PY{p}{,}\PY{n}{ticks}\PY{p}{)}
          \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user} \PY{o}{==} \PY{k+kc}{True}\PY{p}{:}
              \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{n}{fig\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stripplot \PYZhy{} order totals per month.png}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{300}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_183_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    \begin{verbatim}
<Figure size 432x288 with 0 Axes>
    \end{verbatim}

    
    \hypertarget{h3-aim-2-test-for-assumptions-of-normality-and-equal-variance-then-choose-test}{%
\subsection{\texorpdfstring{\#\# \textbf{\emph{H3, Aim 2 : Test for
assumptions of normality and equal variance, then choose
test}}}{\#\# H3, Aim 2 : Test for assumptions of normality and equal variance, then choose test}}\label{h3-aim-2-test-for-assumptions-of-normality-and-equal-variance-then-choose-test}}

    \begin{itemize}
\tightlist
\item
  \textbf{\emph{Aim 2: Select the appropriate t-test based on tests for
  the assumptions of normality and homogeneity of variance.}}

  \begin{enumerate}
  \def\labelenumi{\arabic{enumi}.}
  \tightlist
  \item
    \textbf{Test for Normality}

    \begin{itemize}
    \tightlist
    \item
      \href{https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.normaltest.html}{Normaltest/
      D'Agostino and Pearson's} \texttt{scipy.stats.normaltest}
    \item
      Shapiro-Wilik Test \texttt{scipy.stats.shapiro}
    \end{itemize}
  \item
    \textbf{Test for Homogeneity of Variance}

    \begin{itemize}
    \tightlist
    \item
      \href{https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.stats.levene.html}{Levene's
      Test} \texttt{scipy.stats.levene}
    \end{itemize}
  \item
    \textbf{Choose appropriate test based upon 1. and 2.}

    \begin{itemize}
    \tightlist
    \item
      \href{https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.mannwhitneyu.html}{Mann
      Whitney U Test} - non parametric equivalent of ANOVA)
      \texttt{stats.mannwhitneyu}
    \item
      Normal: 2 sample t-test
    \item
      Welch's t-test (Jeff)
    \end{itemize}
  \item
    Calculate effect size, post-hoc tukeys tests.

    \begin{itemize}
    \tightlist
    \item
      Effect size:
      \href{https://stackoverflow.com/questions/21532471/how-to-calculate-cohens-d-in-python}{cohen's
      d}
    \end{itemize}
  \end{enumerate}
\item
  \textbf{\emph{Aim 3: To perform post-hoc pairwise comparisons for
  level of discount}}

  \begin{enumerate}
  \def\labelenumi{\arabic{enumi}.}
  \setcounter{enumi}{4}
  \tightlist
  \item
    If significant result, follow up with post-hoc tests

    \begin{itemize}
    \tightlist
    \item
      \href{https://www.statsmodels.org/stable/generated/statsmodels.stats.multicomp.pairwise_tukeyhsd.html}{Tukey's}
      \texttt{statsmodels.stats.multicomp.pairwise\_tukeyhsd}
    \end{itemize}
  \end{enumerate}
\end{itemize}

    \hypertarget{histograms-month-vs-all-months}{%
\paragraph{Histograms month vs all
months}\label{histograms-month-vs-all-months}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}111}]:} \PY{n}{draw\PYZus{}histograms}\PY{p}{(}\PY{n}{df\PYZus{}year}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{month\PYZus{}dict}\PY{p}{,} \PY{l+m+mi}{4}\PY{p}{,} \PY{l+m+mi}{3}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_187_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}112}]:} \PY{c+c1}{\PYZsh{} draw\PYZus{}histograms\PYZus{}from\PYZus{}sample(df\PYZus{}year\PYZus{}orders, \PYZsq{}month\PYZsq{}, month\PYZus{}dict, 4, 3)}
          \PY{c+c1}{\PYZsh{} df\PYZus{}year\PYZus{}orders[[\PYZsq{}Quantity\PYZsq{},\PYZsq{}Discount\PYZsq{},\PYZsq{}price\PYZsq{},\PYZsq{}order\PYZus{}total\PYZsq{}]].describe()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}113}]:} \PY{c+c1}{\PYZsh{} df\PYZus{}year\PYZus{}orders.groupby(\PYZsq{}month\PYZus{}name\PYZsq{}).agg([\PYZsq{}mean\PYZsq{},\PYZsq{}std\PYZsq{},\PYZsq{}min\PYZsq{},\PYZsq{}max\PYZsq{},\PYZsq{}count\PYZsq{}])}
\end{Verbatim}


    \hypertarget{aim-2.1-test-for-normality}{%
\subsubsection{Aim 2.1: Test for
Normality}\label{aim-2.1-test-for-normality}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}114}]:} \PY{c+c1}{\PYZsh{} create a dict to test stats}
          \PY{n}{dict\PYZus{}to\PYZus{}test} \PY{o}{=}\PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
          \PY{k}{for} \PY{n}{month} \PY{o+ow}{in} \PY{n+nb}{list}\PY{p}{(}\PY{n}{df\PYZus{}year\PYZus{}orders}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{:}
              \PY{n}{dict\PYZus{}to\PYZus{}test}\PY{p}{[}\PY{n}{month}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{get\PYZus{}group}\PY{p}{(}\PY{n}{month}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}115}]:} \PY{k}{for} \PY{n}{k}\PY{p}{,}\PY{n}{v} \PY{o+ow}{in} \PY{n}{dict\PYZus{}to\PYZus{}test}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
              \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}k\PYZcb{}}\PY{l+s+s1}{ has: }\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{len(v)\PYZcb{} rows.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} len(dict\PYZus{}to\PYZus{}test.values())}
          \PY{c+c1}{\PYZsh{} dict\PYZus{}to\PYZus{}test.keys()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
jul has: 55 rows.
aug has: 58 rows.
sep has: 60 rows.
oct has: 64 rows.
nov has: 59 rows.
dec has: 79 rows.
jan has: 88 rows.
feb has: 83 rows.
mar has: 103 rows.
apr has: 105 rows.
may has: 46 rows.
jun has: 30 rows.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}116}]:} \PY{c+c1}{\PYZsh{} Create H3\PYZus{}tests list to receive all test results for this hypothesis:}
          \PY{n}{H3\PYZus{}tests} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Group:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TestName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Test Purpose}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stat}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p\PYZlt{}.05?}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}  \PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}117}]:} \PY{c+c1}{\PYZsh{} Use normaltest for D\PYZsq{}Agostino Pearson\PYZsq{}s test}
          \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{normaltest}
          
          \PY{c+c1}{\PYZsh{} Recursively go through months and then test each monthths}
          \PY{k}{for} \PY{n}{month}\PY{p}{,}  \PY{n}{df}  \PY{o+ow}{in} \PY{n}{dict\PYZus{}to\PYZus{}test}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}month = key, df = values}
          
              \PY{n}{arrA} \PY{o}{=} \PY{n}{dict\PYZus{}to\PYZus{}test}\PY{p}{[}\PY{n}{month}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          
              \PY{c+c1}{\PYZsh{}1. Test for normality}
              \PY{n}{test\PYZus{}purpose} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Normality}\PY{l+s+s1}{\PYZsq{}}
              \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{normaltest}\PY{l+s+s1}{\PYZsq{}}
          
              \PY{n}{arrA} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}
              \PY{n}{statA}\PY{p}{,} \PY{n}{pA} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}
          
              \PY{c+c1}{\PYZsh{} Append the result}
              \PY{n}{H3\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{month}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,} \PY{n}{test\PYZus{}purpose} \PY{p}{,}\PY{n}{statA}\PY{p}{,} \PY{n}{pA}\PY{p}{,} \PY{n}{pA}\PY{o}{\PYZlt{}}\PY{l+m+mf}{0.05}\PY{p}{]}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Adding a test for the year as a whole. }
          \PY{n}{arrB} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{df\PYZus{}year\PYZus{}orders}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
          \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Append the results.}
          \PY{n}{H3\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Total Pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,} \PY{n}{test\PYZus{}purpose}\PY{p}{,}\PY{n}{stat}\PY{p}{,} \PY{n}{p}\PY{p}{,}\PY{n}{p}\PY{o}{\PYZlt{}}\PY{l+m+mf}{0.05}\PY{p}{]}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Display Results}
          \PY{n}{H3\PYZus{}results\PYZus{}norm} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{H3\PYZus{}tests}\PY{p}{)}
          \PY{n}{H3\PYZus{}results\PYZus{}norm}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}117}]:}      Group:     TestName  Test Purpose   stat         p      p<.05?
          0         jul  normaltest   Normality    28.482   6.534e-07    True
          1         aug  normaltest   Normality    35.416   2.039e-08    True
          2         sep  normaltest   Normality    20.546   3.455e-05    True
          3         oct  normaltest   Normality    55.131   1.067e-12    True
          4         nov  normaltest   Normality    47.558   4.708e-11    True
          5         dec  normaltest   Normality    65.102   7.299e-15    True
          6         jan  normaltest   Normality    71.688   2.711e-16    True
          7         feb  normaltest   Normality    91.352   1.456e-20    True
          8         mar  normaltest   Normality   139.722   4.568e-31    True
          9         apr  normaltest   Normality    81.807   1.722e-18    True
          10        may  normaltest   Normality    51.838   5.539e-12    True
          11        jun  normaltest   Normality     4.170   1.243e-01   False
          12  Total Pop  normaltest   Normality   643.646  1.714e-140    True
\end{Verbatim}
            
    \hypertarget{aim-2.2-test-for-homogneity-of-variance}{%
\subsubsection{Aim 2.2: Test for Homogneity of
Variance}\label{aim-2.2-test-for-homogneity-of-variance}}

\begin{itemize}
\tightlist
\item
  Levenes Test
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}118}]:} \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{levene}
          
          \PY{k}{for} \PY{n}{month}\PY{p}{,}  \PY{n}{df}  \PY{o+ow}{in} \PY{n}{dict\PYZus{}to\PYZus{}test}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}month = key, df = values}
              
              \PY{c+c1}{\PYZsh{} Create array A for month and array B for all other months.}
              \PY{n}{arrA} \PY{o}{=} \PY{n}{dict\PYZus{}to\PYZus{}test}\PY{p}{[}\PY{n}{month}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              \PY{n}{arrB} \PY{o}{=} \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{p}{[}\PY{n}{df\PYZus{}year\PYZus{}orders}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{!=} \PY{n}{month}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
            
              \PY{n}{arrA} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}
              \PY{n}{arrB} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}
              
              
              \PY{c+c1}{\PYZsh{}1. Test for equal variance. }
              \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{levene}\PY{l+s+s1}{\PYZsq{}}
              \PY{n}{test\PYZus{}purpose} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Equal Variance}\PY{l+s+s1}{\PYZsq{}}
          
              \PY{c+c1}{\PYZsh{} Run Levene\PYZsq{}s test}
              \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{arrB}\PY{p}{,}\PY{n}{center}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              
              \PY{c+c1}{\PYZsh{} Append Results}
              \PY{n}{H3\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}month\PYZcb{}}\PY{l+s+s1}{ vs. Other Months}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,} \PY{n}{test\PYZus{}purpose} \PY{p}{,}\PY{n}{stat}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n}{p}\PY{o}{\PYZlt{}}\PY{l+m+mf}{0.05}\PY{p}{]}\PY{p}{)}
          
          \PY{n}{list2df}\PY{p}{(}\PY{n}{H3\PYZus{}tests}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}118}]:}            Group:          TestName    Test Purpose    stat         p      \textbackslash{}
          0                    jul  normaltest       Normality   28.482   6.534e-07   
          1                    aug  normaltest       Normality   35.416   2.039e-08   
          2                    sep  normaltest       Normality   20.546   3.455e-05   
          3                    oct  normaltest       Normality   55.131   1.067e-12   
          4                    nov  normaltest       Normality   47.558   4.708e-11   
          5                    dec  normaltest       Normality   65.102   7.299e-15   
          6                    jan  normaltest       Normality   71.688   2.711e-16   
          7                    feb  normaltest       Normality   91.352   1.456e-20   
          8                    mar  normaltest       Normality  139.722   4.568e-31   
          9                    apr  normaltest       Normality   81.807   1.722e-18   
          10                   may  normaltest       Normality   51.838   5.539e-12   
          11                   jun  normaltest       Normality    4.170   1.243e-01   
          12             Total Pop  normaltest       Normality  643.646  1.714e-140   
          13  jul vs. Other Months      levene  Equal Variance    0.089   7.654e-01   
          14  aug vs. Other Months      levene  Equal Variance    2.312   1.288e-01   
          15  sep vs. Other Months      levene  Equal Variance    0.416   5.189e-01   
          16  oct vs. Other Months      levene  Equal Variance    0.050   8.239e-01   
          17  nov vs. Other Months      levene  Equal Variance    0.001   9.735e-01   
          18  dec vs. Other Months      levene  Equal Variance    0.157   6.923e-01   
          19  jan vs. Other Months      levene  Equal Variance    0.872   3.506e-01   
          20  feb vs. Other Months      levene  Equal Variance    1.397   2.376e-01   
          21  mar vs. Other Months      levene  Equal Variance    0.516   4.729e-01   
          22  apr vs. Other Months      levene  Equal Variance    1.650   1.994e-01   
          23  may vs. Other Months      levene  Equal Variance    0.024   8.773e-01   
          24  jun vs. Other Months      levene  Equal Variance    1.931   1.650e-01   
          
              p<.05?  
          0     True  
          1     True  
          2     True  
          3     True  
          4     True  
          5     True  
          6     True  
          7     True  
          8     True  
          9     True  
          10    True  
          11   False  
          12    True  
          13   False  
          14   False  
          15   False  
          16   False  
          17   False  
          18   False  
          19   False  
          20   False  
          21   False  
          22   False  
          23   False  
          24   False  
\end{Verbatim}
            
    \hypertarget{aim-2.3.-choose-appropriate-test-based-on-testing-assumptions}{%
\subsubsection{Aim 2.3. Choose Appropriate Test Based on Testing
Assumptions}\label{aim-2.3.-choose-appropriate-test-based-on-testing-assumptions}}

\begin{itemize}
\tightlist
\item
  Note: We did not meet the criteria for normality or equal variance.
\item
  We also have more than 2 groups, so cannot do the Mann-Whitney U test.
\item
  Decided to run both a M.W.U test and Tukey's

  \begin{itemize}
  \tightlist
  \item
    MWU to analyze each month vs the other months.
  \item
    Tukey's for pairwise comparisons between months
  \end{itemize}
\end{itemize}

    \hypertarget{mann-whitney-u-test-of-months-vs-year}{%
\paragraph{Mann-Whitney U test of months vs
year}\label{mann-whitney-u-test-of-months-vs-year}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}119}]:} \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{mannwhitneyu}
          
          \PY{k}{for} \PY{n}{month}\PY{p}{,} \PY{n}{df}  \PY{o+ow}{in} \PY{n}{dict\PYZus{}to\PYZus{}test}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}month = key, df = values}
          
              \PY{n}{arrA} \PY{o}{=} \PY{n}{dict\PYZus{}to\PYZus{}test}\PY{p}{[}\PY{n}{month}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              \PY{n}{arrB} \PY{o}{=} \PY{n}{df\PYZus{}year}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df\PYZus{}year}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{!=} \PY{n}{month}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          
              \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mannwhitneyu}\PY{l+s+s1}{\PYZsq{}}
              \PY{n}{test\PYZus{}purpose} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Hi sig.}\PY{l+s+s1}{\PYZsq{}}
          
              \PY{n}{arrA} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}\PY{o}{.}\PY{n}{reshape}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
              \PY{n}{arrB} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}\PY{o}{.}\PY{n}{reshape}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
          
              \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{arrB}\PY{p}{,}\PY{n}{alternative}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{two\PYZhy{}sided}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              
              \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}month\PYZcb{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{stat}\PY{p}{,} \PY{n}{p}\PY{p}{)}
              
              \PY{n}{H3\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}month\PYZcb{}}\PY{l+s+s1}{ vs. Other Months}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,} \PY{n}{test\PYZus{}purpose} \PY{p}{,}\PY{n}{stat}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n}{p} \PY{o}{\PYZlt{}} \PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
          
          \PY{n}{list2df}\PY{p}{(}\PY{n}{H3\PYZus{}tests}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
jul: 45417.0 0.02110767938013441
aug: 47377.0 0.016772718623516168
sep: 48735.0 0.012510680387681881
oct: 58962.5 0.3573238067080603
nov: 50998.0 0.075433076908931
dec: 69149.5 0.1069818633432225
jan: 78282.5 0.25022620640069093
feb: 64028.0 0.001149580649845926
mar: 75748.0 0.00011060596683120235
apr: 85237.0 0.013660809437219772
may: 40501.5 0.16518223957270972
jun: 26240.5 0.13545426934666646

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}119}]:}            Group:           TestName     Test Purpose     stat          p      \textbackslash{}
          0                    jul    normaltest       Normality     28.482   6.534e-07   
          1                    aug    normaltest       Normality     35.416   2.039e-08   
          2                    sep    normaltest       Normality     20.546   3.455e-05   
          3                    oct    normaltest       Normality     55.131   1.067e-12   
          4                    nov    normaltest       Normality     47.558   4.708e-11   
          5                    dec    normaltest       Normality     65.102   7.299e-15   
          6                    jan    normaltest       Normality     71.688   2.711e-16   
          7                    feb    normaltest       Normality     91.352   1.456e-20   
          8                    mar    normaltest       Normality    139.722   4.568e-31   
          9                    apr    normaltest       Normality     81.807   1.722e-18   
          10                   may    normaltest       Normality     51.838   5.539e-12   
          11                   jun    normaltest       Normality      4.170   1.243e-01   
          12             Total Pop    normaltest       Normality    643.646  1.714e-140   
          13  jul vs. Other Months        levene  Equal Variance      0.089   7.654e-01   
          14  aug vs. Other Months        levene  Equal Variance      2.312   1.288e-01   
          15  sep vs. Other Months        levene  Equal Variance      0.416   5.189e-01   
          16  oct vs. Other Months        levene  Equal Variance      0.050   8.239e-01   
          17  nov vs. Other Months        levene  Equal Variance      0.001   9.735e-01   
          18  dec vs. Other Months        levene  Equal Variance      0.157   6.923e-01   
          19  jan vs. Other Months        levene  Equal Variance      0.872   3.506e-01   
          20  feb vs. Other Months        levene  Equal Variance      1.397   2.376e-01   
          21  mar vs. Other Months        levene  Equal Variance      0.516   4.729e-01   
          22  apr vs. Other Months        levene  Equal Variance      1.650   1.994e-01   
          23  may vs. Other Months        levene  Equal Variance      0.024   8.773e-01   
          24  jun vs. Other Months        levene  Equal Variance      1.931   1.650e-01   
          25  jul vs. Other Months  mannwhitneyu         Hi sig.  45417.000   2.111e-02   
          26  aug vs. Other Months  mannwhitneyu         Hi sig.  47377.000   1.677e-02   
          27  sep vs. Other Months  mannwhitneyu         Hi sig.  48735.000   1.251e-02   
          28  oct vs. Other Months  mannwhitneyu         Hi sig.  58962.500   3.573e-01   
          29  nov vs. Other Months  mannwhitneyu         Hi sig.  50998.000   7.543e-02   
          30  dec vs. Other Months  mannwhitneyu         Hi sig.  69149.500   1.070e-01   
          31  jan vs. Other Months  mannwhitneyu         Hi sig.  78282.500   2.502e-01   
          32  feb vs. Other Months  mannwhitneyu         Hi sig.  64028.000   1.150e-03   
          33  mar vs. Other Months  mannwhitneyu         Hi sig.  75748.000   1.106e-04   
          34  apr vs. Other Months  mannwhitneyu         Hi sig.  85237.000   1.366e-02   
          35  may vs. Other Months  mannwhitneyu         Hi sig.  40501.500   1.652e-01   
          36  jun vs. Other Months  mannwhitneyu         Hi sig.  26240.500   1.355e-01   
          
              p<.05?  
          0     True  
          1     True  
          2     True  
          3     True  
          4     True  
          5     True  
          6     True  
          7     True  
          8     True  
          9     True  
          10    True  
          11   False  
          12    True  
          13   False  
          14   False  
          15   False  
          16   False  
          17   False  
          18   False  
          19   False  
          20   False  
          21   False  
          22   False  
          23   False  
          24   False  
          25    True  
          26    True  
          27    True  
          28   False  
          29   False  
          30   False  
          31   False  
          32    True  
          33    True  
          34    True  
          35   False  
          36   False  
\end{Verbatim}
            
    \hypertarget{calculating-effect-size-wiht-cohens-d}{%
\paragraph{Calculating effect size wiht Cohen's
d}\label{calculating-effect-size-wiht-cohens-d}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}120}]:} \PY{c+c1}{\PYZsh{} Calculating effect sizes}
          \PY{n}{d\PYZus{}dict} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
          \PY{k}{for} \PY{n}{month}\PY{p}{,}  \PY{n}{df}  \PY{o+ow}{in} \PY{n}{dict\PYZus{}to\PYZus{}test}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}month = key, df = values}
          
              \PY{n}{arrA} \PY{o}{=} \PY{n}{dict\PYZus{}to\PYZus{}test}\PY{p}{[}\PY{n}{month}\PY{p}{]}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
              \PY{n}{arrB} \PY{o}{=} \PY{n}{df\PYZus{}year}\PY{p}{[}\PY{n}{df\PYZus{}year}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{!=} \PY{n}{month}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          
              \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cohen\PYZus{}d}\PY{l+s+s1}{\PYZsq{}}
              \PY{n}{test\PYZus{}purpose} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{efect Size}\PY{l+s+s1}{\PYZsq{}}
          
              \PY{n}{arrA} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}
              \PY{n}{arrB} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}
          
              \PY{n}{d} \PY{o}{=} \PY{n}{Cohen\PYZus{}d}\PY{p}{(}\PY{n}{arrA}\PY{p}{,} \PY{n}{arrB}\PY{p}{)}
              
              \PY{n}{d\PYZus{}dict}\PY{p}{[}\PY{n}{month}\PY{p}{]} \PY{o}{=} \PY{n}{d}
              
              \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}month\PYZcb{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{d}\PY{p}{)}
              \PY{n}{H3\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}month\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,} \PY{n}{test\PYZus{}purpose} \PY{p}{,}\PY{n}{stat}\PY{p}{]}\PY{p}{)}
          \PY{n}{list2df}\PY{p}{(}\PY{n}{H3\PYZus{}tests}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
jul: -0.2147639536993107
aug: -0.3180089015952384
sep: -0.2541212712328111
oct: -0.10590059093466629
nov: -0.17563360035793926
dec: -0.1937283735172709
jan: -0.023415330344979286
feb: -0.09838738292040619
mar: -0.24902822472429026
apr: -0.06788042974716706
may: -0.14679541211307584
jun: -0.33324148413995885

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}120}]:}            Group:           TestName     Test Purpose     stat          p      \textbackslash{}
          0                    jul    normaltest       Normality     28.482   6.534e-07   
          1                    aug    normaltest       Normality     35.416   2.039e-08   
          2                    sep    normaltest       Normality     20.546   3.455e-05   
          3                    oct    normaltest       Normality     55.131   1.067e-12   
          4                    nov    normaltest       Normality     47.558   4.708e-11   
          5                    dec    normaltest       Normality     65.102   7.299e-15   
          6                    jan    normaltest       Normality     71.688   2.711e-16   
          7                    feb    normaltest       Normality     91.352   1.456e-20   
          8                    mar    normaltest       Normality    139.722   4.568e-31   
          9                    apr    normaltest       Normality     81.807   1.722e-18   
          10                   may    normaltest       Normality     51.838   5.539e-12   
          11                   jun    normaltest       Normality      4.170   1.243e-01   
          12             Total Pop    normaltest       Normality    643.646  1.714e-140   
          13  jul vs. Other Months        levene  Equal Variance      0.089   7.654e-01   
          14  aug vs. Other Months        levene  Equal Variance      2.312   1.288e-01   
          15  sep vs. Other Months        levene  Equal Variance      0.416   5.189e-01   
          16  oct vs. Other Months        levene  Equal Variance      0.050   8.239e-01   
          17  nov vs. Other Months        levene  Equal Variance      0.001   9.735e-01   
          18  dec vs. Other Months        levene  Equal Variance      0.157   6.923e-01   
          19  jan vs. Other Months        levene  Equal Variance      0.872   3.506e-01   
          20  feb vs. Other Months        levene  Equal Variance      1.397   2.376e-01   
          21  mar vs. Other Months        levene  Equal Variance      0.516   4.729e-01   
          22  apr vs. Other Months        levene  Equal Variance      1.650   1.994e-01   
          23  may vs. Other Months        levene  Equal Variance      0.024   8.773e-01   
          24  jun vs. Other Months        levene  Equal Variance      1.931   1.650e-01   
          25  jul vs. Other Months  mannwhitneyu         Hi sig.  45417.000   2.111e-02   
          26  aug vs. Other Months  mannwhitneyu         Hi sig.  47377.000   1.677e-02   
          27  sep vs. Other Months  mannwhitneyu         Hi sig.  48735.000   1.251e-02   
          28  oct vs. Other Months  mannwhitneyu         Hi sig.  58962.500   3.573e-01   
          29  nov vs. Other Months  mannwhitneyu         Hi sig.  50998.000   7.543e-02   
          30  dec vs. Other Months  mannwhitneyu         Hi sig.  69149.500   1.070e-01   
          31  jan vs. Other Months  mannwhitneyu         Hi sig.  78282.500   2.502e-01   
          32  feb vs. Other Months  mannwhitneyu         Hi sig.  64028.000   1.150e-03   
          33  mar vs. Other Months  mannwhitneyu         Hi sig.  75748.000   1.106e-04   
          34  apr vs. Other Months  mannwhitneyu         Hi sig.  85237.000   1.366e-02   
          35  may vs. Other Months  mannwhitneyu         Hi sig.  40501.500   1.652e-01   
          36  jun vs. Other Months  mannwhitneyu         Hi sig.  26240.500   1.355e-01   
          37                   jul       Cohen\_d      efect Size  26240.500         NaN   
          38                   aug       Cohen\_d      efect Size  26240.500         NaN   
          39                   sep       Cohen\_d      efect Size  26240.500         NaN   
          40                   oct       Cohen\_d      efect Size  26240.500         NaN   
          41                   nov       Cohen\_d      efect Size  26240.500         NaN   
          42                   dec       Cohen\_d      efect Size  26240.500         NaN   
          43                   jan       Cohen\_d      efect Size  26240.500         NaN   
          44                   feb       Cohen\_d      efect Size  26240.500         NaN   
          45                   mar       Cohen\_d      efect Size  26240.500         NaN   
          46                   apr       Cohen\_d      efect Size  26240.500         NaN   
          47                   may       Cohen\_d      efect Size  26240.500         NaN   
          48                   jun       Cohen\_d      efect Size  26240.500         NaN   
          
             p<.05?  
          0    True  
          1    True  
          2    True  
          3    True  
          4    True  
          5    True  
          6    True  
          7    True  
          8    True  
          9    True  
          10   True  
          11  False  
          12   True  
          13  False  
          14  False  
          15  False  
          16  False  
          17  False  
          18  False  
          19  False  
          20  False  
          21  False  
          22  False  
          23  False  
          24  False  
          25   True  
          26   True  
          27   True  
          28  False  
          29  False  
          30  False  
          31  False  
          32   True  
          33   True  
          34   True  
          35  False  
          36  False  
          37   None  
          38   None  
          39   None  
          40   None  
          41   None  
          42   None  
          43   None  
          44   None  
          45   None  
          46   None  
          47   None  
          48   None  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}121}]:} \PY{c+c1}{\PYZsh{} Export H3 test resutls.}
          \PY{n}{table\PYZus{}H3\PYZus{}test\PYZus{}results} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{H3\PYZus{}tests}\PY{p}{)}
          \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user}\PY{o}{==}\PY{k+kc}{True}\PY{p}{:}
              \PY{n}{table\PYZus{}H3\PYZus{}test\PYZus{}results}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}test\PYZus{}results.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{table\PYZus{}H3\PYZus{}test\PYZus{}results}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}test\PYZus{}results.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{table\PYZus{}H3\PYZus{}test\PYZus{}results}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}\PY{o}{.}\PY{n}{to\PYZus{}html}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}test\PYZus{}results.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \hypertarget{use-tukeys-pairwise-multiple-comparison-test.}{%
\subsubsection{Use Tukey's Pairwise Multiple Comparison
test.}\label{use-tukeys-pairwise-multiple-comparison-test.}}

\texttt{statsmodels.stats.multicomp.pairwise\_tukeyhsd}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}122}]:} \PY{c+c1}{\PYZsh{} Importing tukey\PYZsq{}s test}
          \PY{k+kn}{from} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{stats}\PY{n+nn}{.}\PY{n+nn}{multicomp} \PY{k}{import} \PY{n}{pairwise\PYZus{}tukeyhsd} \PY{k}{as} \PY{n}{tukey}
          
          \PY{c+c1}{\PYZsh{} Defome the dataframe containing column of interest and group labels. }
          \PY{n}{df\PYZus{}test\PYZus{}hypothesis} \PY{o}{=} \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{week\PYZus{}day}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
          \PY{n}{grp\PYZus{}labels} \PY{o}{=} \PY{n}{df\PYZus{}test\PYZus{}hypothesis}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          
          \PY{c+c1}{\PYZsh{} Run tukey\PYZsq{}s test}
          \PY{n}{tukey\PYZus{}results} \PY{o}{=} \PY{n}{tukey}\PY{p}{(}\PY{n}{df\PYZus{}test\PYZus{}hypothesis}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{grp\PYZus{}labels}\PY{p}{,} \PY{l+m+mf}{0.05}\PY{p}{)}
          
          
          \PY{c+c1}{\PYZsh{} Save the results into a dataframe}
          \PY{n}{table\PYZus{}H3\PYZus{}tukey} \PY{o}{=} \PY{n}{tukey\PYZus{}table}\PY{p}{(}\PY{n}{tukey\PYZus{}results}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} save for user}
          \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user}\PY{o}{==}\PY{k+kc}{True}\PY{p}{:}
              \PY{n}{table\PYZus{}H3\PYZus{}tukey}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}tukey.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{table\PYZus{}H3\PYZus{}tukey}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}tukey.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{table\PYZus{}H3\PYZus{}tukey}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}\PY{o}{.}\PY{n}{to\PYZus{}html}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}tukey.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
          
          \PY{c+c1}{\PYZsh{} Display any significant pairwise comparisons. }
          \PY{n}{tukey\PYZus{}results}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} display(table\PYZus{}H3\PYZus{}tukey.loc[table\PYZus{}H3\PYZus{}tukey[\PYZsq{}reject\PYZsq{}]==True])}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}122}]:} <class 'statsmodels.iolib.table.SimpleTable'>
\end{Verbatim}
            
    \textbf{There were no significant pairwise comparisons.}

    \hypertarget{save-this-using-groupby-to-get-mean-sem-for-plotting}{%
\paragraph{SAVE THIS: using groupby to get mean, sem, for
plotting}\label{save-this-using-groupby-to-get-mean-sem-for-plotting}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}123}]:} \PY{c+c1}{\PYZsh{} WANT TO CALCULATE MEAN AND SEM FOR BAR PLOT FOR DF}
          \PY{c+c1}{\PYZsh{} Calc Standard Error of the Mean for PLotting.}
          \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{sem}
          
          \PY{n}{d\PYZus{}plot}\PY{o}{=}\PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
          \PY{n}{d\PYZus{}plot}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}
          \PY{n}{d\PYZus{}plot}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sem}\PY{p}{(}\PY{p}{)}
          \PY{n}{d\PYZus{}plot}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{std}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{p}{)}
          \PY{n}{d\PYZus{}plot}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}year\PYZus{}orders}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{count}\PY{p}{(}\PY{p}{)}
          
          \PY{n}{df\PYZus{}plot} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{o}{.}\PY{n}{from\PYZus{}dict}\PY{p}{(}\PY{n}{d\PYZus{}plot}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Convert month index to month\PYZus{}num column}
          \PY{n}{df\PYZus{}plot}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}num}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{index}
          
          \PY{c+c1}{\PYZsh{} Use month\PYZus{}dict to get months labeled with names}
          \PY{n}{df\PYZus{}plot}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{n}{df\PYZus{}plot}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}num}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{map}\PY{p}{(}\PY{n}{month\PYZus{}dict}\PY{p}{)}
          \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{drop}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}124}]:} \PY{n}{display}\PY{p}{(}\PY{n}{df\PYZus{}plot}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}
              mean      sem       std     n   month_num month_name
month_name                                                        
jan         1766.820  229.216  2150.241   88      1         jan   
feb         1661.433  284.950  2596.015   83      2         feb   
mar         1392.246  195.747  1986.617  103      3         mar   
apr         1684.111  210.209  2153.997  105      4         apr   
may         1567.716  261.781  1775.482   46      5         may   
jun         1212.093  152.377   834.602   30      6         jun   
jul         1434.232  204.701  1518.103   55      7         jul   
aug         1254.706  141.289  1076.025   58      8         aug   
sep         1366.844  172.445  1335.752   60      9         sep   
oct         1629.140  209.654  1677.231   64     10         oct   
nov         1510.743  215.250  1653.365   59     11         nov   
dec         1476.431  164.975  1466.328   79     12         dec   
    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}125}]:} \PY{c+c1}{\PYZsh{} export table with mean and sem for all months}
          \PY{n}{H3\PYZus{}mean\PYZus{}sem} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H\PYZsh{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{std}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
          
          \PY{k}{for} \PY{n}{month} \PY{o+ow}{in} \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{index}\PY{p}{:}
             
              \PY{n}{h} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H3}\PY{l+s+s1}{\PYZsq{}}
              \PY{n}{group} \PY{o}{=} \PY{n}{month}
              \PY{n}{mo\PYZus{}mean} \PY{o}{=} \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{month}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              \PY{n}{mo\PYZus{}sem} \PY{o}{=} \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{month}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              \PY{n}{mo\PYZus{}std} \PY{o}{=} \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{month}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{std}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              \PY{n}{n} \PY{o}{=} \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{month}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              \PY{n}{H3\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{h}\PY{p}{,}\PY{n}{group}\PY{p}{,}\PY{n}{mo\PYZus{}mean}\PY{p}{,}\PY{n}{mo\PYZus{}sem}\PY{p}{,}\PY{n}{mo\PYZus{}std}\PY{p}{,}\PY{n}{n}\PY{p}{]}\PY{p}{)}
          
          \PY{n}{table\PYZus{}H3\PYZus{}mean\PYZus{}sem} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{H3\PYZus{}mean\PYZus{}sem}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Export csv if user sets save\PYZus{}for\PYZus{}user to True}
          \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user}\PY{o}{==}\PY{k+kc}{True}\PY{p}{:}
              \PY{n}{table\PYZus{}H3\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}mean\PYZus{}sem.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
              \PY{n}{table\PYZus{}H3\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}mean\PYZus{}sem.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}        
              \PY{n}{table\PYZus{}H3\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{)}\PY{o}{.}\PY{n}{to\PYZus{}html}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}mean\PYZus{}sem.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}    
              
          \PY{n}{display}\PY{p}{(}\PY{n}{table\PYZus{}H3\PYZus{}mean\PYZus{}sem}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}
    H# Group   mean    sem     std    n 
0   H3   jan  1767.0  229.0  2150.0   88
1   H3   feb  1661.0  285.0  2596.0   83
2   H3   mar  1392.0  196.0  1987.0  103
3   H3   apr  1684.0  210.0  2154.0  105
4   H3   may  1568.0  262.0  1775.0   46
5   H3   jun  1212.0  152.0   835.0   30
6   H3   jul  1434.0  205.0  1518.0   55
7   H3   aug  1255.0  141.0  1076.0   58
8   H3   sep  1367.0  172.0  1336.0   60
9   H3   oct  1629.0  210.0  1677.0   64
10  H3   nov  1511.0  215.0  1653.0   59
11  H3   dec  1476.0  165.0  1466.0   79
    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}126}]:} \PY{c+c1}{\PYZsh{} display(table\PYZus{}H3\PYZus{}test\PYZus{}results)}
          \PY{c+c1}{\PYZsh{} display(table\PYZus{}H3\PYZus{}tukey)}
          \PY{n}{display}\PY{p}{(}\PY{n}{table\PYZus{}H3\PYZus{}test\PYZus{}results}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}
           Group:           TestName     Test Purpose     stat          p      \
0                    jul    normaltest       Normality     28.482   6.534e-07   
1                    aug    normaltest       Normality     35.416   2.039e-08   
2                    sep    normaltest       Normality     20.546   3.455e-05   
3                    oct    normaltest       Normality     55.131   1.067e-12   
4                    nov    normaltest       Normality     47.558   4.708e-11   
5                    dec    normaltest       Normality     65.102   7.299e-15   
6                    jan    normaltest       Normality     71.688   2.711e-16   
7                    feb    normaltest       Normality     91.352   1.456e-20   
8                    mar    normaltest       Normality    139.722   4.568e-31   
9                    apr    normaltest       Normality     81.807   1.722e-18   
10                   may    normaltest       Normality     51.838   5.539e-12   
11                   jun    normaltest       Normality      4.170   1.243e-01   
12             Total Pop    normaltest       Normality    643.646  1.714e-140   
13  jul vs. Other Months        levene  Equal Variance      0.089   7.654e-01   
14  aug vs. Other Months        levene  Equal Variance      2.312   1.288e-01   
15  sep vs. Other Months        levene  Equal Variance      0.416   5.189e-01   
16  oct vs. Other Months        levene  Equal Variance      0.050   8.239e-01   
17  nov vs. Other Months        levene  Equal Variance      0.001   9.735e-01   
18  dec vs. Other Months        levene  Equal Variance      0.157   6.923e-01   
19  jan vs. Other Months        levene  Equal Variance      0.872   3.506e-01   
20  feb vs. Other Months        levene  Equal Variance      1.397   2.376e-01   
21  mar vs. Other Months        levene  Equal Variance      0.516   4.729e-01   
22  apr vs. Other Months        levene  Equal Variance      1.650   1.994e-01   
23  may vs. Other Months        levene  Equal Variance      0.024   8.773e-01   
24  jun vs. Other Months        levene  Equal Variance      1.931   1.650e-01   
25  jul vs. Other Months  mannwhitneyu         Hi sig.  45417.000   2.111e-02   
26  aug vs. Other Months  mannwhitneyu         Hi sig.  47377.000   1.677e-02   
27  sep vs. Other Months  mannwhitneyu         Hi sig.  48735.000   1.251e-02   
28  oct vs. Other Months  mannwhitneyu         Hi sig.  58962.500   3.573e-01   
29  nov vs. Other Months  mannwhitneyu         Hi sig.  50998.000   7.543e-02   
30  dec vs. Other Months  mannwhitneyu         Hi sig.  69149.500   1.070e-01   
31  jan vs. Other Months  mannwhitneyu         Hi sig.  78282.500   2.502e-01   
32  feb vs. Other Months  mannwhitneyu         Hi sig.  64028.000   1.150e-03   
33  mar vs. Other Months  mannwhitneyu         Hi sig.  75748.000   1.106e-04   
34  apr vs. Other Months  mannwhitneyu         Hi sig.  85237.000   1.366e-02   
35  may vs. Other Months  mannwhitneyu         Hi sig.  40501.500   1.652e-01   
36  jun vs. Other Months  mannwhitneyu         Hi sig.  26240.500   1.355e-01   
37                   jul       Cohen_d      efect Size  26240.500         NaN   
38                   aug       Cohen_d      efect Size  26240.500         NaN   
39                   sep       Cohen_d      efect Size  26240.500         NaN   
40                   oct       Cohen_d      efect Size  26240.500         NaN   
41                   nov       Cohen_d      efect Size  26240.500         NaN   
42                   dec       Cohen_d      efect Size  26240.500         NaN   
43                   jan       Cohen_d      efect Size  26240.500         NaN   
44                   feb       Cohen_d      efect Size  26240.500         NaN   
45                   mar       Cohen_d      efect Size  26240.500         NaN   
46                   apr       Cohen_d      efect Size  26240.500         NaN   
47                   may       Cohen_d      efect Size  26240.500         NaN   
48                   jun       Cohen_d      efect Size  26240.500         NaN   

   p<.05?  
0    True  
1    True  
2    True  
3    True  
4    True  
5    True  
6    True  
7    True  
8    True  
9    True  
10   True  
11  False  
12   True  
13  False  
14  False  
15  False  
16  False  
17  False  
18  False  
19  False  
20  False  
21  False  
22  False  
23  False  
24  False  
25   True  
26   True  
27   True  
28  False  
29  False  
30  False  
31  False  
32   True  
33   True  
34   True  
35  False  
36  False  
37   None  
38   None  
39   None  
40   None  
41   None  
42   None  
43   None  
44   None  
45   None  
46   None  
47   None  
48   None  
    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}127}]:} \PY{c+c1}{\PYZsh{} Display final results for H3\PYZus{}tests}
          \PY{c+c1}{\PYZsh{} H3\PYZus{}tests\PYZus{}table = list2df(H3\PYZus{}tests)}
          \PY{n}{table\PYZus{}H3\PYZus{}test\PYZus{}results}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TestName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{get\PYZus{}group}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mannwhitneyu}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}127}]:}            Group:           TestName   Test Purpose   stat        p     p<.05?
          25  jul vs. Other Months  mannwhitneyu    Hi sig.    45417.0  2.111e-02   True
          26  aug vs. Other Months  mannwhitneyu    Hi sig.    47377.0  1.677e-02   True
          27  sep vs. Other Months  mannwhitneyu    Hi sig.    48735.0  1.251e-02   True
          28  oct vs. Other Months  mannwhitneyu    Hi sig.    58962.5  3.573e-01  False
          29  nov vs. Other Months  mannwhitneyu    Hi sig.    50998.0  7.543e-02  False
          30  dec vs. Other Months  mannwhitneyu    Hi sig.    69149.5  1.070e-01  False
          31  jan vs. Other Months  mannwhitneyu    Hi sig.    78282.5  2.502e-01  False
          32  feb vs. Other Months  mannwhitneyu    Hi sig.    64028.0  1.150e-03   True
          33  mar vs. Other Months  mannwhitneyu    Hi sig.    75748.0  1.106e-04   True
          34  apr vs. Other Months  mannwhitneyu    Hi sig.    85237.0  1.366e-02   True
          35  may vs. Other Months  mannwhitneyu    Hi sig.    40501.5  1.652e-01  False
          36  jun vs. Other Months  mannwhitneyu    Hi sig.    26240.5  1.355e-01  False
\end{Verbatim}
            
    \hypertarget{conclusions-for-hypothesis-3}{%
\subsection{\texorpdfstring{\textbf{\emph{Conclusions for Hypothesis
3:}}}{Conclusions for Hypothesis 3:}}\label{conclusions-for-hypothesis-3}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{We first used D'Agostino \& Perason's test (normaltest) to
  check for normal distributions}

  \begin{itemize}
  \tightlist
  \item
    Both groups had p-values very far below our \(\alpha=0.05\) (Rows
    0,1 below)

    \begin{itemize}
    \tightlist
    \item
      We reected the null hypothesis that the groups came from a
      population with a normal distribution.
    \end{itemize}
  \end{itemize}
\item
  \textbf{We tested for equal variances using Levene's test. }

  \begin{itemize}
  \tightlist
  \item
    Levene's test had a signifcant p-value, so we rejected the
    hypothesis that the groups have equal variances
  \end{itemize}
\item
  \textbf{We then concluded we need a non-parametric test, so we first
  used the Mann-Whitney U test to compare each month vs the other 11
  months}.

  \begin{itemize}
  \item
    Several months were significantly different than the rest of the
    year:

    \begin{itemize}
    \tightlist
    \item
      Jul, Aug, Sep, Feb, Mar, Apr
    \end{itemize}
  \item
  \end{itemize}
\item
  \textbf{We then did pairwise comparisons of all months using Tukey's
  test}

  \begin{itemize}
  \tightlist
  \item
    We could not reject the null hypothesis that month affects the
    quantity sold.
  \item
    It is difficult to interpret the contradicting results of the Mann
    Whitney U and the Tukey's test.

    \begin{itemize}
    \tightlist
    \item
      But since Tukey's test corrects for multiple comparisons, it
      should be trusted over M.W.U.
    \end{itemize}
  \end{itemize}
\end{enumerate}

    \hypertarget{summary-figure-h3}{%
\subsubsection{Summary Figure H3}\label{summary-figure-h3}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}128}]:} \PY{c+c1}{\PYZsh{}  ax.bar(x=df\PYZus{}plot.index, height= df\PYZus{}plot[\PYZsq{}mean\PYZsq{}], yerr=df\PYZus{}plot[\PYZsq{}sem\PYZsq{}])}
          
          \PY{k}{with} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dark\PYZus{}background}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
              \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
              \PY{n}{ax} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}subplot}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
              
              \PY{n}{color} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{red}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{orange}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{yellow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{green}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{blue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{indigo}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{violet}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              
              \PY{n}{err\PYZus{}kws} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ecolor}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{capsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{,}
                         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{elinewidth}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{2} \PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{capthick}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+m+mi}{2}\PY{p}{\PYZcb{}}
              
              \PY{n}{fontTitle} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontfamily}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{serif}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontweight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{16}\PY{p}{\PYZcb{}}
              
              \PY{n}{fontAxis} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontfamily}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{serif}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontweight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                         \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fontsize}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{12}\PY{p}{\PYZcb{}}
              \PY{n}{labels} \PY{o}{=} \PY{p}{[}\PY{n+nb}{str}\PY{p}{(}\PY{n}{i}\PY{p}{)}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{df\PYZus{}plot}\PY{o}{.}\PY{n}{index}\PY{p}{]}
              \PY{n}{ax}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{x} \PY{o}{=} \PY{n}{labels}\PY{p}{,}\PY{n}{width}\PY{o}{=}\PY{l+m+mf}{0.6}\PY{p}{,} \PY{n}{height} \PY{o}{=} \PY{n}{df\PYZus{}plot}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{yerr} \PY{o}{=} \PY{n}{df\PYZus{}plot}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{error\PYZus{}kw}\PY{o}{=}\PY{n}{err\PYZus{}kws}\PY{p}{,}
                    \PY{n}{edgecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{white}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{linewidth} \PY{o}{=} \PY{l+m+mi}{2}\PY{p}{,}\PY{n}{color} \PY{o}{=} \PY{n}{color}\PY{p}{)}
              
              \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Order Totals By Month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontTitle}\PY{p}{)}
              \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Average Order Total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
              \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontdict}\PY{o}{=}\PY{n}{fontAxis}\PY{p}{)}
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_214_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}129}]:} \PY{c+c1}{\PYZsh{} Save figure of save\PYZus{}for\PYZus{}user is True}
          \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user} \PY{o}{==} \PY{k+kc}{True}\PY{p}{:}
              \PY{n}{fig}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{n}{fig\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H3\PYZus{}Month\PYZus{}Bar\PYZus{}mean\PYZus{}sem\PYZus{}black.png}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{300}\PY{p}{,}\PY{n}{facecolor}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{hypothesis-4}{%
\section{Hypothesis 4}\label{hypothesis-4}}

\begin{quote}
Do different countries respond to discounts more than others?
\end{quote}

\(H_1\): Different countries purchase different quantities of discounted
vs non discounted products.

\(H_0\): All countries purchase the same quantities of discounted vs non
discounted products.

\textbf{Specific Aims:}

\begin{itemize}
\tightlist
\item
  \textbf{\emph{Aim 1:To select the proper dataset for analysis, perform
  EDA, and generate data groups for testing.}}

  \begin{itemize}
  \tightlist
  \item
    Used sqlalchemy and pandas.read\_sql\_query() query =
  \end{itemize}
\item
  \textbf{\emph{Aim 2: Select the appropriate t-test based on tests for
  the assumptions of normality and homogeneity of variance.}}

  \begin{enumerate}
  \def\labelenumi{\arabic{enumi}.}
  \tightlist
  \item
    \textbf{Test for Normality}

    \begin{itemize}
    \tightlist
    \item
      D'Agostino-Pearson's normality test
      \texttt{scipy.stats.normaltest}
    \item
      Shapiro-Wilik Test \texttt{scipy.stats.shapiro}
    \end{itemize}
  \item
    \textbf{Test for Homogeneity of Variance}

    \begin{itemize}
    \tightlist
    \item
      Levene's Test \texttt{scipy.stats.levene}
    \end{itemize}
  \item
    \textbf{Choose appropriate test based upon 1. and 2.}
  \end{enumerate}
\item
  \textbf{\emph{Aim 3: To perform post-hoc painrwise comparison testing
  to determine which level of discounts affect quantity and if any
  discount has a greater effect than the others.}}

  \begin{itemize}
  \tightlist
  \item
    Tukey's test for multiple pairwise comparisons
  \end{itemize}
\end{itemize}

    \hypertarget{h4-aim-1.1-to-select-the-proper-dataset-for-analyiss-and-generate-data-groups-for-testing.}{%
\subsection{\texorpdfstring{\textbf{\emph{H4, Aim 1.1 : To select the
proper dataset for analyiss and generate data groups for
testing.}}}{H4, Aim 1.1 : To select the proper dataset for analyiss and generate data groups for testing.}}\label{h4-aim-1.1-to-select-the-proper-dataset-for-analyiss-and-generate-data-groups-for-testing.}}

\hypertarget{importing-method}{%
\paragraph{Importing Method}\label{importing-method}}

\begin{itemize}
\tightlist
\item
  Used sqlalchemy to create engine to connect to
  Northwind\_small.sqlite.
\item
  Read tables directly into dataframes
  \texttt{python\ DB\_Order\ =\ pd.read\_sql\_table(\textquotesingle{}Order\textquotesingle{},engine);\ DB\_OrderDetail\ =\ pd.read\_sql\_table(\textquotesingle{}OrderDetail\textquotesingle{},engine);}
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}130}]:} \PY{c+c1}{\PYZsh{}\PYZsh{} Extract Order and OrderDetail Tables}
          \PY{n}{DB\PYZus{}Order} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}sql\PYZus{}table}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Order}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{engine}\PY{p}{)}\PY{p}{;}
          \PY{n}{DB\PYZus{}OrderDetail} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}sql\PYZus{}table}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDetail}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{engine}\PY{p}{)}\PY{p}{;}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{DB\PYZus{}Order columns:}\PY{l+s+si}{\PYZob{}DB\PYZus{}Order.columns\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{n}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}
                \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{DB\PYZus{}OrderDetail columns:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{n}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}
               \PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+si}{\PYZob{}DB\PYZus{}OrderDetail.columns\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
2019-04-12 16:54:12,357 INFO sqlalchemy.engine.base.Engine SELECT name FROM sqlite\_master WHERE type='table' ORDER BY name
2019-04-12 16:54:12,358 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,360 INFO sqlalchemy.engine.base.Engine SELECT name FROM sqlite\_master WHERE type='view' ORDER BY name
2019-04-12 16:54:12,362 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,364 INFO sqlalchemy.engine.base.Engine PRAGMA table\_info("Order")
2019-04-12 16:54:12,365 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,367 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'Order' AND type = 'table'
2019-04-12 16:54:12,368 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,369 INFO sqlalchemy.engine.base.Engine PRAGMA foreign\_key\_list("Order")
2019-04-12 16:54:12,369 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,370 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'Order' AND type = 'table'
2019-04-12 16:54:12,371 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,372 INFO sqlalchemy.engine.base.Engine PRAGMA index\_list("Order")
2019-04-12 16:54:12,373 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,374 INFO sqlalchemy.engine.base.Engine PRAGMA index\_list("Order")
2019-04-12 16:54:12,374 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,375 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'Order' AND type = 'table'
2019-04-12 16:54:12,376 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,379 INFO sqlalchemy.engine.base.Engine SELECT "Order"."Id", "Order"."CustomerId", "Order"."EmployeeId", "Order"."OrderDate", "Order"."RequiredDate", "Order"."ShippedDate", "Order"."ShipVia", "Order"."Freight", "Order"."ShipName", "Order"."ShipAddress", "Order"."ShipCity", "Order"."ShipRegion", "Order"."ShipPostalCode", "Order"."ShipCountry" 
FROM "Order"
2019-04-12 16:54:12,380 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,400 INFO sqlalchemy.engine.base.Engine SELECT name FROM sqlite\_master WHERE type='table' ORDER BY name
2019-04-12 16:54:12,401 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,404 INFO sqlalchemy.engine.base.Engine SELECT name FROM sqlite\_master WHERE type='view' ORDER BY name
2019-04-12 16:54:12,405 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,407 INFO sqlalchemy.engine.base.Engine PRAGMA table\_info("OrderDetail")
2019-04-12 16:54:12,408 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,411 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'OrderDetail' AND type = 'table'
2019-04-12 16:54:12,412 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,415 INFO sqlalchemy.engine.base.Engine PRAGMA foreign\_key\_list("OrderDetail")
2019-04-12 16:54:12,416 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,417 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'OrderDetail' AND type = 'table'
2019-04-12 16:54:12,418 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,419 INFO sqlalchemy.engine.base.Engine PRAGMA index\_list("OrderDetail")
2019-04-12 16:54:12,420 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,422 INFO sqlalchemy.engine.base.Engine PRAGMA index\_list("OrderDetail")
2019-04-12 16:54:12,423 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,424 INFO sqlalchemy.engine.base.Engine PRAGMA index\_info("sqlite\_autoindex\_OrderDetail\_1")
2019-04-12 16:54:12,425 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,427 INFO sqlalchemy.engine.base.Engine SELECT sql FROM  (SELECT * FROM sqlite\_master UNION ALL   SELECT * FROM sqlite\_temp\_master) WHERE name = 'OrderDetail' AND type = 'table'
2019-04-12 16:54:12,427 INFO sqlalchemy.engine.base.Engine ()
2019-04-12 16:54:12,430 INFO sqlalchemy.engine.base.Engine SELECT "OrderDetail"."Id", "OrderDetail"."OrderId", "OrderDetail"."ProductId", "OrderDetail"."UnitPrice", "OrderDetail"."Quantity", "OrderDetail"."Discount" 
FROM "OrderDetail"
2019-04-12 16:54:12,431 INFO sqlalchemy.engine.base.Engine ()
DB\_Order columns:Index(['Id', 'CustomerId', 'EmployeeId', 'OrderDate', 'RequiredDate',
       'ShippedDate', 'ShipVia', 'Freight', 'ShipName', 'ShipAddress',
       'ShipCity', 'ShipRegion', 'ShipPostalCode', 'ShipCountry'],
      dtype='object') n
DB\_OrderDetail columns: n
Index(['Id', 'OrderId', 'ProductId', 'UnitPrice', 'Quantity', 'Discount'], dtype='object')

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}131}]:} \PY{c+c1}{\PYZsh{} Rename Id in DB\PYZus{}Order, rename index,and remove unwanted columns}
          \PY{n}{DB\PYZus{}Order}\PY{o}{.}\PY{n}{rename}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderPlaced}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Drop unwanted columns from DB\PYZus{}Orde to make df\PYZus{}Order}
          \PY{n}{regex\PYZus{}to\PYZus{}drop} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Freight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          
          \PY{n}{df\PYZus{}Order} \PY{o}{=} \PY{n}{df\PYZus{}drop\PYZus{}regex}\PY{p}{(}\PY{n}{DB\PYZus{}Order}\PY{p}{,} \PY{n}{regex\PYZus{}to\PYZus{}drop}\PY{p}{)}
          \PY{n}{df\PYZus{}Order}\PY{o}{.}\PY{n}{rename}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderPlaced}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
          \PY{n}{df\PYZus{}Order}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Removed Date

Removed Freight


    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}131}]:}    OrderId CustomerId  EmployeeId  OrderDate   ShipVia  \textbackslash{}
          0   10248     VINET         5      2012-07-04     3      
          1   10249     TOMSP         6      2012-07-05     1      
          2   10250     HANAR         4      2012-07-08     2      
          3   10251     VICTE         3      2012-07-08     1      
          4   10252     SUPRD         4      2012-07-09     2      
          
                     ShipName               ShipAddress          ShipCity     \textbackslash{}
          0  Vins et alcools Chevalier    59 rue de l'Abbaye           Reims   
          1         Toms Spezialitäten         Luisenstr. 48         Münster   
          2              Hanari Carnes       Rua do Paço, 67  Rio de Janeiro   
          3       Victuailles en stock    2, rue du Commerce            Lyon   
          4           Suprêmes délices  Boulevard Tirou, 255       Charleroi   
          
               ShipRegion   ShipPostalCode ShipCountry  
          0  Western Europe        51100       France   
          1  Western Europe        44087      Germany   
          2   South America    05454-876       Brazil   
          3  Western Europe        69004       France   
          4  Western Europe       B-6000      Belgium   
\end{Verbatim}
            
    \hypertarget{processing-data-to-generate-features}{%
\subsubsection{Processing Data to Generate
Features}\label{processing-data-to-generate-features}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}132}]:} \PY{c+c1}{\PYZsh{} CALCULATING THE SUB TOTALS AMD ORDER TOTALS}
          \PY{n}{df\PYZus{}merged} \PY{o}{=} \PY{n}{DB\PYZus{}OrderDetail}\PY{o}{.}\PY{n}{merge}\PY{p}{(}\PY{n}{df\PYZus{}Order}\PY{p}{,} \PY{n}{on}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{copy}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
          \PY{n}{df\PYZus{}order\PYZus{}geo} \PY{o}{=} \PY{n}{df\PYZus{}merged}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{}Apply calc\PYZus{}product\PYZus{}price to every row }
          \PY{n}{df\PYZus{}price\PYZus{}geo} \PY{o}{=} \PY{n}{df\PYZus{}order\PYZus{}geo}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{calc\PYZus{}product\PYZus{}price}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Apply\PYZus{}calc\PYZus{}order\PYZus{}total to every row}
          \PY{n}{df\PYZus{}price\PYZus{}geo} \PY{o}{=} \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{calc\PYZus{}order\PYZus{}total}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{)}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)} 
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}133}]:} \PY{c+c1}{\PYZsh{}convert dates to datetime}
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{df\PYZus{}price\PYZus{}geo}\PY{o}{.}\PY{n}{OrderDate} \PY{p}{)}
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{o}{.}\PY{n}{OrderDate}\PY{o}{.}\PY{n}{agg}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{max}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{min}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}133}]:} max   2014-05-06
          min   2012-07-04
          Name: OrderDate, dtype: datetime64[ns]
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}134}]:} \PY{c+c1}{\PYZsh{} Create columns for day of week and month}
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{df\PYZus{}price\PYZus{}geo}\PY{o}{.}\PY{n}{OrderDate}\PY{p}{)}
          
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{week\PYZus{}day}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{dayofweek}
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderDate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{month}
          
          \PY{c+c1}{\PYZsh{} df\PYZus{}price\PYZus{}geo.info()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}135}]:} \PY{c+c1}{\PYZsh{} Make list of month names to map onto dataframe.}
          \PY{n}{months} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{jan}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{feb}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mar}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{apr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{may}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{jun}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{jul}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{aug}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sep}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{oct}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{nov}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dec}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{c+c1}{\PYZsh{}creating label names}
          
          \PY{n}{month\PYZus{}dict} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{n+nb}{zip}\PY{p}{(} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{n+nb}{len}\PY{p}{(}\PY{n}{months}\PY{p}{)}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}\PY{p}{,}\PY{n}{months}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{} zip the two into a dictionary}
          
          \PY{c+c1}{\PYZsh{} MAP THE MONTH\PYZus{}DICT ONTO NEW COLUMN month\PYZus{}name}
          \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month\PYZus{}name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}price\PYZus{}geo}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{month}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{map}\PY{p}{(}\PY{n}{month\PYZus{}dict}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} df\PYZus{}price\PYZus{}geo[\PYZsq{}month\PYZus{}name\PYZsq{}].value\PYZus{}counts()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}136}]:} \PY{c+c1}{\PYZsh{}renamed df for ease of typing \PYZam{} it is a comprehensize starting point}
          \PY{n}{df} \PY{o}{=} \PY{n}{df\PYZus{}price\PYZus{}geo}
          \PY{n}{df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}136}]:}       Id     OrderId  ProductId  UnitPrice  Quantity  Discount CustomerId  \textbackslash{}
          0  10248/11   10248      11        14.0        12        0.0      VINET     
          1  10248/42   10248      42         9.8        10        0.0      VINET     
          2  10248/72   10248      72        34.8         5        0.0      VINET     
          3  10249/14   10249      14        18.6         9        0.0      TOMSP     
          4  10249/51   10249      51        42.4        40        0.0      TOMSP     
          
             EmployeeId OrderDate   ShipVia  {\ldots}    ShipRegion   ShipPostalCode  \textbackslash{}
          0       5     2012-07-04     3     {\ldots}  Western Europe      51100       
          1       5     2012-07-04     3     {\ldots}  Western Europe      51100       
          2       5     2012-07-04     3     {\ldots}  Western Europe      51100       
          3       6     2012-07-05     1     {\ldots}  Western Europe      44087       
          4       6     2012-07-05     1     {\ldots}  Western Europe      44087       
          
            ShipCountry  price  OnSale discounted\_order  order\_total  week\_day  month  \textbackslash{}
          0     France    168.0    0           0            440.0         2       7     
          1     France     98.0    0           0            440.0         2       7     
          2     France    174.0    0           0            440.0         2       7     
          3    Germany    167.4    0           0           1863.4         3       7     
          4    Germany   1696.0    0           0           1863.4         3       7     
          
             month\_name  
          0      jul     
          1      jul     
          2      jul     
          3      jul     
          4      jul     
          
          [5 rows x 23 columns]
\end{Verbatim}
            
    \hypertarget{h4-aim-1.2-exploring-and-engineering-features-to-best-address-hypothesis.}{%
\subsubsection{\texorpdfstring{\textbf{\emph{H4, Aim 1.2: Exploring and
Engineering features to best address
hypothesis.}}}{H4, Aim 1.2: Exploring and Engineering features to best address hypothesis.}}\label{h4-aim-1.2-exploring-and-engineering-features-to-best-address-hypothesis.}}

\begin{itemize}
\tightlist
\item
  difference between quantity bought with and without discount
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}137}]:} \PY{c+c1}{\PYZsh{} Separate each country\PYZsq{}s sales data into a dictionary in order to create New features for global discount effects on sales}
          \PY{n}{D\PYZus{}country} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
          
          \PY{n}{countries} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipCountry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{p}{)}\PY{p}{)}
          
          \PY{k}{for} \PY{n}{country} \PY{o+ow}{in} \PY{n}{countries}\PY{p}{:}
              
              \PY{c+c1}{\PYZsh{}check for discounts    }
              \PY{n}{check\PYZus{}if\PYZus{}discounted} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipCountry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{get\PYZus{}group}\PY{p}{(}\PY{n}{country}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{p}{)}\PY{p}{)}
              
              \PY{k}{if} \PY{n}{check\PYZus{}if\PYZus{}discounted} \PY{o}{\PYZlt{}} \PY{l+m+mi}{2}\PY{p}{:}
                  \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}country\PYZcb{}}\PY{l+s+s1}{ did not have both discounted and non\PYZhy{}discounted items.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                  \PY{k}{continue}
                  
              \PY{k}{else}\PY{p}{:}
                  
                  \PY{c+c1}{\PYZsh{}Organize prices based on sales and fullprice    }
                  \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{o}{=}\PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
          
                  \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df\PYZus{}sale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipCountry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{get\PYZus{}group}\PY{p}{(}\PY{n}{country}\PY{p}{)}
                  
                  \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df\PYZus{}fullprice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipCountry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{get\PYZus{}group}\PY{p}{(}\PY{n}{country}\PY{p}{)} 
                  
                  \PY{c+c1}{\PYZsh{}Get total sales}
                  \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
                  \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df\PYZus{}sale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                  \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FullPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df\PYZus{}fullprice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                  
                  \PY{c+c1}{\PYZsh{}Get Quantity sold at discount/nondiscount}
                  \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{=}\PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
                  \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df\PYZus{}sale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                  \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FullPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{D\PYZus{}country}\PY{p}{[}\PY{n}{country}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{df\PYZus{}fullprice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Poland did not have both discounted and non-discounted items.
Norway did not have both discounted and non-discounted items.
Argentina did not have both discounted and non-discounted items.

    \end{Verbatim}

    \hypertarget{engineered-discount-preference-features-to-explore}{%
\subsubsection{Engineered Discount-Preference Features to
Explore}\label{engineered-discount-preference-features-to-explore}}

\begin{itemize}
\tightlist
\item
  \texttt{Price\_Disc-Full}: Sum of all purchases of discounted items
  minus the sum of all purchases of full price items.
\item
  \texttt{Price\_Disc/Total}: Ratio of money spent on discounted
  products / total money spent on orders.
\item
  \texttt{Quant\_Disc-Full}: Sum of all discounted products' quantities
  minus sum of all full price products' quantities.
\item
  \texttt{Quant\_Disc/Total}: Ratio of quantities of discounted products
  / total quantity of all products ordered.
\item
  \texttt{AvgPrice\_Disc}: Average price of discounted items purchased
  (sum(price) / sum(quantity) of discounted items.
\item
  \texttt{AvgPrice\_full}: Average price of full price items purchased
  (sum(price) / sum(quantity) of full price items.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}138}]:} \PY{c+c1}{\PYZsh{} Calculate metrics for country\PYZhy{}preference for discounted items. }
          \PY{n}{dC} \PY{o}{=} \PY{n}{D\PYZus{}country}
          \PY{n}{results} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Price\PYZus{}Disc\PYZhy{}Full}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Price\PYZus{}Disc/Total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quant\PYZus{}Disc\PYZhy{}Full}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quant\PYZus{}Disc/Total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AvgPrice\PYZus{}Disc}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AvgPrice\PYZus{}Full}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AvgPrice/item}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
          
          \PY{c+c1}{\PYZsh{} For each country:}
          \PY{k}{for} \PY{n}{c} \PY{o+ow}{in} \PY{n}{dC}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{:}
              
              \PY{c+c1}{\PYZsh{} fill in temp list with the names of the data that will be placed in their location. }
              \PY{n}{temp} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Price\PYZus{}Disc\PYZhy{}Full}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Price\PYZus{}Disc/Total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quant\PYZus{}Disc\PYZhy{}Full}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                      \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quant\PYZus{}Disc/Total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AvgPrice\PYZus{}Disc}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AvgPrice\PYZus{}Full}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AvgPrice/item}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              
              \PY{n}{calc} \PY{o}{=} \PY{n}{dC}\PY{p}{[}\PY{n}{c}\PY{p}{]}
              \PY{n}{i}\PY{o}{=}\PY{l+m+mi}{0}
              \PY{n}{temp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{c}   \PY{c+c1}{\PYZsh{} country name}
              
              \PY{n}{i}\PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
              \PY{n}{temp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}         \PY{c+c1}{\PYZsh{} price sub}
                         \PY{o}{\PYZhy{}} \PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FullPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)}
              \PY{n}{i}\PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
              \PY{n}{temp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}        \PY{c+c1}{\PYZsh{} price/total }
                         \PY{o}{/} \PY{p}{(}\PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FullPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)} 
                         \PY{o}{+} \PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
              \PY{n}{i}\PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
              \PY{n}{temp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}      \PY{c+c1}{\PYZsh{} quantitty sub}
                         \PY{o}{\PYZhy{}} \PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FullPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)}
              \PY{n}{i}\PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
              \PY{n}{temp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}      \PY{c+c1}{\PYZsh{} quantity total}
                         \PY{o}{/} \PY{p}{(}\PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FullPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)} 
                         \PY{o}{+} \PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
              \PY{n}{i}\PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
              \PY{n}{temp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}       \PY{c+c1}{\PYZsh{} average spent on sale }
                         \PY{o}{/} \PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)} \PY{p}{)}
              \PY{n}{i}\PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}                                           
              \PY{n}{temp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FullPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}      \PY{c+c1}{\PYZsh{} average cost full price }
                         \PY{o}{/} \PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FullPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)} 
              \PY{n}{i}\PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
              \PY{n}{temp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FullPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}  \PY{c+c1}{\PYZsh{} average spent on all items}
                         \PY{o}{+} \PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)} 
                         \PY{o}{/} \PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FullPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)} 
                         \PY{o}{+} \PY{n}{calc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OnSale}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)}
              \PY{n}{results}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{temp}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Display the engineered features.}
          \PY{n}{df\PYZus{}countries} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{results}\PY{p}{)}
          \PY{n}{df\PYZus{}countries}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{country}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
          \PY{n}{df\PYZus{}countries}\PY{o}{.}\PY{n}{sort\PYZus{}index}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}138}]:}              Price\_Disc-Full  Price\_Disc/Total  Quant\_Disc-Full  \textbackslash{}
          country                                                           
          Austria          3028.838           0.512            -159         
          Belgium        -15311.105           0.274            -572         
          Brazil         -19941.483           0.407            -451         
          Canada           5379.490           0.554             162         
          Denmark         -9929.978           0.348            -220         
          Finland         -6910.047           0.316            -331         
          France         -21576.298           0.367            -378         
          Germany        -33551.827           0.427            -125         
          Ireland          8062.625           0.581             566         
          Italy            1988.355           0.563              78         
          Mexico         -16575.522           0.149            -729         
          Portugal        -1202.638           0.448              75         
          Spain           -3433.380           0.405            -132         
          Sweden          -8972.360           0.418            -263         
          Switzerland     -7951.421           0.375             -87         
          UK             -26981.810           0.271           -1170         
          USA            -47182.750           0.404            -802         
          Venezuela      -17156.671           0.349            -638         
          
                       Quant\_Disc/Total  AvgPrice\_Disc  AvgPrice\_Full  AvgPrice/item  
          country                                                                     
          Austria            0.485          26.165         23.465        65016.102    
          Belgium            0.295          22.578         25.018        24987.407    
          Brazil             0.447          22.915         27.005        65350.145    
          Canada             0.541          25.897         24.598        23511.903    
          Denmark            0.406          23.927         30.641        21786.853    
          Finland            0.313          21.480         21.151        13146.836    
          France             0.442          20.787         28.341        52921.770    
          Germany            0.493          21.648         28.254       136483.298    
          Ireland            0.668          25.797         37.493        22135.556    
          Italy              0.547          19.732         18.524         7364.769    
          Mexico             0.144          23.671         22.895        20230.795    
          Portugal           0.570          16.891         27.675         6663.923    
          Spain              0.408          24.829         25.196        11018.407    
          Sweden             0.441          23.085         25.407        32737.974    
          Switzerland        0.466          19.984         29.107        20433.471    
          UK                 0.287          20.350         21.972        43770.737    
          USA                0.457          23.265         28.895       150667.262    
          Venezuela          0.391          17.256         20.696        38143.745    
\end{Verbatim}
            
    \hypertarget{engineered-additional-features-for-comparing-countries}{%
\paragraph{Engineered additional features for comparing
countries}\label{engineered-additional-features-for-comparing-countries}}

\begin{itemize}
\tightlist
\item
  \texttt{AvgOrderPrice}: Mean of all order totals for a country.
\item
  \texttt{PctOf-orders}: The \% of all global orders placed by a
  country.
\item
  \texttt{PctOf-Income}: The \% of all global income (order\_totals)
  placed by a country.
\item
  \texttt{orders2-Income}: \emph{Comparing percentage of all orders /
  percentage on overall income}
\item
  \texttt{DiscountGap}: Country's AvgPrice\_Full - AvgPrice\_Discounted.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}139}]:} \PY{n}{cleaned} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{df}\PY{o}{.}\PY{n}{drop\PYZus{}duplicates}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Making average price of sales for each country}
          \PY{n}{df\PYZus{}countries}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AvgOrderPrice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{cleaned}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipCountry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{p}{)}
          
          
          \PY{c+c1}{\PYZsh{}The \PYZpc{} of all global orders placed by a country. }
          \PY{n}{df\PYZus{}countries}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PctOf\PYZhy{}orders}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{p}{(}\PY{n}{cleaned}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipCountry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{count}\PY{p}{(}\PY{p}{)} 
                                                \PY{o}{/} \PY{n}{cleaned}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{count}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{o}{*}\PY{l+m+mi}{100}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} The \PYZpc{} of all global income (order\PYZus{}totals) placed by a country. }
          \PY{n}{df\PYZus{}countries}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PctOf\PYZhy{}Income}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{p}{(}\PY{n}{cleaned}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipCountry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}
                                              \PY{o}{/} \PY{n}{cleaned}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{o}{*}\PY{l+m+mi}{100}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{}Checking results, Three countries had no disc.}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{df\PYZus{}countries}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PctOf\PYZhy{}orders}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{,}
                \PY{n}{df\PYZus{}countries}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PctOf\PYZhy{}Income}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)} 
          
          
          \PY{c+c1}{\PYZsh{}comparing percentage of all orders vs percentage on overall income }
          \PY{n}{df\PYZus{}countries}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{orders2\PYZhy{}Income}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{df\PYZus{}countries}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PctOf\PYZhy{}orders}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} 
                                          \PY{o}{/} \PY{n}{df\PYZus{}countries}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PctOf\PYZhy{}Income}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
          \PY{c+c1}{\PYZsh{}finding difference between full price and disc price}
          \PY{n}{df\PYZus{}countries}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DiscountGap}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{df\PYZus{}countries}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AvgPrice\PYZus{}Full}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                                       \PY{o}{\PYZhy{}} \PY{n}{df\PYZus{}countries}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AvgPrice\PYZus{}Disc}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
96.51 98.64

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}140}]:} \PY{n}{display}\PY{p}{(}\PY{n}{df\PYZus{}countries}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{)}\PY{o}{.}\PY{n}{sort\PYZus{}index}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}
             Price_Disc-Full  Price_Disc/Total  Quant_Disc-Full  \
country                                                           
Austria          3028.84            0.51             -159         
Belgium        -15311.10            0.27             -572         
Brazil         -19941.48            0.41             -451         
Canada           5379.49            0.55              162         
Denmark         -9929.98            0.35             -220         
Finland         -6910.05            0.32             -331         
France         -21576.30            0.37             -378         
Germany        -33551.83            0.43             -125         
Ireland          8062.62            0.58              566         
Italy            1988.35            0.56               78         
Mexico         -16575.52            0.15             -729         
Portugal        -1202.64            0.45               75         
Spain           -3433.38            0.40             -132         
Sweden          -8972.36            0.42             -263         
Switzerland     -7951.42            0.37              -87         
UK             -26981.81            0.27            -1170         
USA            -47182.75            0.40             -802         
Venezuela      -17156.67            0.35             -638         

             Quant_Disc/Total  AvgPrice_Disc  AvgPrice_Full  AvgPrice/item  \
country                                                                      
Austria            0.48            26.16          23.47         65016.10     
Belgium            0.29            22.58          25.02         24987.41     
Brazil             0.45            22.91          27.00         65350.15     
Canada             0.54            25.90          24.60         23511.90     
Denmark            0.41            23.93          30.64         21786.85     
Finland            0.31            21.48          21.15         13146.84     
France             0.44            20.79          28.34         52921.77     
Germany            0.49            21.65          28.25        136483.30     
Ireland            0.67            25.80          37.49         22135.56     
Italy              0.55            19.73          18.52          7364.77     
Mexico             0.14            23.67          22.89         20230.79     
Portugal           0.57            16.89          27.67          6663.92     
Spain              0.41            24.83          25.20         11018.41     
Sweden             0.44            23.08          25.41         32737.97     
Switzerland        0.47            19.98          29.11         20433.47     
UK                 0.29            20.35          21.97         43770.74     
USA                0.46            23.26          28.90        150667.26     
Venezuela          0.39            17.26          20.70         38143.75     

             AvgOrderPrice  PctOf-orders  PctOf-Income  orders2-Income  \
country                                                                  
Austria         3200.10          4.82         10.11          0.48        
Belgium         1780.26          2.29          2.67          0.86        
Brazil          1288.26         10.00          8.45          1.18        
Canada          1673.21          3.61          3.97          0.91        
Denmark         1814.50          2.17          2.58          0.84        
Finland          855.00          2.65          1.49          1.78        
France          1056.60          9.28          6.43          1.44        
Germany         1887.58         14.70         18.19          0.81        
Ireland         2630.52          2.29          3.95          0.58        
Italy            563.22          3.37          1.25          2.70        
Mexico           842.22          3.37          1.86          1.81        
Portugal         882.49          1.57          0.91          1.73        
Spain            781.88          2.77          1.42          1.95        
Sweden          1472.84          4.46          4.31          1.03        
Switzerland     1760.70          2.17          2.50          0.87        
UK              1053.06          6.75          4.66          1.45        
USA             2012.99         14.70         19.40          0.76        
Venezuela       1235.01          5.54          4.49          1.23        

             DiscountGap  
country                   
Austria         -2.70     
Belgium          2.44     
Brazil           4.09     
Canada          -1.30     
Denmark          6.71     
Finland         -0.33     
France           7.55     
Germany          6.61     
Ireland         11.70     
Italy           -1.21     
Mexico          -0.78     
Portugal        10.78     
Spain            0.37     
Sweden           2.32     
Switzerland      9.12     
UK               1.62     
USA              5.63     
Venezuela        3.44     
    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}141}]:} \PY{c+c1}{\PYZsh{} Add stats to df}
          \PY{c+c1}{\PYZsh{} Mean}
          \PY{c+c1}{\PYZsh{} Std. Error Mean}
          \PY{c+c1}{\PYZsh{} Std. deviation}
          \PY{n}{df\PYZus{}header} \PY{o}{=} \PY{n}{df\PYZus{}countries}\PY{o}{.}\PY{n}{columns}
          
          \PY{n}{country\PYZus{}col\PYZus{}means} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{df\PYZus{}countries}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{)} 
          \PY{n}{country\PYZus{}col\PYZus{}sem} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{df\PYZus{}countries}\PY{o}{.}\PY{n}{sem}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{)}   
          \PY{n}{country\PYZus{}col\PYZus{}std} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{df\PYZus{}countries}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{)} 
          
          \PY{n}{df\PYZus{}country\PYZus{}col\PYZus{}means\PYZus{}sem} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{[}\PY{n}{country\PYZus{}col\PYZus{}means}\PY{p}{,} \PY{n}{country\PYZus{}col\PYZus{}sem}\PY{p}{,}
                                  \PY{n}{country\PYZus{}col\PYZus{}std}\PY{p}{]}\PY{p}{,}\PY{n}{columns}\PY{o}{=}\PY{n}{df\PYZus{}header}\PY{p}{)}
          \PY{n}{df\PYZus{}country\PYZus{}col\PYZus{}means\PYZus{}sem}\PY{o}{.}\PY{n}{index} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{std}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{n}{df\PYZus{}country\PYZus{}col\PYZus{}means\PYZus{}sem}\PY{o}{.}\PY{n}{columns}\PY{o}{=}\PY{n}{df\PYZus{}countries}\PY{o}{.}\PY{n}{columns}
          \PY{n}{df\PYZus{}country\PYZus{}col\PYZus{}means\PYZus{}sem}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}141}]:}       Price\_Disc-Full  Price\_Disc/Total  Quant\_Disc-Full  Quant\_Disc/Total  \textbackslash{}
          mean    -12123.221           0.398          -287.556            0.433        
          sem       3387.582           0.026            95.435            0.028        
          std      14372.292           0.111           404.897            0.121        
          
                AvgPrice\_Disc  AvgPrice\_Full  AvgPrice/item  AvgOrderPrice  \textbackslash{}
          mean     22.236         25.907        42020.609      1488.358      
          sem       0.644          1.038         9675.744       161.591      
          std       2.731          4.404        41050.705       685.573      
          
                PctOf-orders  PctOf-Income  orders2-Income  DiscountGap  
          mean      5.362         5.480          1.245         3.671     
          sem       0.979         1.283          0.135         1.031     
          std       4.152         5.443          0.574         4.373     
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}142}]:} \PY{c+c1}{\PYZsh{} Save output if save\PYZus{}for\PYZus{}user == True }
          \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user}\PY{o}{==}\PY{k+kc}{True}\PY{p}{:}
              \PY{n}{df\PYZus{}countries}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H4\PYZus{}countries\PYZus{}disc\PYZus{}pref\PYZus{}features.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{df\PYZus{}countries}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H4\PYZus{}countries\PYZus{}disc\PYZus{}pref\PYZus{}features.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
              \PY{n}{df\PYZus{}country\PYZus{}col\PYZus{}means\PYZus{}sem}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H4\PYZus{}countries\PYZus{}disc\PYZus{}pref\PYZus{}col\PYZus{}means\PYZus{}sem.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{df\PYZus{}country\PYZus{}col\PYZus{}means\PYZus{}sem}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H4\PYZus{}countries\PYZus{}disc\PYZus{}pref\PYZus{}col\PYZus{}means\PYZus{}sem.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Concatenating df\PYZus{}country and mean sem dataframes. }
          \PY{n}{df\PYZus{}countries} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{concat}\PY{p}{(}\PY{p}{[}\PY{n}{df\PYZus{}countries}\PY{p}{,} \PY{n}{df\PYZus{}country\PYZus{}col\PYZus{}means\PYZus{}sem}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \hypertarget{grouping-countries-based-on-critical-value-criteria}{%
\paragraph{Grouping countries based on critical value
criteria}\label{grouping-countries-based-on-critical-value-criteria}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}143}]:} \PY{c+c1}{\PYZsh{} Create different criteria for exploring and anaqlyzing the current df}
          \PY{c+c1}{\PYZsh{} Used crit3 for determining the samples used in hypothesis 4}
          \PY{n}{df\PYZus{}compare} \PY{o}{=} \PY{n}{df\PYZus{}countries}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{std}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} crit = ((df\PYZus{}compare[\PYZsq{}orders2\PYZhy{}Income\PYZsq{}] \PYZlt{} 1) }
          \PY{c+c1}{\PYZsh{}         \PYZam{} (df\PYZus{}compare[\PYZsq{}AvgOrderPrice\PYZsq{}] \PYZgt{} 1488.357771))}
          
          \PY{c+c1}{\PYZsh{} crit2=((df\PYZus{}compare[\PYZsq{}AvgPrice\PYZus{}Full\PYZsq{}]\PYZgt{} 25.907391) }
          \PY{c+c1}{\PYZsh{}         \PYZam{} (df\PYZus{}compare[\PYZsq{}AvgPrice\PYZus{}Disc\PYZsq{}]\PYZgt{} 22.236349))}
          
          \PY{c+c1}{\PYZsh{} .433 is the mean value for Quant\PYZus{}Disc/Total}
          \PY{n}{crit3} \PY{o}{=} \PY{p}{(}\PY{n}{df\PYZus{}compare}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quant\PYZus{}Disc/Total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{l+m+mf}{0.433410}\PY{p}{)} 
          
          \PY{n}{winning} \PY{o}{=} \PY{n}{df\PYZus{}compare}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{crit3}\PY{p}{]}
          \PY{n}{losing} \PY{o}{=} \PY{n}{df\PYZus{}compare}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{o}{\PYZti{}}\PY{n}{crit3}\PY{p}{]}
          \PY{n}{winning}\PY{o}{.}\PY{n}{index}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}143}]:} Index(['France', 'Germany', 'Brazil', 'Switzerland', 'Austria', 'USA',
                 'Sweden', 'Italy', 'Ireland', 'Portugal', 'Canada'],
                dtype='object')
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}144}]:} \PY{c+c1}{\PYZsh{} losing.index}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}145}]:} \PY{c+c1}{\PYZsh{} print(winning.index)}
\end{Verbatim}


    \hypertarget{h4-aim-1.2-using-eda-to-decide-best-metric-for-hypothesis}{%
\subsubsection{\texorpdfstring{\textbf{\emph{H4, Aim 1.2: Using EDA to
decide best metric for
hypothesis}}}{H4, Aim 1.2: Using EDA to decide best metric for hypothesis}}\label{h4-aim-1.2-using-eda-to-decide-best-metric-for-hypothesis}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}146}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{use}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{default}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{k}{with} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{context}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ggplot}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
              \PY{k}{for} \PY{n}{col} \PY{o+ow}{in} \PY{n}{winning}\PY{o}{.}\PY{n}{columns}\PY{p}{:}
                  \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
          
                  \PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{x}\PY{o}{=}\PY{n}{winning}\PY{o}{.}\PY{n}{index}\PY{p}{,}
                          \PY{n}{height}\PY{o}{=}\PY{n}{winning}\PY{p}{[}\PY{n}{col}\PY{p}{]}\PY{p}{,}
                          \PY{n}{yerr}\PY{o}{=}\PY{n}{df\PYZus{}country\PYZus{}col\PYZus{}means\PYZus{}sem}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sem}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{col}\PY{p}{]}\PY{p}{)}
          
                  \PY{n}{ax} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{gca}\PY{p}{(}\PY{p}{)}
                  \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xticklabels}\PY{p}{(}\PY{n}{winning}\PY{o}{.}\PY{n}{index}\PY{p}{,} \PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{75}\PY{p}{)}
                  \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{n}{col}\PY{p}{)}
                  \PY{n}{ax}\PY{o}{.}\PY{n}{axhline}\PY{p}{(}\PY{n}{y}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,}\PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{ls}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{lw}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
                  \PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_4.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_5.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_6.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_7.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_8.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_9.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_10.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_240_11.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}147}]:} \PY{c+c1}{\PYZsh{} print(\PYZdq{}this cell was error\PYZsq{}d on colab\PYZdq{})}
          \PY{c+c1}{\PYZsh{} \PYZsh{} make\PYZus{}stripplot(df\PYZus{}countries,y=df\PYZus{}countries)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}148}]:} \PY{c+c1}{\PYZsh{} plt.style.use(\PYZsq{}ggplot\PYZsq{})}
          \PY{c+c1}{\PYZsh{} df\PYZus{}country\PYZus{}plot = df\PYZus{}countries.drop([\PYZsq{}sem\PYZsq{},\PYZsq{}mean\PYZsq{},\PYZsq{}std\PYZsq{}],axis=0)}
          \PY{c+c1}{\PYZsh{} for col in df\PYZus{}countries.columns:}
          \PY{c+c1}{\PYZsh{}     fig = plt.figure(figsize=(8,6))}
          
          \PY{c+c1}{\PYZsh{}     plt.bar(x=df\PYZus{}countries.index, height=df\PYZus{}countries[col],yerr=df\PYZus{}country\PYZus{}col\PYZus{}means\PYZus{}sem.loc[\PYZsq{}sem\PYZsq{},col])\PYZsh{},**bar\PYZus{}kws)}
          \PY{c+c1}{\PYZsh{}     ax = fig.gca()}
          \PY{c+c1}{\PYZsh{}     ax.set\PYZus{}xticklabels(df\PYZus{}countries.index, rotation=75,fontsize=10)}
          \PY{c+c1}{\PYZsh{}     ax.set\PYZus{}title(col)}
          \PY{c+c1}{\PYZsh{}     ax.set\PYZus{}ylabel(col)}
          \PY{c+c1}{\PYZsh{}     plt.tight\PYZus{}layout}
\end{Verbatim}


    \hypertarget{hypothesis-4-chosen-specific-hypothesis}{%
\section{Hypothesis 4 \textgreater{} Chosen Specific
Hypothesis:}\label{hypothesis-4-chosen-specific-hypothesis}}

\begin{quote}
Do countries that buy discounted items in higher-than-average quantities
spend more money (have higher order totals)?
\end{quote}

\begin{itemize}
\item
  \(H_1\): Orders shipped to countries where average orders contain
  higher than average amounts of discounted items per order spend more
  per order on average than other countries.
\item
  \(H_0\): Orders shipped to countries where average orders contain
  higher than average amounts of discounted items per order spend the
  same per order on average than other countries.

  \begin{itemize}
  \tightlist
  \item
    I am defining countries with higher than average discount prices as
    the following: Brazil, Belgium, Austria', Mexico, USA, Sweden,
    Spain, Ireland, Canada, Denmark.
  \end{itemize}
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}149}]:} \PY{n}{df\PYZus{}c} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{drop\PYZus{}duplicates}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{df\PYZus{}c}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{OrderId}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{inplace}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} df\PYZus{}c.head()}
\end{Verbatim}


    \hypertarget{add-three-more-features-for-easy-analysis}{%
\subsubsection{Add three more features for easy
analysis,}\label{add-three-more-features-for-easy-analysis}}

\begin{itemize}
\tightlist
\item
  column `Abovecrit'

  \begin{itemize}
  \tightlist
  \item
    Boolean value for all countries whose discounted items/total order,
    is above average for all countries
  \end{itemize}
\item
  column `AbovecritGroups'

  \begin{itemize}
  \tightlist
  \item
    subset `Abovecrit' into 0 for all countries below critical value,
    and a unique categorical number for each country above.
  \end{itemize}
\item
  column `CountryCode'

  \begin{itemize}
  \tightlist
  \item
    a unique code for each country
  \end{itemize}
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}150}]:} \PY{c+c1}{\PYZsh{} Coding all countries for comparison in a Tukeys test}
          \PY{c+c1}{\PYZsh{} Anything With a 1\PYZhy{}12 met Criteria in crit3}
          \PY{n}{country\PYZus{}codes} \PY{o}{=} \PY{p}{\PYZob{}}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{France}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Germany}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{2}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Brazil}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{3}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Belgium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{13}\PY{p}{,} 
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Switzerland}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{4}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Venezuela}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{14}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Austria}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mexico}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{15}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{USA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{6}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Sweden}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{7}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Finland}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{16}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Italy}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{8}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Spain}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{9}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{UK}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{17}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Ireland}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Portugal}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{11}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Canada}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{12}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Denmark}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{18}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Poland}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{19}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Norway}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{20}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Argentina}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}\PY{l+m+mi}{21}
          \PY{p}{\PYZcb{}}
          \PY{c+c1}{\PYZsh{} if save\PYZus{}for\PYZus{}user ==True:}
          \PY{c+c1}{\PYZsh{}     pd.country\PYZus{}codes.to\PYZus{}csv()}
          \PY{c+c1}{\PYZsh{}Unique codes for each country }
          \PY{n}{df\PYZus{}c}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{CountryCode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}c}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ShipCountry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{map}\PY{p}{(}\PY{n}{country\PYZus{}codes}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{}Boolean for two groups, Above crit or below}
          \PY{n}{df\PYZus{}c}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df\PYZus{}c}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{CountryCode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{l+m+mi}{12}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Abovecrit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{k+kc}{True}
          \PY{n}{df\PYZus{}c}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df\PYZus{}c}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{CountryCode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{l+m+mi}{12}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Abovecrit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{k+kc}{False}
          
          \PY{c+c1}{\PYZsh{}Groups each country above criteria as its own group, rest of pop. isin its own group.}
          \PY{n}{df\PYZus{}c}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df\PYZus{}c}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{CountryCode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{l+m+mi}{12}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AbovecritGroups}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{0}
          \PY{n}{df\PYZus{}c}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df\PYZus{}c}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{CountryCode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{l+m+mi}{12}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AbovecritGroups}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}c}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{CountryCode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}151}]:} \PY{c+c1}{\PYZsh{} Make series of \PYZsq{}order\PYZus{}totals\PYZsq{} for testing against criteria}
          \PY{n}{h4\PYZus{}samp} \PY{o}{=} \PY{n}{df\PYZus{}c}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Abovecrit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{get\PYZus{}group}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{)}
          \PY{n}{h4\PYZus{}pop} \PY{o}{=} \PY{n}{df\PYZus{}c}\PY{o}{.}\PY{n}{groupby}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Abovecrit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{get\PYZus{}group}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{)}
          
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{High Discount Groups: }\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{h4\PYZus{}pop.mean().round(2)\PYZcb{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{ Low Discount Group }\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{h4\PYZus{}samp.mean().round(2)\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
          \PY{n}{h4\PYZus{}pop}\PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{h4\PYZus{}pop}\PY{p}{)}
          \PY{n}{h4\PYZus{}samp}\PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{h4\PYZus{}samp}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} (h4\PYZus{}samp.head(),}
          \PY{c+c1}{\PYZsh{} h4\PYZus{}pop.head())}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
High Discount Groups: 1110.3
 Low Discount Group 1672.79

    \end{Verbatim}

    \hypertarget{going-back-to-the-original-df-to-test-the-hypthesis.}{%
\subsubsection{Going back to the original df to test the
hypthesis.}\label{going-back-to-the-original-df-to-test-the-hypthesis.}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}152}]:} \PY{n}{plot\PYZus{}wide\PYZus{}kde\PYZus{}thin\PYZus{}bar}\PY{p}{(}\PY{n}{h4\PYZus{}samp}\PY{o}{.}\PY{n}{order\PYZus{}total}\PY{p}{,}
                                 \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{High Discount Countries}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                 \PY{n}{h4\PYZus{}pop}\PY{o}{.}\PY{n}{order\PYZus{}total}\PY{p}{,}
                                 \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Low Discount Countries}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{k}{if} \PY{n}{save\PYZus{}for\PYZus{}user}\PY{o}{==}\PY{k+kc}{True}\PY{p}{:}
              \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{n}{fig\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{H4\PYZus{}High vs Low Discount Countries KDE bar.png}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{dpi}\PY{o}{=}\PY{l+m+mi}{300}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Mean of High Discount Countries: 1672.7890408496733
 Mean of Low Discount Countries: 1110.3034243119268

    \end{Verbatim}

    
    \begin{verbatim}
<Figure size 432x288 with 0 Axes>
    \end{verbatim}

    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_249_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    \begin{verbatim}
<Figure size 432x288 with 0 Axes>
    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}153}]:} \PY{k}{with} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{context}\PY{p}{(}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dark\PYZus{}background}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{p}{:}
              
              \PY{n}{sns}\PY{o}{.}\PY{n}{set\PYZus{}palette}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Dark2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{6}\PY{p}{)}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Distribution of total order:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{ High Discount vs Low Discount Countries}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
              \PY{n}{disc} \PY{o}{=} \PY{n}{h4\PYZus{}samp}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              \PY{n}{full} \PY{o}{=} \PY{n}{h4\PYZus{}pop}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              \PY{n}{label} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Low Discount Group}\PY{l+s+s1}{\PYZsq{}}
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{full}\PY{p}{,} \PY{n}{alpha} \PY{o}{=} \PY{l+m+mf}{0.8}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{n}{label}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{disc}\PY{p}{,} \PY{n}{alpha} \PY{o}{=} \PY{l+m+mf}{0.5}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{High Discount Group}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
              \PY{c+c1}{\PYZsh{} Adding annotations}
              \PY{n}{meanD} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{disc}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}
              \PY{n}{meanF} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{full}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{meanD}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{green}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discounted Mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{text}\PY{p}{(}\PY{n}{meanD}\PY{p}{,}\PY{l+m+mi}{190}\PY{p}{,}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mean:}\PY{l+s+si}{\PYZob{}meanD\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{270}\PY{p}{,}\PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{meanF}\PY{p}{,}\PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{white}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Full Price Mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{text}\PY{p}{(}\PY{n}{meanF}\PY{p}{,} \PY{l+m+mi}{190}\PY{p}{,} \PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mean:}\PY{l+s+si}{\PYZob{}meanF\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{270}\PY{p}{,}\PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
              \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Counts}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_250_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{h4-aim-2-test-for-assumptions-of-normality-and-equal-variance-then-choose-test}{%
\subsection{\texorpdfstring{\#\# \textbf{\emph{H4, Aim 2 : Test for
assumptions of normality and equal variance, then choose
test}}}{\#\# H4, Aim 2 : Test for assumptions of normality and equal variance, then choose test}}\label{h4-aim-2-test-for-assumptions-of-normality-and-equal-variance-then-choose-test}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}154}]:} \PY{n}{H4\PYZus{}tests} \PY{o}{=} \PY{p}{[}\PY{p}{[}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Group:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{TestName}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Test Purpose}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stat}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
              \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p \PYZlt{} .05}\PY{l+s+s1}{\PYZsq{}}
          \PY{p}{]}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}155}]:} \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{normaltest}
          \PY{c+c1}{\PYZsh{} Test for normality}
          
          \PY{n}{test\PYZus{}purpose} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Normality}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{normaltest}\PY{l+s+s1}{\PYZsq{}}
          
          \PY{n}{arrA} \PY{o}{=} \PY{n}{h4\PYZus{}samp}\PY{o}{.}\PY{n}{order\PYZus{}total}
          \PY{n}{arrB} \PY{o}{=} \PY{n}{h4\PYZus{}pop}\PY{o}{.}\PY{n}{order\PYZus{}total}
          \PY{n}{arrA} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}
          \PY{n}{arrB} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}
          
          \PY{n}{statA}\PY{p}{,} \PY{n}{pA} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}
          \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}
          
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{samp:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{statA}\PY{p}{,} \PY{n}{pA}\PY{p}{,}
                \PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pop:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{stat}\PY{p}{,}\PY{n}{p}\PY{p}{)}
          
          \PY{n}{H4\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Sample}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,} 
                           \PY{n}{test\PYZus{}purpose} \PY{p}{,} \PY{n}{statA}\PY{p}{,}
                           \PY{n}{pA}\PY{p}{,} \PY{n}{pA} \PY{o}{\PYZlt{}} \PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
          
          \PY{n}{H4\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Total Pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,} 
                           \PY{n}{test\PYZus{}purpose}\PY{p}{,} \PY{n}{stat}\PY{p}{,} \PY{n}{p}\PY{p}{,}
                           \PY{n}{p} \PY{o}{\PYZlt{}} \PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
samp: 447.1498920606356 7.991616726876095e-98 
pop: 215.23111759786178 1.8329754433382687e-47

    \end{Verbatim}

    \hypertarget{check-variance}{%
\subsubsection{Check variance}\label{check-variance}}

\begin{itemize}
\tightlist
\item
  levenes test
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}156}]:} \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{levene}
          
          \PY{c+c1}{\PYZsh{} Levenes test for testing homogeneity of variance}
          \PY{c+c1}{\PYZsh{} Choose this over Bartlett\PYZsq{}s due to  dev. from normality}
          \PY{c+c1}{\PYZsh{} Set to center=\PYZsq{}median\PYZsq{} (default) because of skewed dist,}
          \PY{c+c1}{\PYZsh{} Use \PYZsq{}mean\PYZsq{} for symetrical distribution}
          \PY{c+c1}{\PYZsh{} Use trimmed for heavy tailed distributions}
          
          \PY{n}{arrA} \PY{o}{=} \PY{n}{h4\PYZus{}samp}\PY{o}{.}\PY{n}{order\PYZus{}total}
          \PY{n}{arrB} \PY{o}{=}\PY{n}{h4\PYZus{}pop}\PY{o}{.}\PY{n}{order\PYZus{}total}
          
          \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{levene}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{test\PYZus{}purpose} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Equal Variance}\PY{l+s+s1}{\PYZsq{}}
          
          \PY{n}{arrA} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}
          \PY{n}{arrB} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}
          
          \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{arrB}\PY{p}{,}
                                      \PY{n}{center}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{median}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sample and pop:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{stat}\PY{p}{,}\PY{n}{p}\PY{p}{)}
          
          \PY{n}{H4\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sample \PYZam{} pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,}
                           \PY{n}{test\PYZus{}purpose} \PY{p}{,}\PY{n}{stat}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n}{p} \PY{o}{\PYZlt{}} \PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
sample and pop: 13.948094252198224 0.00020080058199652888

    \end{Verbatim}

    \hypertarget{t-test}{%
\subsection{T-test}\label{t-test}}

\begin{itemize}
\tightlist
\item
  Both sample and population are not normal and dont have equal
  variance.
\item
  use Whitney-Mann U
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}157}]:} \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{mannwhitneyu}
          \PY{c+c1}{\PYZsh{} Mann Whitney U test for non normal distributioin}
          \PY{c+c1}{\PYZsh{}Set alternative to \PYZsq{}greater\PYZsq{} for one tail test}
          
          \PY{n}{arrA} \PY{o}{=} \PY{n}{h4\PYZus{}samp}\PY{o}{.}\PY{n}{order\PYZus{}total}
          \PY{n}{arrB} \PY{o}{=}\PY{n}{h4\PYZus{}pop}\PY{o}{.}\PY{n}{order\PYZus{}total}
          
          \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mannwhitneyu}\PY{l+s+s1}{\PYZsq{}}
          \PY{n}{test\PYZus{}purpose} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Hi sig.}\PY{l+s+s1}{\PYZsq{}}
          
          \PY{n}{arrA} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}
          \PY{n}{arrB} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}
          
          \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{arrB}\PY{p}{,}
                                      \PY{n}{alternative}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{greater}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sample and pop:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{stat}\PY{p}{,} \PY{n}{p}\PY{p}{)}
          
          \PY{n}{H4\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sample and pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,}
                           \PY{n}{test\PYZus{}purpose} \PY{p}{,}\PY{n}{stat}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n}{p} \PY{o}{\PYZlt{}} \PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)} 
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
sample and pop: 77366.5 0.00022710251078969745

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}158}]:} \PY{n}{d} \PY{o}{=} \PY{n}{Cohen\PYZus{}d}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{arrB}\PY{p}{)}
          
          \PY{n}{H1\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sample and pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cohen}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s d}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Effect Size}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{d}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
          
          \PY{n}{table\PYZus{}H4\PYZus{}test\PYZus{}results} \PY{o}{=} \PY{n}{list2df}\PY{p}{(}\PY{n}{H4\PYZus{}tests}\PY{p}{)}
          \PY{n}{table\PYZus{}H4\PYZus{}test\PYZus{}results}\PY{o}{.}\PY{n}{to\PYZus{}excel}\PY{p}{(}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H4\PYZus{}test\PYZus{}results.xlsx}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{table\PYZus{}H4\PYZus{}test\PYZus{}results}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}158}]:}        Group:        TestName     Test Purpose     stat         p      p < .05
          0          Sample    normaltest       Normality    447.150  7.992e-98   True  
          1       Total Pop    normaltest       Normality    215.231  1.833e-47   True  
          2    sample \& pop        levene  Equal Variance     13.948  2.008e-04   True  
          3  sample and pop  mannwhitneyu         Hi sig.  77366.500  2.271e-04   True  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}159}]:} \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{ttest\PYZus{}ind}
          
          \PY{c+c1}{\PYZsh{} Run a Welch\PYZsq{}s one sided t\PYZus{}test for unequal homogeneity}
          \PY{c+c1}{\PYZsh{} equal\PYZus{}var is set false, test compensates for this}
          \PY{c+c1}{\PYZsh{} Divide in half because it is a one sided test}
          
          \PY{n}{arrA} \PY{o}{=} \PY{n}{h4\PYZus{}samp}\PY{o}{.}\PY{n}{order\PYZus{}total}
          \PY{n}{arrB} \PY{o}{=}\PY{n}{h4\PYZus{}pop}\PY{o}{.}\PY{n}{order\PYZus{}total}
          
          \PY{n}{test\PYZus{}to\PYZus{}run} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ttest\PYZus{}ind}\PY{l+s+s2}{\PYZdq{}}
          \PY{n}{test\PYZus{}purpose} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{signifigance}\PY{l+s+s1}{\PYZsq{}}
          
          \PY{n}{arrA} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrA}\PY{p}{)}
          \PY{n}{arrB} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arrB}\PY{p}{)}
          
          \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n+nb}{eval}\PY{p}{(}\PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{)}\PY{p}{(}\PY{n}{arrA}\PY{p}{,}\PY{n}{arrB}\PY{p}{,}
                                      \PY{n}{equal\PYZus{}var}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
          \PY{n}{p} \PY{o}{=} \PY{n}{p} \PY{o}{/}\PY{l+m+mi}{2} 
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sample and pop:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{stat}\PY{p}{,} \PY{n}{p}\PY{p}{)}
          
          \PY{n}{H4\PYZus{}tests}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sample and pop}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{test\PYZus{}to\PYZus{}run}\PY{p}{,}
                           \PY{n}{test\PYZus{}purpose} \PY{p}{,}\PY{n}{stat}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n}{p} \PY{o}{\PYZlt{}} \PY{o}{.}\PY{l+m+mi}{05}\PY{p}{]}\PY{p}{)}                   
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
sample and pop: 4.987558749839054 3.902807969589616e-07

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}160}]:} \PY{c+c1}{\PYZsh{} Tukeys with subset of countries against the whole population}
          \PY{c+c1}{\PYZsh{} Create labels}
          \PY{c+c1}{\PYZsh{} Run Test}
          \PY{c+c1}{\PYZsh{} Put results in df}
          \PY{c+c1}{\PYZsh{} Checking for any signifigance}
          \PY{k+kn}{from} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{stats}\PY{n+nn}{.}\PY{n+nn}{multicomp} \PY{k}{import} \PY{n}{pairwise\PYZus{}tukeyhsd} \PY{k}{as} \PY{n}{tukey}
          
          \PY{n}{int\PYZus{}str} \PY{o}{=} \PY{p}{[}\PY{n+nb}{str}\PY{p}{(}\PY{n}{x}\PY{p}{)} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{df\PYZus{}c}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{AbovecritGroups}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
          
          \PY{n}{tukey\PYZus{}results} \PY{o}{=}\PY{n}{tukey}\PY{p}{(}\PY{n}{df\PYZus{}c}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}\PY{n}{int\PYZus{}str}\PY{p}{,} \PY{l+m+mf}{0.05}\PY{p}{)}
          \PY{n}{dfH\PYZus{}tukey} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{data}\PY{o}{=}\PY{n}{tukey\PYZus{}results}\PY{o}{.}\PY{n}{\PYZus{}results\PYZus{}table}\PY{o}{.}\PY{n}{data}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{:}\PY{p}{]}\PY{p}{,}
                                   \PY{n}{columns}\PY{o}{=}\PY{n}{tukey\PYZus{}results}\PY{o}{.}\PY{n}{\PYZus{}results\PYZus{}table}\PY{o}{.}\PY{n}{data}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
          \PY{n}{dfH\PYZus{}tukey}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{dfH\PYZus{}tukey}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reject}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{k+kc}{True}\PY{p}{]}
          \PY{c+c1}{\PYZsh{} dfH\PYZus{}tukey}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}160}]:}    group1 group2  meandiff    lower     upper   reject
          1    0.0   10.0   1520.218   119.564  2920.872   True 
          4    0.0    2.0    777.275   115.222  1439.329   True 
          7    0.0    5.0   2089.793  1082.598  3096.987   True 
          8    0.0    6.0    902.685   240.632  1564.739   True 
          12   1.0   10.0   1573.920    73.975  3073.865   True 
          18   1.0    5.0   2143.494  1002.248  3284.741   True 
          19   1.0    6.0    956.387   104.145  1808.629   True 
          31  10.0    8.0  -2067.302 -3807.725  -326.878   True 
          32  10.0    9.0  -1848.643 -3663.932   -33.354   True 
          37  11.0    5.0   2317.606   448.224  4186.989   True 
          45  12.0    5.0   1526.886   112.656  2941.117   True 
          52   2.0    5.0   1312.517   245.652  2379.382   True 
          55   2.0    8.0  -1324.359 -2551.370   -97.348   True 
          58   3.0    5.0   1911.834   784.778  3038.889   True 
          68   5.0    6.0  -1187.107 -2253.972  -120.243   True 
          69   5.0    7.0  -1727.254 -3062.854  -391.655   True 
          70   5.0    8.0  -2636.876 -4079.680 -1194.072   True 
          71   5.0    9.0  -2418.218 -3950.498  -885.938   True 
          73   6.0    8.0  -1449.769 -2676.780  -222.758   True 
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}161}]:} \PY{c+c1}{\PYZsh{}Tukey\PYZsq{}s test with each country compared to each other country}
          
          \PY{n}{int\PYZus{}str} \PY{o}{=} \PY{p}{[}\PY{n+nb}{str}\PY{p}{(}\PY{n}{x}\PY{p}{)} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{df\PYZus{}c}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{CountryCode}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
          
          \PY{n}{tukey\PYZus{}results} \PY{o}{=} \PY{n}{tukey}\PY{p}{(}\PY{n}{df\PYZus{}c}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{order\PYZus{}total}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
                                \PY{n}{int\PYZus{}str}\PY{p}{,} \PY{l+m+mf}{0.05}\PY{p}{)}
          \PY{n}{dfH\PYZus{}tukey} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{data}\PY{o}{=}\PY{n}{tukey\PYZus{}results}\PY{o}{.}\PY{n}{\PYZus{}results\PYZus{}table}\PY{o}{.}\PY{n}{data}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{:}\PY{p}{]}\PY{p}{,}
                                   \PY{n}{columns}\PY{o}{=}\PY{n}{tukey\PYZus{}results}\PY{o}{.}\PY{n}{\PYZus{}results\PYZus{}table}\PY{o}{.}\PY{n}{data}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
          \PY{n}{dfH\PYZus{}tukey}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{dfH\PYZus{}tukey}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reject}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{k+kc}{True}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}161}]:}     group1 group2  meandiff    lower     upper   reject
          15     1      5    2143.494   914.763  3372.226   True 
          16     1      6     956.387    38.814  1873.960   True 
          37    10      8   -2067.302 -3941.142  -193.462   True 
          52    11      5    2317.606   304.922  4330.291   True 
          69    12      5    1526.886     4.244  3049.528   True 
          100   14      5    1965.082   602.133  3328.032   True 
          114   15      5    2357.879   804.473  3911.284   True 
          127   16      5    2345.094   671.716  4018.471   True 
          139   17      5    2147.037   841.915  3452.159   True 
          160   19      5    2695.532   112.621  5278.442   True 
          169    2      5    1312.517   163.869  2461.165   True 
          172    2      8   -1324.359 -2645.430    -3.288   True 
          184   21      5    2692.652   827.804  4557.500   True 
          190    3      5    1911.834   698.381  3125.287   True 
          200    5      6   -1187.107 -2335.756   -38.459   True 
          201    5      7   -1727.254 -3165.238  -289.271   True 
          202    5      8   -2636.876 -4190.282 -1083.471   True 
          203    5      9   -2418.218 -4067.959  -768.477   True 
          205    6      8   -1449.769 -2770.840  -128.698   True 
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}162}]:} \PY{n}{display}\PY{p}{(}\PY{n}{list2df}\PY{p}{(}\PY{n}{H4\PYZus{}tests}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}
       Group:        TestName     Test Purpose     stat         p      p < .05
0          Sample    normaltest       Normality    447.150  7.992e-98   True  
1       Total Pop    normaltest       Normality    215.231  1.833e-47   True  
2    sample & pop        levene  Equal Variance     13.948  2.008e-04   True  
3  sample and pop  mannwhitneyu         Hi sig.  77366.500  2.271e-04   True  
4  sample and pop     ttest_ind    signifigance      4.988  3.903e-07   True  
    \end{verbatim}

    
    \hypertarget{hypothesis-4-conclusions}{%
\subsection{Hypothesis 4 Conclusions:}\label{hypothesis-4-conclusions}}

\begin{itemize}
\tightlist
\item
  Our data had significant results for normality and equal variance
  tests.
\item
  We therefore ran a Mann Whitney on High Discount COuntries vs Low
  Discount Countries

  \begin{itemize}
  \tightlist
  \item
    We had a significant difference and rejected the null hypothesis
  \end{itemize}
\end{itemize}

    \hypertarget{final-conclusions-and-recommendations}{%
\section{Final Conclusions and
Recommendations}\label{final-conclusions-and-recommendations}}

    \begin{itemize}
\tightlist
\item
  Discounts spur consumer purchasing behavior.

  \begin{itemize}
  \tightlist
  \item
    They buy discounted items in higher quantities.
  \end{itemize}
\item
  They spend more money if they are purchasing 1+ discounted items.
\item
  Time of year (by month) was not significant, but further metrics worth
  investigating.
\item
  Customers from different countries have unique spending behaviors that
  may be capitalized on with further investigation.
\end{itemize}

    \hypertarget{hypothesis-1}{%
\subsubsection{Hypothesis 1:}\label{hypothesis-1}}

\begin{quote}
\textbf{Do discounts have a statistically significant effect on the
number of products customers order?} \textbf{If so, at what level(s) of
discount?}
\end{quote}

\begin{itemize}
\item
  \(H_1\) : Products that are discounted sell in higher quantities.
\item
  \(H_0\) : Products that are discounted sell the same quantities as
  full-price products.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}163}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}mean\PYZus{}sem.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}163}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}164}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}test\PYZus{}results.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}164}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}165}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}tukey.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}165}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \hypertarget{hypothesis-2}{%
\subsubsection{Hypothesis 2:}\label{hypothesis-2}}

\begin{quote}
\textbf{Do customers spend more money if they are buying discounted
items?}
\end{quote}

\begin{itemize}
\item
  \(H_1\): Customers spend more money overall when their order includes
  discounted items.
\item
  \(H_0\): Customers spend the same amount regardless of discounted
  items.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}166}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H2\PYZus{}mean\PYZus{}sem.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}166}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}167}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H2\PYZus{}test\PYZus{}results.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}167}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}168}]:} \PY{c+c1}{\PYZsh{} HTML(filename=data\PYZus{}filepath+\PYZsq{}table\PYZus{}H2\PYZus{}tukey.html\PYZsq{})}
\end{Verbatim}


    \hypertarget{hypothesis-3}{%
\subsubsection{Hypothesis 3:}\label{hypothesis-3}}

\begin{quote}
\textbf{Does the time of year affect quantity of items sold?}
\end{quote}

\begin{itemize}
\tightlist
\item
  \(H_1\) = THe month an order is placed relates to either a higher or
  lower mean quantity of items sold.
\item
  \(H_0\) = The month of an order has no affect on the mean quantity of
  items sold.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}169}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}mean\PYZus{}sem.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}169}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}170}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}test\PYZus{}results.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}170}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}171}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}tukey.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}171}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{end-of-project}{%
\section{--- END OF PROJECT ---}\label{end-of-project}}

\hypertarget{removed-sections---left-for-discussion}{%
\subsection{Removed sections - left for
discussion}\label{removed-sections---left-for-discussion}}

    \begin{center}\rule{0.5\linewidth}{\linethickness}\end{center}

\hypertarget{experimental-design-and-hypothesis-summary-tables}{%
\section{\texorpdfstring{\textbf{EXPERIMENTAL DESIGN AND HYPOTHESIS +
Summary
Tables}}{EXPERIMENTAL DESIGN AND HYPOTHESIS + Summary Tables}}\label{experimental-design-and-hypothesis-summary-tables}}

You will need query the database to get the data needed to perform a
statistical analysis. In this statistical analysis, \textbf{you'll need
to perform a hypothesis test (or perhaps several) to answer the
following question:}

    \hypertarget{hypothesis-1}{%
\subsubsection{Hypothesis 1:}\label{hypothesis-1}}

\begin{quote}
\textbf{Do discounts have a statistically significant effect on the
number of products customers order?} \textbf{If so, at what level(s) of
discount?}
\end{quote}

\begin{itemize}
\item
  \(H_1\) : Products that are discounted sell in higher quantities.
\item
  \(H_0\) : Products that are discounted sell the same quantities as
  full-price products.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}172}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}mean\PYZus{}sem.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}172}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}173}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H1\PYZus{}test\PYZus{}results.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}173}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}174}]:} \PY{c+c1}{\PYZsh{} HTML(filename=data\PYZus{}filepath+\PYZsq{}table\PYZus{}H1\PYZus{}tukey.html\PYZsq{})}
\end{Verbatim}


    \hypertarget{hypothesis-2}{%
\subsubsection{Hypothesis 2:}\label{hypothesis-2}}

\begin{quote}
\textbf{Do customers spend more money if they are buying discounted
items?}
\end{quote}

\begin{itemize}
\item
  \(H_1\): Customers spend more money overall when their order includes
  discounted items.
\item
  \(H_0\): Customers spend the same amount regardless of discounted
  items.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}175}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H2\PYZus{}mean\PYZus{}sem.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}175}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}176}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H2\PYZus{}test\PYZus{}results.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}176}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}177}]:} \PY{c+c1}{\PYZsh{} HTML(filename=data\PYZus{}filepath+\PYZsq{}table\PYZus{}H2\PYZus{}tukey.html\PYZsq{})}
\end{Verbatim}


    \hypertarget{hypothesis-3}{%
\subsubsection{Hypothesis 3:}\label{hypothesis-3}}

\begin{quote}
\textbf{Does the time of year affect quantity of items sold?}
\end{quote}

\begin{itemize}
\tightlist
\item
  \(H_1\) = THe month an order is placed relates to either a higher or
  lower mean quantity of items sold.
\item
  \(H_0\) = The month of an order has no affect on the mean quantity of
  items sold.
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}178}]:} \PY{n}{HTML}\PY{p}{(}\PY{n}{filename}\PY{o}{=}\PY{n}{data\PYZus{}filepath}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{table\PYZus{}H3\PYZus{}mean\PYZus{}sem.html}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}178}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}179}]:} \PY{c+c1}{\PYZsh{} HTML(filename=data\PYZus{}filepath+\PYZsq{}table\PYZus{}H3\PYZus{}test\PYZus{}results.html\PYZsq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}180}]:} \PY{c+c1}{\PYZsh{} HTML(filename=data\PYZus{}filepath+\PYZsq{}table\PYZus{}H3\PYZus{}tukey.html\PYZsq{})}
\end{Verbatim}


    \hypertarget{hypothesis-4}{%
\subsubsection{Hypothesis 4:}\label{hypothesis-4}}

\begin{quote}
\textbf{Do different countries respond to discounts differently?}
\end{quote}

\begin{itemize}
\tightlist
\item
  \(H_1\): Different countries purchase different quantities of
  discounted vs non discounted products.
\item
  \(H_0\): All countries purchase the same quantities of discounted vs
  non discounted products. 
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}181}]:} \PY{c+c1}{\PYZsh{} HTML(filename=data\PYZus{}filepath+\PYZsq{}table\PYZus{}H4\PYZus{}mean\PYZus{}sem.html\PYZsq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}182}]:} \PY{c+c1}{\PYZsh{} HTML(filename=data\PYZus{}filepath+\PYZsq{}table\PYZus{}H4\PYZus{}test\PYZus{}results.html\PYZsq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}183}]:} \PY{c+c1}{\PYZsh{} HTML(filename=data\PYZus{}filepath+\PYZsq{}table\PYZus{}H1\PYZus{}tukey.html\PYZsq{})}
\end{Verbatim}


    \hypertarget{aim-2.1.-test-for-normality}{%
\subsubsection{Aim 2.1. Test for
Normality}\label{aim-2.1.-test-for-normality}}

    \hypertarget{prelminary-testing-for-normality}{%
\paragraph{Prelminary Testing for
Normality}\label{prelminary-testing-for-normality}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}184}]:} \PY{c+c1}{\PYZsh{} Plot the re\PYZhy{}sampled data}
          
          \PY{c+c1}{\PYZsh{} \PYZsh{} IF want to take smaller sample from population:}
          
          \PY{c+c1}{\PYZsh{} pop\PYZus{}samp\PYZus{}disc = np.random.choice(pop\PYZus{}samp\PYZus{}disc,1000)}
          \PY{c+c1}{\PYZsh{} pop\PYZus{}samp\PYZus{}full = np.random.choice(pop\PYZus{}samp\PYZus{}full, 1000)}
          \PY{k}{with} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{context}\PY{p}{(}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dark\PYZus{}background}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{p}{:}
              
              \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Distribution of Quanitities for Discounted vs Full Price }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
              \PY{n}{disc} \PY{o}{=} \PY{n}{df\PYZus{}discounted}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              \PY{n}{full} \PY{o}{=} \PY{n}{df\PYZus{}fullprice}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{full}\PY{p}{,}\PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{red}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha} \PY{o}{=} \PY{l+m+mf}{0.5}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Full Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{disc}\PY{p}{,} \PY{n}{alpha} \PY{o}{=} \PY{l+m+mf}{0.8}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discounted}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
              \PY{c+c1}{\PYZsh{} Adding annotations}
              \PY{n}{meanD} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{disc}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}
              \PY{n}{meanF} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{full}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{meanD}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{green}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discounted Mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{text}\PY{p}{(}\PY{n}{meanD}\PY{p}{,}\PY{l+m+mi}{190}\PY{p}{,}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mean:}\PY{l+s+si}{\PYZob{}meanD\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{270}\PY{p}{,}\PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{meanF}\PY{p}{,}\PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{white}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Full Price Mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{text}\PY{p}{(}\PY{n}{meanF}\PY{p}{,} \PY{l+m+mi}{190}\PY{p}{,} \PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mean:}\PY{l+s+si}{\PYZob{}meanF\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{270}\PY{p}{,}\PY{n}{fontweight}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{medium}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
              \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Counts}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Run normality testing}
          \PY{c+c1}{\PYZsh{} stat,p = normaltest(pop\PYZus{}samp\PYZus{}full)}
          \PY{c+c1}{\PYZsh{} print(f\PYZsq{}Normality: stat =\PYZob{}stat\PYZcb{}, p = \PYZob{}p\PYZcb{}\PYZsq{})}
          
          \PY{c+c1}{\PYZsh{} Run ttest}
          \PY{c+c1}{\PYZsh{} tstat,tp = stats.ttest\PYZus{}ind(pop\PYZus{}samp\PYZus{}disc, pop\PYZus{}samp\PYZus{}full)}
          \PY{c+c1}{\PYZsh{} print(f\PYZsq{}T\PYZhy{}test: stat =\PYZob{}tstat\PYZcb{}, p = \PYZob{}tp\PYZcb{}\PYZsq{})\PYZsh{}tstat,tp}
          \PY{c+c1}{\PYZsh{} ax.text(}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_298_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}185}]:} \PY{c+c1}{\PYZsh{} D\PYZsq{}Agonstino Pearson Normality Test}
          \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{normaltest} 
          \PY{c+c1}{\PYZsh{} Create results container list}
          \PY{n}{results\PYZus{}normtest} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DataIn}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stat}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}
          
          \PY{c+c1}{\PYZsh{} Perform Normality Test \PYZhy{} Discounted}
          \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n}{normaltest}\PY{p}{(}\PY{n}{df\PYZus{}discounted}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
          \PY{n}{results\PYZus{}normtest}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discounted}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{stat}\PY{p}{,}\PY{n}{p}\PY{p}{]}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discounted: p =}\PY{l+s+si}{\PYZob{}p\PYZcb{}}\PY{l+s+s1}{, stat =}\PY{l+s+si}{\PYZob{}stat\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Perform Normality Test \PYZhy{} Full Price}
          \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n}{normaltest}\PY{p}{(}\PY{n}{df\PYZus{}fullprice}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
          \PY{n}{results\PYZus{}normtest}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Fullprice}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{stat}\PY{p}{,}\PY{n}{p}\PY{p}{]}\PY{p}{)}
          
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Fullprice: p =}\PY{l+s+si}{\PYZob{}p\PYZcb{}}\PY{l+s+s1}{, stat =}\PY{l+s+si}{\PYZob{}stat\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{list2df}\PY{p}{(}\PY{n}{results\PYZus{}normtest}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Discounted: p =1.6214878452829618e-57, stat =261.528012299789
Fullprice: p =5.579637380545965e-119, stat =544.5770045551502

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}185}]:}      DataIn     stat         p    
          0  Discounted  261.528   1.621e-57
          1   Fullprice  544.577  5.580e-119
\end{Verbatim}
            
    \textbf{Notes on Preliminary Normality Test:} - Both groups failed
assumption of normality.

\begin{verbatim}
- Let's compare normaltest vs shapiro test
\end{verbatim}

\begin{itemize}
\tightlist
\item
  Let's try removing outliers with previously define detect\_outliers
\end{itemize}

    \hypertarget{def-normtest_results}{%
\paragraph{def normtest\_results}\label{def-normtest_results}}

    \hypertarget{sub-aim-2.1.1-use-detect_outliers-to-remove-outliers-re-run-normality-tests}{%
\subsubsection{Sub-Aim 2.1.1 Use detect\_outliers to remove outliers
re-run normality
tests}\label{sub-aim-2.1.1-use-detect_outliers-to-remove-outliers-re-run-normality-tests}}

    \hypertarget{run-detect_outliers-on-df_discounted-df_fullprice-examine-stats-of-outliers-and-then-test-normality-with-cleaned-data.}{%
\subparagraph{Run detect\_outliers on df\_discounted, df\_fullprice,
examine stats of outliers, and then test normality with cleaned
data.}\label{run-detect_outliers-on-df_discounted-df_fullprice-examine-stats-of-outliers-and-then-test-normality-with-cleaned-data.}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}186}]:} \PY{c+c1}{\PYZsh{} Detect outliers in df\PYZus{}discounted}
          \PY{n}{outlier\PYZus{}disc} \PY{o}{=} \PY{n}{detect\PYZus{}outliers}\PY{p}{(}\PY{n}{df\PYZus{}discounted}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{,}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
          
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{Descriptive Stats for Discounted Outliers:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{There are }\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{len(outlier\PYZus{}disc)\PYZcb{} outliers out of }\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{len(df)\PYZcb{} = }\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{len(outlier\PYZus{}disc)/len(df)*100\PYZcb{} }\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{df}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{outlier\PYZus{}disc}\PY{p}{]}\PY{o}{.}\PY{n}{describe}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

Descriptive Stats for Discounted Outliers:
There are 29 outliers out of 2155 = 1.345707656612529 \%

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}186}]:}        Quantity  Discount
          count     29.0     29.0  
          mean      94.0      0.0  
          std       17.0      0.0  
          min       77.0      0.0  
          25\%       80.0      0.0  
          50\%       90.0      0.0  
          75\%      100.0      0.0  
          max      130.0      0.0  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}187}]:} \PY{c+c1}{\PYZsh{} Detect outliers in df\PYZus{}fullprice}
          \PY{n}{outlier\PYZus{}no\PYZus{}disc} \PY{o}{=} \PY{n}{detect\PYZus{}outliers}\PY{p}{(}\PY{n}{df\PYZus{}fullprice}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{,}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{Descriptive Stats for Fullprice Outliers:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{There are }\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{len(outlier\PYZus{}no\PYZus{}disc)\PYZcb{} outliers out of }\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{len(df)\PYZcb{} = }\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{len(outlier\PYZus{}no\PYZus{}disc)/len(df)*100\PYZcb{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{df}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{outlier\PYZus{}no\PYZus{}disc}\PY{p}{]}\PY{o}{.}\PY{n}{describe}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

Descriptive Stats for Fullprice Outliers:
There are 34 outliers out of 2155 = 1.5777262180974478\%

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}187}]:}        Quantity  Discount
          count     34.0     34.0  
          mean      86.0      0.0  
          std       20.0      0.0  
          min       63.0      0.0  
          25\%       70.0      0.0  
          50\%       80.0      0.0  
          75\%      100.0      0.0  
          max      130.0      0.0  
\end{Verbatim}
            
    \hypertarget{remove-outliers-and-re-run-normality-testing}{%
\paragraph{Remove outliers and re-run normality
testing}\label{remove-outliers-and-re-run-normality-testing}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}188}]:} \PY{c+c1}{\PYZsh{} Indices were from original dataframe still, so dorp outliers from a copy of that }
          \PY{n}{df\PYZus{}to\PYZus{}clean} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Fill Data to Remove with np.nan}
          \PY{n}{remove\PYZus{}label} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outlier\PYZus{}disc}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{outlier\PYZus{}no\PYZus{}disc}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{n}{remove\PYZus{}data} \PY{o}{=} \PY{p}{[}\PY{n}{outlier\PYZus{}disc} \PY{p}{,} \PY{n}{outlier\PYZus{}no\PYZus{}disc}\PY{p}{]}
          
          \PY{n}{remove\PYZus{}me} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{n+nb}{zip}\PY{p}{(}\PY{n}{remove\PYZus{}label}\PY{p}{,} \PY{n}{remove\PYZus{}data}\PY{p}{)}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Loop and replace indices of outliers with np.nan }
          \PY{k}{for} \PY{n}{key}\PY{p}{,}\PY{n}{val} \PY{o+ow}{in} \PY{n}{remove\PYZus{}me}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
              
              \PY{n}{df\PYZus{}to\PYZus{}clean}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{val}\PY{p}{]}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{nan}
              
              \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}key\PYZcb{}}\PY{l+s+s1}{ removed }\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{len(val)\PYZcb{} outliers}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{After removal:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{df\PYZus{}to\PYZus{}clean}\PY{o}{.}\PY{n}{isna}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
outlier\_disc removed 29 outliers
outlier\_no\_disc removed 34 outliers
After removal:
Id                   63
OrderId              63
ProductId            63
UnitPrice            63
Quantity             63
Discount             63
CustomerId           63
EmployeeId           63
OrderDate            63
ShipVia              63
ShipName             63
ShipAddress          63
ShipCity             63
ShipRegion           63
ShipPostalCode      114
ShipCountry          63
price                63
OnSale               63
discounted\_order     63
order\_total          63
week\_day             63
month                63
month\_name           63
dtype: int64

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}189}]:} \PY{c+c1}{\PYZsh{} Replace na and run stattest }
          \PY{c+c1}{\PYZsh{} df\PYZus{}to\PYZus{}clean.info()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}190}]:} \PY{c+c1}{\PYZsh{} pause}
          \PY{n}{df\PYZus{}clean} \PY{o}{=} \PY{n}{df\PYZus{}to\PYZus{}clean}\PY{o}{.}\PY{n}{dropna}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}\PY{c+c1}{\PYZsh{},inplace=True)}
          \PY{c+c1}{\PYZsh{} df\PYZus{}clean.info(),print(f\PYZsq{}\PYZbs{}n\PYZbs{}nOutliers present:\PYZsq{}),df\PYZus{}clean.isna().any()}
\end{Verbatim}


    \hypertarget{separate-back-into-discounted-and-fullprice-dataframes}{%
\paragraph{Separate Back into Discounted and Fullprice
Dataframes}\label{separate-back-into-discounted-and-fullprice-dataframes}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}191}]:} \PY{c+c1}{\PYZsh{} Separate Back into Discounted and Fullprice Dataframes  }
          
          \PY{c+c1}{\PYZsh{} Building data\PYZus{}in dictionary for normtest\PYZus{}results}
          \PY{n}{df\PYZus{}disc\PYZus{}orig} \PY{o}{=} \PY{n}{df\PYZus{}discounted}
          \PY{n}{df\PYZus{}full\PYZus{}orig} \PY{o}{=} \PY{n}{df\PYZus{}fullprice}
          
          \PY{n}{df\PYZus{}discounted\PYZus{}clean} \PY{o}{=} \PY{n}{df\PYZus{}clean}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df\PYZus{}clean}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{\PYZgt{}}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} df\PYZus{}discounted\PYZus{}clean.info()}
          \PY{n}{df\PYZus{}fullprice\PYZus{}clean} \PY{o}{=} \PY{n}{df\PYZus{}clean}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df\PYZus{}clean}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} df\PYZus{}fullprice\PYZus{}clean.info()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}192}]:} \PY{c+c1}{\PYZsh{} Combine all data into 1 dictionary for normtest\PYZus{}results.}
          \PY{n}{data\PYZus{}in} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
          
          \PY{n}{data\PYZus{}in}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Disc, Orig}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}disc\PYZus{}orig}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{n}{data\PYZus{}in}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Disc, Clean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}discounted\PYZus{}clean}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          
          \PY{n}{data\PYZus{}in}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Full Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Orig}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}full\PYZus{}orig}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{n}{data\PYZus{}in}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Full Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Clean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{df\PYZus{}fullprice\PYZus{}clean}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}193}]:} \PY{c+c1}{\PYZsh{} Run normtest\PYZus{}results on combined dataset.}
          \PY{n}{results} \PY{o}{=} \PY{n}{normtest\PYZus{}results}\PY{p}{(}\PY{n}{data\PYZus{}in}\PY{p}{)} \PY{c+c1}{\PYZsh{}[0]}
          \PY{n}{results}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{DataIn}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}193}]:}                          Test       stat         p    
          DataIn                                                
          Disc, Orig                Shapiro    0.869   6.881e-26
          Disc, Clean               Shapiro    0.921   1.161e-19
          (Full Price, Orig)        Shapiro    0.843   3.804e-34
          (Full Price, Clean)       Shapiro    0.917   9.746e-26
          Disc, Orig           D’Agostino’s  261.528   1.621e-57
          Disc, Clean          D’Agostino’s   85.210   3.140e-19
          (Full Price, Orig)   D’Agostino’s  544.577  5.580e-119
          (Full Price, Clean)  D’Agostino’s  146.112   1.871e-32
\end{Verbatim}
            
    \textbf{Notes re: removing outliers with detect\_outliers.} - Still
getting significant results for normality testing. - Attempting 1 more
method of outlier removal -- QuantileTransformer
\texttt{from\ sklearn.preprocessing\ import\ QuantileTransformer}

    \hypertarget{sub-aim-2.1.2-use-quantiletransformer-to-attempt-to-meet-the-assumption-of-normality.}{%
\subsubsection{Sub-Aim 2.1.2 Use QuantileTransformer to attempt to meet
the assumption of
normality.}\label{sub-aim-2.1.2-use-quantiletransformer-to-attempt-to-meet-the-assumption-of-normality.}}

    \hypertarget{def-quant_transform}{%
\paragraph{def quant\_transform}\label{def-quant_transform}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}194}]:} \PY{c+c1}{\PYZsh{} TRANSFORM DATA BEFORE RE\PYZhy{}CALLING ORIGINAL normtest\PYZus{}results}
          \PY{k}{def} \PY{n+nf}{quant\PYZus{}transform}\PY{p}{(}\PY{n}{data\PYZus{}in}\PY{p}{)}\PY{p}{:}
              \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Use sklearn.preprocessing.QuantileTransformer to remove outliers from dataset.}
          \PY{l+s+sd}{    }
          \PY{l+s+sd}{    Parameters:}
          \PY{l+s+sd}{        data\PYZus{}in (dict) \PYZhy{}\PYZhy{} dictionary with data series as values to be processed.}
          \PY{l+s+sd}{    Returns: }
          \PY{l+s+sd}{        data\PYZus{}tf (dict) \PYZhy{}\PYZhy{} dicionary of same keys from data\PYZus{}in, but transformed.}
          \PY{l+s+sd}{        \PYZsq{}\PYZsq{}\PYZsq{}}
              
              \PY{k+kn}{from} \PY{n+nn}{sklearn} \PY{k}{import} \PY{n}{preprocessing} \PY{k}{as} \PY{n}{prep} 
              \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{preprocessing} \PY{k}{import} \PY{n}{QuantileTransformer}
          
              \PY{n}{qt} \PY{o}{=}  \PY{n}{QuantileTransformer}\PY{p}{(}\PY{n}{n\PYZus{}quantiles}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,}\PY{n}{output\PYZus{}distribution}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{normal}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{data\PYZus{}tf} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
              \PY{k}{for} \PY{n}{k}\PY{p}{,}\PY{n}{v} \PY{o+ow}{in} \PY{n}{data\PYZus{}in}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}    
                  \PY{n}{data} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{v}\PY{p}{)}\PY{o}{.}\PY{n}{reshape}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
                  \PY{n}{transformed} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{squeeze}\PY{p}{(}\PY{n}{qt}\PY{o}{.}\PY{n}{fit\PYZus{}transform}\PY{p}{(}\PY{n}{data}\PY{p}{)}\PY{p}{)}\PY{p}{)}
                
                  \PY{n}{data\PYZus{}tf}\PY{p}{[}\PY{n}{k}\PY{p}{]} \PY{o}{=} \PY{n}{transformed}
              
              \PY{k}{return} \PY{n}{data\PYZus{}tf}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}195}]:} \PY{c+c1}{\PYZsh{} Run data\PYZus{}in through quant\PYZus{}transform to get data\PYZus{}tf}
          \PY{n}{data\PYZus{}tf} \PY{o}{=} \PY{n}{quant\PYZus{}transform}\PY{p}{(}\PY{n}{data\PYZus{}in}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Run transformed data through normtest\PYZus{}results.}
          \PY{n}{trans\PYZus{}norm\PYZus{}test} \PY{o}{=} \PY{n}{normtest\PYZus{}results}\PY{p}{(}\PY{n}{data\PYZus{}tf}\PY{p}{)}\PY{c+c1}{\PYZsh{}[0]}
          \PY{n}{trans\PYZus{}norm\PYZus{}test}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}195}]:}          DataIn             Test       stat        p    
          0           Disc, Orig       Shapiro    0.956  3.410e-15
          1          Disc, Clean       Shapiro    0.865  2.468e-25
          2   (Full Price, Orig)       Shapiro    0.919  5.725e-26
          3  (Full Price, Clean)       Shapiro    0.854  1.201e-32
          0           Disc, Orig  D’Agostino’s  103.590  3.203e-23
          1          Disc, Clean  D’Agostino’s  233.956  1.574e-51
          2   (Full Price, Orig)  D’Agostino’s  317.580  1.093e-69
          3  (Full Price, Clean)  D’Agostino’s  279.787  1.758e-61
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}196}]:} \PY{c+c1}{\PYZsh{} dataDict = \PYZob{}\PYZsq{}Original\PYZsq{}:data\PYZus{}in,\PYZsq{}Transformed\PYZsq{}:data\PYZus{}in\PYZus{}tf \PYZcb{}}
          \PY{c+c1}{\PYZsh{} \PYZsh{} df\PYZus{}data = normtest\PYZus{}results(data\PYZus{}in)[0]}
          \PY{c+c1}{\PYZsh{} dataDict\PYZus{}results = \PYZob{}\PYZsq{}Original\PYZhy{}Results\PYZsq{}:normtest\PYZus{}results(data\PYZus{}in),\PYZsq{}Transformed\PYZhy{}Results\PYZsq{}: normtest\PYZus{}results(data\PYZus{}in\PYZus{}tf)\PYZcb{}}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}197}]:} \PY{c+c1}{\PYZsh{} \PYZsh{} Display info for }
          \PY{c+c1}{\PYZsh{} printDict=dataDict}
          \PY{c+c1}{\PYZsh{} print(f\PYZsq{}dataDict\PYZsq{})}
          
          \PY{c+c1}{\PYZsh{} for key, val in printDict.items():}
          \PY{c+c1}{\PYZsh{}   print(key)}
          \PY{c+c1}{\PYZsh{}   for k, v in printDict[key].items():}
          \PY{c+c1}{\PYZsh{}     print(f\PYZsq{}   \PYZob{}k\PYZcb{}\PYZbs{}n         has \PYZob{}len(v)\PYZcb{} values with mean=\PYZob{}np.mean(v)\PYZcb{}\PYZsq{})}
\end{Verbatim}


    \hypertarget{sub-aim-2.1.3-use-resampling-to-get-a-normal-distribution-from-the-data-and-re-run-normality-tests.}{%
\subsubsection{Sub-Aim 2.1.3 Use resampling to get a normal distribution
from the data and re-run normality
tests.}\label{sub-aim-2.1.3-use-resampling-to-get-a-normal-distribution-from-the-data-and-re-run-normality-tests.}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}198}]:} \PY{n}{data\PYZus{}discounted} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{\PYZgt{}}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
          \PY{n}{data\PYZus{}fullprice} \PY{o}{=} \PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{df}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discount}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{==}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}199}]:} \PY{c+c1}{\PYZsh{} Resample our data  i \PYZsh{} of samples with n =50/sample }
          \PY{n}{n} \PY{o}{=} \PY{l+m+mi}{50} 
          \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{10000}
          \PY{n}{pop\PYZus{}samp\PYZus{}disc} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{n}{pop\PYZus{}samp\PYZus{}full} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{n}{i}\PY{p}{)}\PY{p}{:}
              
              \PY{n}{pop\PYZus{}samp\PYZus{}disc}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{data\PYZus{}discounted}\PY{o}{.}\PY{n}{sample}\PY{p}{(}\PY{n}{n}\PY{p}{)}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{p}{)}
              \PY{n}{pop\PYZus{}samp\PYZus{}full}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{data\PYZus{}fullprice}\PY{o}{.}\PY{n}{sample}\PY{p}{(}\PY{n}{n}\PY{p}{)}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{p}{)}
              \PY{c+c1}{\PYZsh{}   test\PYZus{}results.append(normaltest())}
              \PY{c+c1}{\PYZsh{} plt.hist([pop\PYZus{}samp\PYZus{}disc,pop\PYZus{}samp\PYZus{}full])}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}200}]:} \PY{c+c1}{\PYZsh{} Plot the re\PYZhy{}sampled data}
          
          \PY{c+c1}{\PYZsh{} \PYZsh{} IF want to take smaller sample from population:}
          
          \PY{c+c1}{\PYZsh{} pop\PYZus{}samp\PYZus{}disc = np.random.choice(pop\PYZus{}samp\PYZus{}disc,1000)}
          \PY{c+c1}{\PYZsh{} pop\PYZus{}samp\PYZus{}full = np.random.choice(pop\PYZus{}samp\PYZus{}full, 1000)}
          \PY{k}{with} \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{context}\PY{p}{(}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{tableau\PYZhy{}colorblind10}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{p}{:}
              \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Quantity of Discounted vs Full Price Products Purchased }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{pop\PYZus{}samp\PYZus{}disc}\PY{p}{,}\PY{n}{alpha} \PY{o}{=} \PY{l+m+mf}{0.5}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discounted}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{pop\PYZus{}samp\PYZus{}full}\PY{p}{,}\PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{black}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha} \PY{o}{=} \PY{l+m+mf}{0.5}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Full Price}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
              \PY{c+c1}{\PYZsh{} Adding annotations}
              \PY{n}{meanD} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{pop\PYZus{}samp\PYZus{}disc}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}
              \PY{n}{meanS} \PY{o}{=} \PY{n+nb}{round}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{pop\PYZus{}samp\PYZus{}full}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{meanD}\PY{p}{,} \PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Discounted Mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{text}\PY{p}{(}\PY{n}{meanD}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{700}\PY{p}{,}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mean:}\PY{l+s+si}{\PYZob{}meanD\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
              
              \PY{n}{plt}\PY{o}{.}\PY{n}{axvline}\PY{p}{(}\PY{n}{meanS}\PY{p}{,}\PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{k}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{linestyle}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZhy{}\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{label}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Full Price Mean}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{text}\PY{p}{(}\PY{n}{meanS}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{700}\PY{p}{,}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mean:}\PY{l+s+si}{\PYZob{}meanS\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
          
          
              \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{)}
              \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Run normality testing}
          \PY{n}{stat}\PY{p}{,}\PY{n}{p} \PY{o}{=} \PY{n}{normaltest}\PY{p}{(}\PY{n}{pop\PYZus{}samp\PYZus{}full}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Normality: stat =}\PY{l+s+si}{\PYZob{}stat\PYZcb{}}\PY{l+s+s1}{, p = }\PY{l+s+si}{\PYZob{}p\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          
          \PY{c+c1}{\PYZsh{} Run ttest}
          \PY{n}{tstat}\PY{p}{,}\PY{n}{tp} \PY{o}{=} \PY{n}{stats}\PY{o}{.}\PY{n}{ttest\PYZus{}ind}\PY{p}{(}\PY{n}{pop\PYZus{}samp\PYZus{}disc}\PY{p}{,} \PY{n}{pop\PYZus{}samp\PYZus{}full}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} print(f\PYZsq{}T\PYZhy{}test: stat =\PYZob{}tstat\PYZcb{}, p = \PYZob{}tp\PYZcb{}\PYZsq{})\PYZsh{}tstat,tp}
          \PY{c+c1}{\PYZsh{} ax.text(}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_324_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
Normality: stat =77.87856705416267, p = 1.2271115247528557e-17

    \end{Verbatim}

    \hypertarget{h1-aim-2-preliminary-notes.}{%
\paragraph{H1, Aim 2 Preliminary
notes.}\label{h1-aim-2-preliminary-notes.}}

\begin{itemize}
\tightlist
\item
  Regardless of transformations, we do not pass normality test.
\item
  Switching tactics and letting the the tests for assumptions of
  normality and equal variance decide the appropriate test
\end{itemize}


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
